"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_pages-dir-node_components_Game_tsx";
exports.ids = ["_pages-dir-node_components_Game_tsx"];
exports.modules = {

/***/ "(pages-dir-node)/./components/Game.tsx":
/*!*****************************!*\
  !*** ./components/Game.tsx ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Game)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_phaser_GameScene__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/phaser/GameScene */ \"(pages-dir-node)/./lib/phaser/GameScene.ts\");\n/* harmony import */ var _lib_phaser_BattleScene__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/phaser/BattleScene */ \"(pages-dir-node)/./lib/phaser/BattleScene.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_phaser_GameScene__WEBPACK_IMPORTED_MODULE_3__]);\n_lib_phaser_GameScene__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\nfunction Game({ className = \"\", tileSize = 32, mapWidth = 50, mapHeight = 38, playerSpeed = 200, initialX, initialY, onPokemonSpotted, onPokemonCleared, onSpawnsUpdate, playerPokemon }) {\n    const gameRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const phaserGameRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"Game.useEffect\": ()=>{\n            if (!gameRef.current) return;\n            const getSize = {\n                \"Game.useEffect.getSize\": ()=>({\n                        w: gameRef.current.clientWidth,\n                        h: gameRef.current.clientHeight\n                    })\n            }[\"Game.useEffect.getSize\"];\n            const { w, h } = getSize();\n            const config = {\n                type: phaser__WEBPACK_IMPORTED_MODULE_1__.AUTO,\n                width: Math.max(320, w),\n                height: Math.max(240, h),\n                parent: gameRef.current,\n                backgroundColor: \"#0b0e14\",\n                physics: {\n                    default: \"arcade\",\n                    arcade: {\n                        gravity: {\n                            x: 0,\n                            y: 0\n                        },\n                        debug: false\n                    }\n                },\n                scene: [\n                    _lib_phaser_GameScene__WEBPACK_IMPORTED_MODULE_3__.GameScene,\n                    _lib_phaser_BattleScene__WEBPACK_IMPORTED_MODULE_4__.BattleScene\n                ],\n                scale: {\n                    mode: phaser__WEBPACK_IMPORTED_MODULE_1__.Scale.RESIZE,\n                    autoCenter: phaser__WEBPACK_IMPORTED_MODULE_1__.Scale.CENTER_BOTH\n                }\n            };\n            phaserGameRef.current = new phaser__WEBPACK_IMPORTED_MODULE_1__.Game(config);\n            const startOrRestart = {\n                \"Game.useEffect.startOrRestart\": ()=>{\n                    const game = phaserGameRef.current;\n                    const data = {\n                        tileSize,\n                        mapWidth,\n                        mapHeight,\n                        playerSpeed,\n                        initialX,\n                        initialY,\n                        onPokemonSpotted,\n                        onPokemonCleared,\n                        onSpawnsUpdate,\n                        playerPokemon\n                    };\n                    const mgr = game.scene;\n                    if (mgr.isActive(\"GameScene\")) {\n                        mgr.stop(\"GameScene\");\n                        mgr.start(\"GameScene\", data);\n                    } else {\n                        mgr.start(\"GameScene\", data);\n                    }\n                }\n            }[\"Game.useEffect.startOrRestart\"];\n            if (phaserGameRef.current.isBooted) startOrRestart();\n            else phaserGameRef.current.events.once(phaser__WEBPACK_IMPORTED_MODULE_1__.Core.Events.READY, startOrRestart);\n            const ro = new ResizeObserver({\n                \"Game.useEffect\": ()=>{\n                    if (!phaserGameRef.current || !gameRef.current) return;\n                    const { w: nw, h: nh } = getSize();\n                    phaserGameRef.current.scale.resize(Math.max(320, nw), Math.max(240, nh));\n                }\n            }[\"Game.useEffect\"]);\n            ro.observe(gameRef.current);\n            return ({\n                \"Game.useEffect\": ()=>{\n                    ro.disconnect();\n                    if (phaserGameRef.current) {\n                        phaserGameRef.current.destroy(true);\n                        phaserGameRef.current = null;\n                    }\n                }\n            })[\"Game.useEffect\"];\n        }\n    }[\"Game.useEffect\"], [\n        tileSize,\n        mapWidth,\n        mapHeight,\n        playerSpeed,\n        initialX,\n        initialY,\n        onPokemonSpotted,\n        onPokemonCleared,\n        onSpawnsUpdate,\n        playerPokemon\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: gameRef,\n        className: `game-container ${className}`,\n        style: {\n            width: \"100%\",\n            height: \"100%\"\n        }\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Sahith\\\\OneDrive\\\\Desktop\\\\yokaihunt\\\\frontend\\\\components\\\\Game.tsx\",\n        lineNumber: 109,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU8sQ0FBQ2lELE9BQU8sQ0FBQzt3QkFDOUJsRCxjQUFjQyxPQUFPLEdBQUc7b0JBQzFCO2dCQUNGOztRQUNGO3lCQUFHO1FBQUNaO1FBQVVDO1FBQVVDO1FBQVdDO1FBQWFDO1FBQVVDO1FBQVVDO1FBQWtCQztRQUFrQkM7UUFBZ0JDO0tBQWM7SUFFdEkscUJBQ0UsOERBQUNxRDtRQUNDQyxLQUFLckQ7UUFDTFgsV0FBVyxDQUFDLGVBQWUsRUFBRUEsV0FBVztRQUN4Q2lFLE9BQU87WUFBRTNDLE9BQU87WUFBUUcsUUFBUTtRQUFPOzs7Ozs7QUFHN0MiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcU2FoaXRoXFxPbmVEcml2ZVxcRGVza3RvcFxceW9rYWlodW50XFxmcm9udGVuZFxcY29tcG9uZW50c1xcR2FtZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XHJcblxyXG5pbXBvcnQgKiBhcyBQaGFzZXIgZnJvbSBcInBoYXNlclwiO1xyXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgeyBHYW1lU2NlbmUgfSBmcm9tIFwiLi4vbGliL3BoYXNlci9HYW1lU2NlbmVcIjtcclxuaW1wb3J0IHsgQmF0dGxlU2NlbmUgfSBmcm9tIFwiLi4vbGliL3BoYXNlci9CYXR0bGVTY2VuZVwiO1xyXG5cclxuaW50ZXJmYWNlIEdhbWVQcm9wcyB7XHJcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xyXG4gIHRpbGVTaXplPzogbnVtYmVyO1xyXG4gIG1hcFdpZHRoPzogbnVtYmVyO1xyXG4gIG1hcEhlaWdodD86IG51bWJlcjtcclxuICBwbGF5ZXJTcGVlZD86IG51bWJlcjtcclxuICBpbml0aWFsWD86IG51bWJlcjtcclxuICBpbml0aWFsWT86IG51bWJlcjtcclxuICBvblBva2Vtb25TcG90dGVkPzogKHBva2Vtb246IHsgbmFtZTogc3RyaW5nOyBzcHJpdGVVcmw6IHN0cmluZzsgcG9rZUlkOiBudW1iZXIgfSkgPT4gdm9pZDtcclxuICBvblBva2Vtb25DbGVhcmVkPzogKCkgPT4gdm9pZDtcclxuICBvblNwYXduc1VwZGF0ZT86IChzcGF3bnM6IGFueVtdKSA9PiB2b2lkO1xyXG4gIHBsYXllclBva2Vtb24/OiBhbnk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEdhbWUoe1xyXG4gIGNsYXNzTmFtZSA9IFwiXCIsXHJcbiAgdGlsZVNpemUgPSAzMixcclxuICBtYXBXaWR0aCA9IDUwLFxyXG4gIG1hcEhlaWdodCA9IDM4LFxyXG4gIHBsYXllclNwZWVkID0gMjAwLFxyXG4gIGluaXRpYWxYLFxyXG4gIGluaXRpYWxZLFxyXG4gIG9uUG9rZW1vblNwb3R0ZWQsXHJcbiAgb25Qb2tlbW9uQ2xlYXJlZCxcclxuICBvblNwYXduc1VwZGF0ZSxcclxuICBwbGF5ZXJQb2tlbW9uLFxyXG59OiBHYW1lUHJvcHMpIHtcclxuICBjb25zdCBnYW1lUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcclxuICBjb25zdCBwaGFzZXJHYW1lUmVmID0gdXNlUmVmPFBoYXNlci5HYW1lIHwgbnVsbD4obnVsbCk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWdhbWVSZWYuY3VycmVudCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGdldFNpemUgPSAoKSA9PiAoeyB3OiBnYW1lUmVmLmN1cnJlbnQhLmNsaWVudFdpZHRoLCBoOiBnYW1lUmVmLmN1cnJlbnQhLmNsaWVudEhlaWdodCB9KTtcclxuICAgIGNvbnN0IHsgdywgaCB9ID0gZ2V0U2l6ZSgpO1xyXG5cclxuICAgIGNvbnN0IGNvbmZpZzogUGhhc2VyLlR5cGVzLkNvcmUuR2FtZUNvbmZpZyA9IHtcclxuICAgICAgdHlwZTogUGhhc2VyLkFVVE8sXHJcbiAgICAgIHdpZHRoOiBNYXRoLm1heCgzMjAsIHcpLFxyXG4gICAgICBoZWlnaHQ6IE1hdGgubWF4KDI0MCwgaCksXHJcbiAgICAgIHBhcmVudDogZ2FtZVJlZi5jdXJyZW50LFxyXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiIzBiMGUxNFwiLFxyXG4gICAgICBwaHlzaWNzOiB7XHJcbiAgICAgICAgZGVmYXVsdDogXCJhcmNhZGVcIixcclxuICAgICAgICBhcmNhZGU6IHtcclxuICAgICAgICAgIGdyYXZpdHk6IHsgeDogMCwgeTogMCB9LFxyXG4gICAgICAgICAgZGVidWc6IGZhbHNlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHNjZW5lOiBbR2FtZVNjZW5lLCBCYXR0bGVTY2VuZV0sXHJcbiAgICAgIHNjYWxlOiB7XHJcbiAgICAgICAgbW9kZTogUGhhc2VyLlNjYWxlLlJFU0laRSxcclxuICAgICAgICBhdXRvQ2VudGVyOiBQaGFzZXIuU2NhbGUuQ0VOVEVSX0JPVEgsXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG5cclxuICAgIHBoYXNlckdhbWVSZWYuY3VycmVudCA9IG5ldyBQaGFzZXIuR2FtZShjb25maWcpO1xyXG5cclxuICAgIGNvbnN0IHN0YXJ0T3JSZXN0YXJ0ID0gKCkgPT4ge1xyXG4gICAgICBjb25zdCBnYW1lID0gcGhhc2VyR2FtZVJlZi5jdXJyZW50IGFzIFBoYXNlci5HYW1lO1xyXG4gICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgIHRpbGVTaXplLFxyXG4gICAgICAgIG1hcFdpZHRoLFxyXG4gICAgICAgIG1hcEhlaWdodCxcclxuICAgICAgICBwbGF5ZXJTcGVlZCxcclxuICAgICAgICBpbml0aWFsWCxcclxuICAgICAgICBpbml0aWFsWSxcclxuICAgICAgICBvblBva2Vtb25TcG90dGVkLFxyXG4gICAgICAgIG9uUG9rZW1vbkNsZWFyZWQsXHJcbiAgICAgICAgb25TcGF3bnNVcGRhdGUsXHJcbiAgICAgICAgcGxheWVyUG9rZW1vbixcclxuICAgICAgfTtcclxuICAgICAgY29uc3QgbWdyID0gZ2FtZS5zY2VuZTtcclxuICAgICAgaWYgKG1nci5pc0FjdGl2ZShcIkdhbWVTY2VuZVwiKSkge1xyXG4gICAgICAgIG1nci5zdG9wKFwiR2FtZVNjZW5lXCIpO1xyXG4gICAgICAgIG1nci5zdGFydChcIkdhbWVTY2VuZVwiLCBkYXRhKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBtZ3Iuc3RhcnQoXCJHYW1lU2NlbmVcIiwgZGF0YSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgaWYgKHBoYXNlckdhbWVSZWYuY3VycmVudC5pc0Jvb3RlZCkgc3RhcnRPclJlc3RhcnQoKTtcclxuICAgIGVsc2UgcGhhc2VyR2FtZVJlZi5jdXJyZW50LmV2ZW50cy5vbmNlKFBoYXNlci5Db3JlLkV2ZW50cy5SRUFEWSwgc3RhcnRPclJlc3RhcnQpO1xyXG5cclxuICAgIGNvbnN0IHJvID0gbmV3IFJlc2l6ZU9ic2VydmVyKCgpID0+IHtcclxuICAgICAgaWYgKCFwaGFzZXJHYW1lUmVmLmN1cnJlbnQgfHwgIWdhbWVSZWYuY3VycmVudCkgcmV0dXJuO1xyXG4gICAgICBjb25zdCB7IHc6IG53LCBoOiBuaCB9ID0gZ2V0U2l6ZSgpO1xyXG4gICAgICBwaGFzZXJHYW1lUmVmLmN1cnJlbnQuc2NhbGUucmVzaXplKE1hdGgubWF4KDMyMCwgbncpLCBNYXRoLm1heCgyNDAsIG5oKSk7XHJcbiAgICB9KTtcclxuICAgIHJvLm9ic2VydmUoZ2FtZVJlZi5jdXJyZW50KTtcclxuXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICByby5kaXNjb25uZWN0KCk7XHJcbiAgICAgIGlmIChwaGFzZXJHYW1lUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICBwaGFzZXJHYW1lUmVmLmN1cnJlbnQuZGVzdHJveSh0cnVlKTtcclxuICAgICAgICBwaGFzZXJHYW1lUmVmLmN1cnJlbnQgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH0sIFt0aWxlU2l6ZSwgbWFwV2lkdGgsIG1hcEhlaWdodCwgcGxheWVyU3BlZWQsIGluaXRpYWxYLCBpbml0aWFsWSwgb25Qb2tlbW9uU3BvdHRlZCwgb25Qb2tlbW9uQ2xlYXJlZCwgb25TcGF3bnNVcGRhdGUsIHBsYXllclBva2Vtb25dKTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXZcclxuICAgICAgcmVmPXtnYW1lUmVmfVxyXG4gICAgICBjbGFzc05hbWU9e2BnYW1lLWNvbnRhaW5lciAke2NsYXNzTmFtZX1gfVxyXG4gICAgICBzdHlsZT17eyB3aWR0aDogXCIxMDAlXCIsIGhlaWdodDogXCIxMDAlXCIgfX1cclxuICAgIC8+XHJcbiAgKTtcclxufVxyXG4iXSwibmFtZXMiOlsiUGhhc2VyIiwidXNlRWZmZWN0IiwidXNlUmVmIiwiR2FtZVNjZW5lIiwiQmF0dGxlU2NlbmUiLCJHYW1lIiwiY2xhc3NOYW1lIiwidGlsZVNpemUiLCJtYXBXaWR0aCIsIm1hcEhlaWdodCIsInBsYXllclNwZWVkIiwiaW5pdGlhbFgiLCJpbml0aWFsWSIsIm9uUG9rZW1vblNwb3R0ZWQiLCJvblBva2Vtb25DbGVhcmVkIiwib25TcGF3bnNVcGRhdGUiLCJwbGF5ZXJQb2tlbW9uIiwiZ2FtZVJlZiIsInBoYXNlckdhbWVSZWYiLCJjdXJyZW50IiwiZ2V0U2l6ZSIsInciLCJjbGllbnRXaWR0aCIsImgiLCJjbGllbnRIZWlnaHQiLCJjb25maWciLCJ0eXBlIiwiQVVUTyIsIndpZHRoIiwiTWF0aCIsIm1heCIsImhlaWdodCIsInBhcmVudCIsImJhY2tncm91bmRDb2xvciIsInBoeXNpY3MiLCJkZWZhdWx0IiwiYXJjYWRlIiwiZ3Jhdml0eSIsIngiLCJ5IiwiZGVidWciLCJzY2VuZSIsInNjYWxlIiwibW9kZSIsIlNjYWxlIiwiUkVTSVpFIiwiYXV0b0NlbnRlciIsIkNFTlRFUl9CT1RIIiwic3RhcnRPclJlc3RhcnQiLCJnYW1lIiwiZGF0YSIsIm1nciIsImlzQWN0aXZlIiwic3RvcCIsInN0YXJ0IiwiaXNCb290ZWQiLCJldmVudHMiLCJvbmNlIiwiQ29yZSIsIkV2ZW50cyIsIlJFQURZIiwicm8iLCJSZXNpemVPYnNlcnZlciIsIm53IiwibmgiLCJyZXNpemUiLCJvYnNlcnZlIiwiZGlzY29ubmVjdCIsImRlc3Ryb3kiLCJkaXYiLCJyZWYiLCJzdHlsZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/Game.tsx\n");

/***/ }),

/***/ "(pages-dir-node)/./lib/biomes.ts":
/*!***********************!*\
  !*** ./lib/biomes.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BIOMES: () => (/* binding */ BIOMES)\n/* harmony export */ });\nconst BIOMES = {\n    grassland: {\n        id: \"grassland\",\n        name: \"Grassland\",\n        environmentColor: 0x87cc5c,\n        tileSet: {\n            ground: \"tilesheet\",\n            obstacle: \"tilesheet\"\n        },\n        pokemonPool: [\n            \"grass\",\n            \"bug\",\n            \"normal\",\n            \"flying\"\n        ],\n        weather: \"sun\"\n    },\n    desert: {\n        id: \"desert\",\n        name: \"Desert\",\n        environmentColor: 0xdeb887,\n        tileSet: {\n            ground: \"tilesheet\",\n            obstacle: \"tilesheet\"\n        },\n        pokemonPool: [\n            \"ground\",\n            \"rock\",\n            \"fire\"\n        ],\n        weather: \"sun\"\n    },\n    lake: {\n        id: \"lake\",\n        name: \"Lake\",\n        environmentColor: 0x66a3ff,\n        tileSet: {\n            ground: \"tilesheet\",\n            obstacle: \"tilesheet\"\n        },\n        pokemonPool: [\n            \"water\",\n            \"dragon\",\n            \"fairy\"\n        ],\n        weather: \"fog\"\n    },\n    city: {\n        id: \"city\",\n        name: \"City\",\n        environmentColor: 0x999999,\n        tileSet: {\n            ground: \"tilesheet\",\n            obstacle: \"tilesheet\"\n        },\n        pokemonPool: [\n            \"electric\",\n            \"normal\",\n            \"steel\",\n            \"fighting\"\n        ],\n        weather: \"none\"\n    },\n    mountain: {\n        id: \"mountain\",\n        name: \"Mountain\",\n        environmentColor: 0xb0c4de,\n        tileSet: {\n            ground: \"tilesheet\",\n            obstacle: \"tilesheet\"\n        },\n        pokemonPool: [\n            \"rock\",\n            \"ground\",\n            \"ice\",\n            \"dragon\"\n        ],\n        weather: \"snow\"\n    },\n    cave: {\n        id: \"cave\",\n        name: \"Cave\",\n        environmentColor: 0x444444,\n        tileSet: {\n            ground: \"tilesheet\",\n            obstacle: \"tilesheet\"\n        },\n        pokemonPool: [\n            \"rock\",\n            \"ground\",\n            \"poison\",\n            \"dark\"\n        ],\n        weather: \"fog\"\n    },\n    forest: {\n        id: \"forest\",\n        name: \"Forest\",\n        environmentColor: 0x2f6f4f,\n        tileSet: {\n            ground: \"tilesheet\",\n            obstacle: \"tilesheet\"\n        },\n        pokemonPool: [\n            \"grass\",\n            \"bug\",\n            \"fairy\"\n        ],\n        weather: \"fog\"\n    },\n    snowfield: {\n        id: \"snowfield\",\n        name: \"Snowfield\",\n        environmentColor: 0xe0f7ff,\n        tileSet: {\n            ground: \"tilesheet\",\n            obstacle: \"tilesheet\"\n        },\n        pokemonPool: [\n            \"ice\",\n            \"water\"\n        ],\n        weather: \"snow\"\n    },\n    tower: {\n        id: \"tower\",\n        name: \"Ancient Tower\",\n        environmentColor: 0x551a8b,\n        tileSet: {\n            ground: \"tilesheet\",\n            obstacle: \"tilesheet\"\n        },\n        pokemonPool: [\n            \"ghost\",\n            \"dark\"\n        ],\n        weather: \"fog\"\n    },\n    lab: {\n        id: \"lab\",\n        name: \"Research Lab\",\n        environmentColor: 0xccccff,\n        tileSet: {\n            ground: \"tilesheet\",\n            obstacle: \"tilesheet\"\n        },\n        pokemonPool: [\n            \"electric\",\n            \"steel\",\n            \"psychic\"\n        ],\n        weather: \"none\"\n    },\n    temple: {\n        id: \"temple\",\n        name: \"Desert Temple\",\n        environmentColor: 0xc2b280,\n        tileSet: {\n            ground: \"tilesheet\",\n            obstacle: \"tilesheet\"\n        },\n        pokemonPool: [\n            \"ground\",\n            \"rock\",\n            \"fire\"\n        ],\n        weather: \"sun\"\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2xpYi9iaW9tZXMudHMiLCJtYXBwaW5ncyI6Ijs7OztBQWNPLE1BQU1BLFNBQW9DO0lBQy9DQyxXQUFXO1FBQ1RDLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxrQkFBa0I7UUFDbEJDLFNBQVM7WUFBRUMsUUFBUTtZQUFhQyxVQUFVO1FBQVk7UUFDdERDLGFBQWE7WUFBQztZQUFTO1lBQU87WUFBVTtTQUFTO1FBQ2pEQyxTQUFTO0lBQ1g7SUFDQUMsUUFBUTtRQUNOUixJQUFJO1FBQ0pDLE1BQU07UUFDTkMsa0JBQWtCO1FBQ2xCQyxTQUFTO1lBQUVDLFFBQVE7WUFBYUMsVUFBVTtRQUFZO1FBQ3REQyxhQUFhO1lBQUM7WUFBVTtZQUFRO1NBQU87UUFDdkNDLFNBQVM7SUFDWDtJQUNBRSxNQUFNO1FBQ0pULElBQUk7UUFDSkMsTUFBTTtRQUNOQyxrQkFBa0I7UUFDbEJDLFNBQVM7WUFBRUMsUUFBUTtZQUFhQyxVQUFVO1FBQVk7UUFDdERDLGFBQWE7WUFBQztZQUFTO1lBQVU7U0FBUTtRQUN6Q0MsU0FBUztJQUNYO0lBQ0FHLE1BQU07UUFDSlYsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLGtCQUFrQjtRQUNsQkMsU0FBUztZQUFFQyxRQUFRO1lBQWFDLFVBQVU7UUFBWTtRQUN0REMsYUFBYTtZQUFDO1lBQVk7WUFBVTtZQUFTO1NBQVc7UUFDeERDLFNBQVM7SUFDWDtJQUNBSSxVQUFVO1FBQ1JYLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxrQkFBa0I7UUFDbEJDLFNBQVM7WUFBRUMsUUFBUTtZQUFhQyxVQUFVO1FBQVk7UUFDdERDLGFBQWE7WUFBQztZQUFRO1lBQVU7WUFBTztTQUFTO1FBQ2hEQyxTQUFTO0lBQ1g7SUFDQUssTUFBTTtRQUNKWixJQUFJO1FBQ0pDLE1BQU07UUFDTkMsa0JBQWtCO1FBQ2xCQyxTQUFTO1lBQUVDLFFBQVE7WUFBYUMsVUFBVTtRQUFZO1FBQ3REQyxhQUFhO1lBQUM7WUFBUTtZQUFVO1lBQVU7U0FBTztRQUNqREMsU0FBUztJQUNYO0lBQ0FNLFFBQVE7UUFDTmIsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLGtCQUFrQjtRQUNsQkMsU0FBUztZQUFFQyxRQUFRO1lBQWFDLFVBQVU7UUFBWTtRQUN0REMsYUFBYTtZQUFDO1lBQVM7WUFBTztTQUFRO1FBQ3RDQyxTQUFTO0lBQ1g7SUFDQU8sV0FBVztRQUNUZCxJQUFJO1FBQ0pDLE1BQU07UUFDTkMsa0JBQWtCO1FBQ2xCQyxTQUFTO1lBQUVDLFFBQVE7WUFBYUMsVUFBVTtRQUFZO1FBQ3REQyxhQUFhO1lBQUM7WUFBTztTQUFRO1FBQzdCQyxTQUFTO0lBQ1g7SUFDQVEsT0FBTztRQUNMZixJQUFJO1FBQ0pDLE1BQU07UUFDTkMsa0JBQWtCO1FBQ2xCQyxTQUFTO1lBQUVDLFFBQVE7WUFBYUMsVUFBVTtRQUFZO1FBQ3REQyxhQUFhO1lBQUM7WUFBUztTQUFPO1FBQzlCQyxTQUFTO0lBQ1g7SUFDQVMsS0FBSztRQUNIaEIsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLGtCQUFrQjtRQUNsQkMsU0FBUztZQUFFQyxRQUFRO1lBQWFDLFVBQVU7UUFBWTtRQUN0REMsYUFBYTtZQUFDO1lBQVk7WUFBUztTQUFVO1FBQzdDQyxTQUFTO0lBQ1g7SUFDQVUsUUFBUTtRQUNOakIsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLGtCQUFrQjtRQUNsQkMsU0FBUztZQUFFQyxRQUFRO1lBQWFDLFVBQVU7UUFBWTtRQUN0REMsYUFBYTtZQUFDO1lBQVU7WUFBUTtTQUFPO1FBQ3ZDQyxTQUFTO0lBQ1g7QUFDRixFQUFFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFNhaGl0aFxcT25lRHJpdmVcXERlc2t0b3BcXHlva2FpaHVudFxcZnJvbnRlbmRcXGxpYlxcYmlvbWVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIEJpb21lSWQgPSBcImdyYXNzbGFuZFwiIHwgXCJkZXNlcnRcIiB8IFwibGFrZVwiIHwgXCJjaXR5XCIgfCBcIm1vdW50YWluXCIgfCBcImNhdmVcIiB8IFwiZm9yZXN0XCIgfCBcInNub3dmaWVsZFwiIHwgXCJ0b3dlclwiIHwgXCJsYWJcIiB8IFwidGVtcGxlXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEJpb21lRGVmIHtcclxuICBpZDogQmlvbWVJZDtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgZW52aXJvbm1lbnRDb2xvcjogbnVtYmVyOyAvLyBoZXggY29sb3IgZm9yIG92ZXJsYXlcclxuICB0aWxlU2V0OiB7XHJcbiAgICBncm91bmQ6IHN0cmluZzsgLy8ga2V5IHVzZWQgaW4gUGhhc2VyIHRleHR1cmVzIG1hbmFnZXJcclxuICAgIG9ic3RhY2xlOiBzdHJpbmc7XHJcbiAgfTtcclxuICBwb2tlbW9uUG9vbDogc3RyaW5nW107IC8vIHR5cGUgbmFtZXMgdG8gcHJlZmVyXHJcbiAgd2VhdGhlcj86IFwiZm9nXCIgfCBcInNub3dcIiB8IFwic3VuXCIgfCBcIm5vbmVcIjtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IEJJT01FUzogUmVjb3JkPEJpb21lSWQsIEJpb21lRGVmPiA9IHtcclxuICBncmFzc2xhbmQ6IHtcclxuICAgIGlkOiBcImdyYXNzbGFuZFwiLFxyXG4gICAgbmFtZTogXCJHcmFzc2xhbmRcIixcclxuICAgIGVudmlyb25tZW50Q29sb3I6IDB4ODdjYzVjLFxyXG4gICAgdGlsZVNldDogeyBncm91bmQ6IFwidGlsZXNoZWV0XCIsIG9ic3RhY2xlOiBcInRpbGVzaGVldFwiIH0sXHJcbiAgICBwb2tlbW9uUG9vbDogW1wiZ3Jhc3NcIiwgXCJidWdcIiwgXCJub3JtYWxcIiwgXCJmbHlpbmdcIl0sXHJcbiAgICB3ZWF0aGVyOiBcInN1blwiLFxyXG4gIH0sXHJcbiAgZGVzZXJ0OiB7XHJcbiAgICBpZDogXCJkZXNlcnRcIixcclxuICAgIG5hbWU6IFwiRGVzZXJ0XCIsXHJcbiAgICBlbnZpcm9ubWVudENvbG9yOiAweGRlYjg4NyxcclxuICAgIHRpbGVTZXQ6IHsgZ3JvdW5kOiBcInRpbGVzaGVldFwiLCBvYnN0YWNsZTogXCJ0aWxlc2hlZXRcIiB9LFxyXG4gICAgcG9rZW1vblBvb2w6IFtcImdyb3VuZFwiLCBcInJvY2tcIiwgXCJmaXJlXCJdLFxyXG4gICAgd2VhdGhlcjogXCJzdW5cIixcclxuICB9LFxyXG4gIGxha2U6IHtcclxuICAgIGlkOiBcImxha2VcIixcclxuICAgIG5hbWU6IFwiTGFrZVwiLFxyXG4gICAgZW52aXJvbm1lbnRDb2xvcjogMHg2NmEzZmYsXHJcbiAgICB0aWxlU2V0OiB7IGdyb3VuZDogXCJ0aWxlc2hlZXRcIiwgb2JzdGFjbGU6IFwidGlsZXNoZWV0XCIgfSxcclxuICAgIHBva2Vtb25Qb29sOiBbXCJ3YXRlclwiLCBcImRyYWdvblwiLCBcImZhaXJ5XCJdLFxyXG4gICAgd2VhdGhlcjogXCJmb2dcIixcclxuICB9LFxyXG4gIGNpdHk6IHtcclxuICAgIGlkOiBcImNpdHlcIixcclxuICAgIG5hbWU6IFwiQ2l0eVwiLFxyXG4gICAgZW52aXJvbm1lbnRDb2xvcjogMHg5OTk5OTksXHJcbiAgICB0aWxlU2V0OiB7IGdyb3VuZDogXCJ0aWxlc2hlZXRcIiwgb2JzdGFjbGU6IFwidGlsZXNoZWV0XCIgfSxcclxuICAgIHBva2Vtb25Qb29sOiBbXCJlbGVjdHJpY1wiLCBcIm5vcm1hbFwiLCBcInN0ZWVsXCIsIFwiZmlnaHRpbmdcIl0sXHJcbiAgICB3ZWF0aGVyOiBcIm5vbmVcIixcclxuICB9LFxyXG4gIG1vdW50YWluOiB7XHJcbiAgICBpZDogXCJtb3VudGFpblwiLFxyXG4gICAgbmFtZTogXCJNb3VudGFpblwiLFxyXG4gICAgZW52aXJvbm1lbnRDb2xvcjogMHhiMGM0ZGUsXHJcbiAgICB0aWxlU2V0OiB7IGdyb3VuZDogXCJ0aWxlc2hlZXRcIiwgb2JzdGFjbGU6IFwidGlsZXNoZWV0XCIgfSxcclxuICAgIHBva2Vtb25Qb29sOiBbXCJyb2NrXCIsIFwiZ3JvdW5kXCIsIFwiaWNlXCIsIFwiZHJhZ29uXCJdLFxyXG4gICAgd2VhdGhlcjogXCJzbm93XCIsXHJcbiAgfSxcclxuICBjYXZlOiB7XHJcbiAgICBpZDogXCJjYXZlXCIsXHJcbiAgICBuYW1lOiBcIkNhdmVcIixcclxuICAgIGVudmlyb25tZW50Q29sb3I6IDB4NDQ0NDQ0LFxyXG4gICAgdGlsZVNldDogeyBncm91bmQ6IFwidGlsZXNoZWV0XCIsIG9ic3RhY2xlOiBcInRpbGVzaGVldFwiIH0sXHJcbiAgICBwb2tlbW9uUG9vbDogW1wicm9ja1wiLCBcImdyb3VuZFwiLCBcInBvaXNvblwiLCBcImRhcmtcIl0sXHJcbiAgICB3ZWF0aGVyOiBcImZvZ1wiLFxyXG4gIH0sXHJcbiAgZm9yZXN0OiB7XHJcbiAgICBpZDogXCJmb3Jlc3RcIixcclxuICAgIG5hbWU6IFwiRm9yZXN0XCIsXHJcbiAgICBlbnZpcm9ubWVudENvbG9yOiAweDJmNmY0ZixcclxuICAgIHRpbGVTZXQ6IHsgZ3JvdW5kOiBcInRpbGVzaGVldFwiLCBvYnN0YWNsZTogXCJ0aWxlc2hlZXRcIiB9LFxyXG4gICAgcG9rZW1vblBvb2w6IFtcImdyYXNzXCIsIFwiYnVnXCIsIFwiZmFpcnlcIl0sXHJcbiAgICB3ZWF0aGVyOiBcImZvZ1wiLFxyXG4gIH0sXHJcbiAgc25vd2ZpZWxkOiB7XHJcbiAgICBpZDogXCJzbm93ZmllbGRcIixcclxuICAgIG5hbWU6IFwiU25vd2ZpZWxkXCIsXHJcbiAgICBlbnZpcm9ubWVudENvbG9yOiAweGUwZjdmZixcclxuICAgIHRpbGVTZXQ6IHsgZ3JvdW5kOiBcInRpbGVzaGVldFwiLCBvYnN0YWNsZTogXCJ0aWxlc2hlZXRcIiB9LFxyXG4gICAgcG9rZW1vblBvb2w6IFtcImljZVwiLCBcIndhdGVyXCJdLFxyXG4gICAgd2VhdGhlcjogXCJzbm93XCIsXHJcbiAgfSxcclxuICB0b3dlcjoge1xyXG4gICAgaWQ6IFwidG93ZXJcIixcclxuICAgIG5hbWU6IFwiQW5jaWVudCBUb3dlclwiLFxyXG4gICAgZW52aXJvbm1lbnRDb2xvcjogMHg1NTFhOGIsXHJcbiAgICB0aWxlU2V0OiB7IGdyb3VuZDogXCJ0aWxlc2hlZXRcIiwgb2JzdGFjbGU6IFwidGlsZXNoZWV0XCIgfSxcclxuICAgIHBva2Vtb25Qb29sOiBbXCJnaG9zdFwiLCBcImRhcmtcIl0sXHJcbiAgICB3ZWF0aGVyOiBcImZvZ1wiLFxyXG4gIH0sXHJcbiAgbGFiOiB7XHJcbiAgICBpZDogXCJsYWJcIixcclxuICAgIG5hbWU6IFwiUmVzZWFyY2ggTGFiXCIsXHJcbiAgICBlbnZpcm9ubWVudENvbG9yOiAweGNjY2NmZixcclxuICAgIHRpbGVTZXQ6IHsgZ3JvdW5kOiBcInRpbGVzaGVldFwiLCBvYnN0YWNsZTogXCJ0aWxlc2hlZXRcIiB9LFxyXG4gICAgcG9rZW1vblBvb2w6IFtcImVsZWN0cmljXCIsIFwic3RlZWxcIiwgXCJwc3ljaGljXCJdLFxyXG4gICAgd2VhdGhlcjogXCJub25lXCIsXHJcbiAgfSxcclxuICB0ZW1wbGU6IHtcclxuICAgIGlkOiBcInRlbXBsZVwiLFxyXG4gICAgbmFtZTogXCJEZXNlcnQgVGVtcGxlXCIsXHJcbiAgICBlbnZpcm9ubWVudENvbG9yOiAweGMyYjI4MCxcclxuICAgIHRpbGVTZXQ6IHsgZ3JvdW5kOiBcInRpbGVzaGVldFwiLCBvYnN0YWNsZTogXCJ0aWxlc2hlZXRcIiB9LFxyXG4gICAgcG9rZW1vblBvb2w6IFtcImdyb3VuZFwiLCBcInJvY2tcIiwgXCJmaXJlXCJdLFxyXG4gICAgd2VhdGhlcjogXCJzdW5cIixcclxuICB9LFxyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgU3RydWN0dXJlVHlwZSA9IFwiaG91c2VcIiB8IFwidG93ZXJcIiB8IFwibGFiXCIgfCBcInRlbXBsZVwiO1xyXG5leHBvcnQgaW50ZXJmYWNlIFN0cnVjdHVyZURlZiB7IGlkOiBzdHJpbmc7IHR5cGU6IFN0cnVjdHVyZVR5cGU7IGNvbDogbnVtYmVyOyByb3c6IG51bWJlcjsgeDogbnVtYmVyOyB5OiBudW1iZXI7IH1cclxuIl0sIm5hbWVzIjpbIkJJT01FUyIsImdyYXNzbGFuZCIsImlkIiwibmFtZSIsImVudmlyb25tZW50Q29sb3IiLCJ0aWxlU2V0IiwiZ3JvdW5kIiwib2JzdGFjbGUiLCJwb2tlbW9uUG9vbCIsIndlYXRoZXIiLCJkZXNlcnQiLCJsYWtlIiwiY2l0eSIsIm1vdW50YWluIiwiY2F2ZSIsImZvcmVzdCIsInNub3dmaWVsZCIsInRvd2VyIiwibGFiIiwidGVtcGxlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./lib/biomes.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./lib/mapZones.ts":
/*!*************************!*\
  !*** ./lib/mapZones.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BIOME_TYPE_POOLS: () => (/* binding */ BIOME_TYPE_POOLS),\n/* harmony export */   ZONE_TILES: () => (/* binding */ ZONE_TILES),\n/* harmony export */   generateZones: () => (/* binding */ generateZones),\n/* harmony export */   getAdjacentZoneCoords: () => (/* binding */ getAdjacentZoneCoords),\n/* harmony export */   getZoneForTile: () => (/* binding */ getZoneForTile)\n/* harmony export */ });\nconst ZONE_TILES = 10; // 10x10 tiles per zone\n// Simple deterministic biome layout over an R x C grid\nfunction generateZones(cols, rows) {\n    const zones = [];\n    for(let r = 0; r < rows; r++){\n        for(let c = 0; c < cols; c++){\n            let biome = \"grassland\";\n            const edge = r === 0 || c === 0 || r === rows - 1 || c === cols - 1;\n            if (r === 0) biome = \"mountain\"; // top ridge\n            else if (r === rows - 1) biome = \"beach\"; // bottom shore\n            else if ((r === Math.floor(rows / 2) || r === Math.floor(rows / 2) - 1) && (c === Math.floor(cols / 2) || c === Math.floor(cols / 2) - 1)) biome = \"lake\"; // 2x2 lake\n            else if (edge && (r === 1 || c === 1 || r === rows - 2 || c === cols - 2)) biome = \"cave\"; // near edges\n            else if ((r + c) % 9 === 0) biome = \"city\"; // a few city blocks\n            else if ((r + 2 * c) % 6 === 0) biome = \"forest\";\n            else if (r % 5 === 0 && c % 3 === 0) biome = \"desert\";\n            else if ((r - c) % 8 === 0) biome = \"snowfield\";\n            else biome = \"grassland\";\n            zones.push({\n                id: `${c},${r}`,\n                col: c,\n                row: r,\n                biome\n            });\n        }\n    }\n    return zones;\n}\nfunction getZoneForTile(tileX, tileY, zoneCols, zoneRows) {\n    const col = Math.max(0, Math.min(zoneCols - 1, Math.floor(tileX / ZONE_TILES)));\n    const row = Math.max(0, Math.min(zoneRows - 1, Math.floor(tileY / ZONE_TILES)));\n    return {\n        col,\n        row,\n        id: `${col},${row}`\n    };\n}\nfunction getAdjacentZoneCoords(col, row, zoneCols, zoneRows, radius = 1) {\n    const out = [];\n    for(let dy = -radius; dy <= radius; dy++){\n        for(let dx = -radius; dx <= radius; dx++){\n            const nc = col + dx;\n            const nr = row + dy;\n            if (nc < 0 || nr < 0 || nc >= zoneCols || nr >= zoneRows) continue;\n            out.push({\n                col: nc,\n                row: nr,\n                id: `${nc},${nr}`\n            });\n        }\n    }\n    return out;\n}\nconst BIOME_TYPE_POOLS = {\n    grassland: [\n        \"grass\",\n        \"bug\",\n        \"normal\",\n        \"flying\"\n    ],\n    cave: [\n        \"rock\",\n        \"ground\",\n        \"poison\",\n        \"dark\"\n    ],\n    beach: [\n        \"water\",\n        \"flying\"\n    ],\n    city: [\n        \"electric\",\n        \"normal\",\n        \"steel\",\n        \"fighting\"\n    ],\n    mountain: [\n        \"rock\",\n        \"ground\",\n        \"ice\",\n        \"dragon\"\n    ],\n    lake: [\n        \"water\",\n        \"dragon\",\n        \"fairy\"\n    ],\n    desert: [\n        \"ground\",\n        \"rock\",\n        \"fire\"\n    ],\n    forest: [\n        \"grass\",\n        \"bug\",\n        \"fairy\"\n    ],\n    snowfield: [\n        \"ice\",\n        \"water\",\n        \"fairy\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0lBQ0EsT0FBT0o7QUFDVDtBQUVPLE1BQU1LLG1CQUE0QztJQUN2REMsV0FBVztRQUFDO1FBQVM7UUFBTztRQUFVO0tBQVM7SUFDL0NDLE1BQU07UUFBQztRQUFRO1FBQVU7UUFBVTtLQUFPO0lBQzFDQyxPQUFPO1FBQUM7UUFBUztLQUFTO0lBQzFCQyxNQUFNO1FBQUM7UUFBWTtRQUFVO1FBQVM7S0FBVztJQUNqREMsVUFBVTtRQUFDO1FBQVE7UUFBVTtRQUFPO0tBQVM7SUFDN0NDLE1BQU07UUFBQztRQUFTO1FBQVU7S0FBUTtJQUNsQ0MsUUFBUTtRQUFDO1FBQVU7UUFBUTtLQUFPO0lBQ2xDQyxRQUFRO1FBQUM7UUFBUztRQUFPO0tBQVE7SUFDakNDLFdBQVc7UUFBQztRQUFPO1FBQVM7S0FBUTtBQUN0QyxFQUFFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFNhaGl0aFxcT25lRHJpdmVcXERlc2t0b3BcXHlva2FpaHVudFxcZnJvbnRlbmRcXGxpYlxcbWFwWm9uZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHR5cGUgQmlvbWUgPSBcImdyYXNzbGFuZFwiIHwgXCJjYXZlXCIgfCBcImJlYWNoXCIgfCBcImNpdHlcIiB8IFwibW91bnRhaW5cIiB8IFwibGFrZVwiIHwgXCJkZXNlcnRcIiB8IFwiZm9yZXN0XCIgfCBcInNub3dmaWVsZFwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IFpPTkVfVElMRVMgPSAxMDsgLy8gMTB4MTAgdGlsZXMgcGVyIHpvbmVcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgWm9uZSB7XHJcbiAgaWQ6IHN0cmluZzsgLy8gXCJjLHJcIlxyXG4gIGNvbDogbnVtYmVyO1xyXG4gIHJvdzogbnVtYmVyO1xyXG4gIGJpb21lOiBCaW9tZTtcclxufVxyXG5cclxuLy8gU2ltcGxlIGRldGVybWluaXN0aWMgYmlvbWUgbGF5b3V0IG92ZXIgYW4gUiB4IEMgZ3JpZFxyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVab25lcyhjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlcik6IFpvbmVbXSB7XHJcbiAgY29uc3Qgem9uZXM6IFpvbmVbXSA9IFtdO1xyXG4gIGZvciAobGV0IHIgPSAwOyByIDwgcm93czsgcisrKSB7XHJcbiAgICBmb3IgKGxldCBjID0gMDsgYyA8IGNvbHM7IGMrKykge1xyXG4gICAgICBsZXQgYmlvbWU6IEJpb21lID0gXCJncmFzc2xhbmRcIjtcclxuICAgICAgY29uc3QgZWRnZSA9IHIgPT09IDAgfHwgYyA9PT0gMCB8fCByID09PSByb3dzIC0gMSB8fCBjID09PSBjb2xzIC0gMTtcclxuICAgICAgaWYgKHIgPT09IDApIGJpb21lID0gXCJtb3VudGFpblwiOyAvLyB0b3AgcmlkZ2VcclxuICAgICAgZWxzZSBpZiAociA9PT0gcm93cyAtIDEpIGJpb21lID0gXCJiZWFjaFwiOyAvLyBib3R0b20gc2hvcmVcclxuICAgICAgZWxzZSBpZiAoKHIgPT09IE1hdGguZmxvb3Iocm93cyAvIDIpIHx8IHIgPT09IE1hdGguZmxvb3Iocm93cyAvIDIpIC0gMSkgJiZcclxuICAgICAgICAgICAgICAgKGMgPT09IE1hdGguZmxvb3IoY29scyAvIDIpIHx8IGMgPT09IE1hdGguZmxvb3IoY29scyAvIDIpIC0gMSkpIGJpb21lID0gXCJsYWtlXCI7IC8vIDJ4MiBsYWtlXHJcbiAgICAgIGVsc2UgaWYgKGVkZ2UgJiYgKHIgPT09IDEgfHwgYyA9PT0gMSB8fCByID09PSByb3dzIC0gMiB8fCBjID09PSBjb2xzIC0gMikpIGJpb21lID0gXCJjYXZlXCI7IC8vIG5lYXIgZWRnZXNcclxuICAgICAgZWxzZSBpZiAoKHIgKyBjKSAlIDkgPT09IDApIGJpb21lID0gXCJjaXR5XCI7IC8vIGEgZmV3IGNpdHkgYmxvY2tzXHJcbiAgICAgIGVsc2UgaWYgKChyICsgMiAqIGMpICUgNiA9PT0gMCkgYmlvbWUgPSBcImZvcmVzdFwiO1xyXG4gICAgICBlbHNlIGlmIChyICUgNSA9PT0gMCAmJiBjICUgMyA9PT0gMCkgYmlvbWUgPSBcImRlc2VydFwiO1xyXG4gICAgICBlbHNlIGlmICgociAtIGMpICUgOCA9PT0gMCkgYmlvbWUgPSBcInNub3dmaWVsZFwiO1xyXG4gICAgICBlbHNlIGJpb21lID0gXCJncmFzc2xhbmRcIjtcclxuXHJcbiAgICAgIHpvbmVzLnB1c2goeyBpZDogYCR7Y30sJHtyfWAsIGNvbDogYywgcm93OiByLCBiaW9tZSB9KTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHpvbmVzO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Wm9uZUZvclRpbGUodGlsZVg6IG51bWJlciwgdGlsZVk6IG51bWJlciwgem9uZUNvbHM6IG51bWJlciwgem9uZVJvd3M6IG51bWJlcik6IHsgY29sOiBudW1iZXI7IHJvdzogbnVtYmVyOyBpZDogc3RyaW5nIH0ge1xyXG4gIGNvbnN0IGNvbCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHpvbmVDb2xzIC0gMSwgTWF0aC5mbG9vcih0aWxlWCAvIFpPTkVfVElMRVMpKSk7XHJcbiAgY29uc3Qgcm93ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oem9uZVJvd3MgLSAxLCBNYXRoLmZsb29yKHRpbGVZIC8gWk9ORV9USUxFUykpKTtcclxuICByZXR1cm4geyBjb2wsIHJvdywgaWQ6IGAke2NvbH0sJHtyb3d9YCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWRqYWNlbnRab25lQ29vcmRzKGNvbDogbnVtYmVyLCByb3c6IG51bWJlciwgem9uZUNvbHM6IG51bWJlciwgem9uZVJvd3M6IG51bWJlciwgcmFkaXVzID0gMSkge1xyXG4gIGNvbnN0IG91dDogeyBjb2w6IG51bWJlcjsgcm93OiBudW1iZXI7IGlkOiBzdHJpbmcgfVtdID0gW107XHJcbiAgZm9yIChsZXQgZHkgPSAtcmFkaXVzOyBkeSA8PSByYWRpdXM7IGR5KyspIHtcclxuICAgIGZvciAobGV0IGR4ID0gLXJhZGl1czsgZHggPD0gcmFkaXVzOyBkeCsrKSB7XHJcbiAgICAgIGNvbnN0IG5jID0gY29sICsgZHg7IGNvbnN0IG5yID0gcm93ICsgZHk7XHJcbiAgICAgIGlmIChuYyA8IDAgfHwgbnIgPCAwIHx8IG5jID49IHpvbmVDb2xzIHx8IG5yID49IHpvbmVSb3dzKSBjb250aW51ZTtcclxuICAgICAgb3V0LnB1c2goeyBjb2w6IG5jLCByb3c6IG5yLCBpZDogYCR7bmN9LCR7bnJ9YCB9KTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG91dDtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IEJJT01FX1RZUEVfUE9PTFM6IFJlY29yZDxCaW9tZSwgc3RyaW5nW10+ID0ge1xyXG4gIGdyYXNzbGFuZDogW1wiZ3Jhc3NcIiwgXCJidWdcIiwgXCJub3JtYWxcIiwgXCJmbHlpbmdcIl0sXHJcbiAgY2F2ZTogW1wicm9ja1wiLCBcImdyb3VuZFwiLCBcInBvaXNvblwiLCBcImRhcmtcIl0sXHJcbiAgYmVhY2g6IFtcIndhdGVyXCIsIFwiZmx5aW5nXCJdLFxyXG4gIGNpdHk6IFtcImVsZWN0cmljXCIsIFwibm9ybWFsXCIsIFwic3RlZWxcIiwgXCJmaWdodGluZ1wiXSxcclxuICBtb3VudGFpbjogW1wicm9ja1wiLCBcImdyb3VuZFwiLCBcImljZVwiLCBcImRyYWdvblwiXSxcclxuICBsYWtlOiBbXCJ3YXRlclwiLCBcImRyYWdvblwiLCBcImZhaXJ5XCJdLFxyXG4gIGRlc2VydDogW1wiZ3JvdW5kXCIsIFwicm9ja1wiLCBcImZpcmVcIl0sXHJcbiAgZm9yZXN0OiBbXCJncmFzc1wiLCBcImJ1Z1wiLCBcImZhaXJ5XCJdLFxyXG4gIHNub3dmaWVsZDogW1wiaWNlXCIsIFwid2F0ZXJcIiwgXCJmYWlyeVwiXSxcclxufTtcclxuIl0sIm5hbWVzIjpbIlpPTkVfVElMRVMiLCJnZW5lcmF0ZVpvbmVzIiwiY29scyIsInJvd3MiLCJ6b25lcyIsInIiLCJjIiwiYmlvbWUiLCJlZGdlIiwiTWF0aCIsImZsb29yIiwicHVzaCIsImlkIiwiY29sIiwicm93IiwiZ2V0Wm9uZUZvclRpbGUiLCJ0aWxlWCIsInRpbGVZIiwiem9uZUNvbHMiLCJ6b25lUm93cyIsIm1heCIsIm1pbiIsImdldEFkamFjZW50Wm9uZUNvb3JkcyIsInJhZGl1cyIsIm91dCIsImR5IiwiZHgiLCJuYyIsIm5yIiwiQklPTUVfVFlQRV9QT09MUyIsImdyYXNzbGFuZCIsImNhdmUiLCJiZWFjaCIsImNpdHkiLCJtb3VudGFpbiIsImxha2UiLCJkZXNlcnQiLCJmb3Jlc3QiLCJzbm93ZmllbGQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./lib/mapZones.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./lib/phaser/BattleScene.ts":
/*!***********************************!*\
  !*** ./lib/phaser/BattleScene.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BattleScene: () => (/* binding */ BattleScene)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n\nclass BattleScene extends phaser__WEBPACK_IMPORTED_MODULE_0__.Scene {\n    constructor(){\n        super(\"BattleScene\"), this.wildHp = 0, this.wildMaxHp = 0, this.playerHp = 0, this.playerMaxHp = 0;\n    }\n    init(data) {\n        this.wildPokemon = data.wildPokemon;\n        this.playerPokemon = data.playerPokemon;\n        // Calculate HP from stats\n        const wildHpStat = this.wildPokemon.data?.stats?.find((s)=>s.stat.name === 'hp')?.base_stat || 50;\n        this.wildMaxHp = Math.floor(wildHpStat * 1.5); // Level scaling\n        this.wildHp = this.wildMaxHp;\n        this.playerMaxHp = this.playerPokemon.maxHp;\n        this.playerHp = this.playerPokemon.currentHp;\n    }\n    async preload() {\n        // Load Pokémon sprites if not already loaded\n        if (!this.textures.exists(`wild-${this.wildPokemon.pokeId}`)) {\n            await new Promise((resolve)=>{\n                this.load.once(phaser__WEBPACK_IMPORTED_MODULE_0__.Loader.Events.COMPLETE, ()=>resolve());\n                this.load.image(`wild-${this.wildPokemon.pokeId}`, this.wildPokemon.spriteUrl);\n                this.load.start();\n            });\n        }\n        if (!this.textures.exists(`player-${this.playerPokemon.pokeId}`)) {\n            await new Promise((resolve)=>{\n                this.load.once(phaser__WEBPACK_IMPORTED_MODULE_0__.Loader.Events.COMPLETE, ()=>resolve());\n                this.load.image(`player-${this.playerPokemon.pokeId}`, this.playerPokemon.spriteUrl);\n                this.load.start();\n            });\n        }\n    }\n    create() {\n        const { width, height } = this.scale;\n        // Background\n        this.add.rectangle(width / 2, height / 2, width, height, 0x87CEEB).setOrigin(0.5);\n        // Wild Pokémon (enemy, top right)\n        this.wildSprite = this.add.image(width * 0.75, height * 0.3, `wild-${this.wildPokemon.pokeId}`).setScale(2).setFlipX(false);\n        // Player Pokémon (bottom left, back sprite)\n        this.playerSprite = this.add.image(width * 0.25, height * 0.65, `player-${this.playerPokemon.pokeId}`).setScale(2).setFlipX(true);\n        this.createUI();\n        this.updateBattleText(`A wild ${this.capitalize(this.wildPokemon.name)} appeared!`);\n    }\n    createUI() {\n        const { width, height } = this.scale;\n        // Battle UI Container\n        this.battleUI = this.add.container(0, 0);\n        // Wild Pokémon HP Bar (top left)\n        const wildHpBg = this.add.rectangle(20, 20, 200, 20, 0x333333).setOrigin(0);\n        this.wildHpBar = this.add.rectangle(22, 22, 196, 16, 0x00ff00).setOrigin(0);\n        this.wildHpText = this.add.text(20, 45, `${this.capitalize(this.wildPokemon.name)} HP: ${this.wildHp}/${this.wildMaxHp}`, {\n            fontSize: '14px',\n            color: '#000'\n        });\n        // Player Pokémon HP Bar (bottom right)\n        const playerHpBg = this.add.rectangle(width - 220, height - 80, 200, 20, 0x333333).setOrigin(0);\n        this.playerHpBar = this.add.rectangle(width - 218, height - 78, 196, 16, 0x00ff00).setOrigin(0);\n        this.playerHpText = this.add.text(width - 220, height - 55, `${this.capitalize(this.playerPokemon.name)} Lv.${this.playerPokemon.level} HP: ${this.playerHp}/${this.playerMaxHp}`, {\n            fontSize: '14px',\n            color: '#000'\n        });\n        // Battle text area\n        const textBg = this.add.rectangle(20, height - 150, width - 40, 100, 0xffffff, 0.9).setOrigin(0);\n        this.battleText = this.add.text(30, height - 140, '', {\n            fontSize: '16px',\n            color: '#000',\n            wordWrap: {\n                width: width - 60\n            }\n        });\n        // Action buttons\n        this.createActionButtons();\n        this.battleUI.add([\n            wildHpBg,\n            this.wildHpBar,\n            this.wildHpText,\n            playerHpBg,\n            this.playerHpBar,\n            this.playerHpText,\n            textBg,\n            this.battleText\n        ]);\n    }\n    createActionButtons() {\n        const { width, height } = this.scale;\n        this.actionButtons = this.add.container(0, 0);\n        const buttonData = [\n            {\n                text: 'ATTACK',\n                x: width - 200,\n                y: height - 40,\n                action: ()=>this.playerAttack()\n            },\n            {\n                text: 'BAG',\n                x: width - 150,\n                y: height - 40,\n                action: ()=>this.openBag()\n            },\n            {\n                text: 'CATCH',\n                x: width - 100,\n                y: height - 40,\n                action: ()=>this.attemptCatch()\n            },\n            {\n                text: 'RUN',\n                x: width - 50,\n                y: height - 40,\n                action: ()=>this.runAway()\n            }\n        ];\n        buttonData.forEach((btn)=>{\n            const button = this.add.text(btn.x, btn.y, btn.text, {\n                fontSize: '14px',\n                color: '#fff',\n                backgroundColor: '#333',\n                padding: {\n                    x: 8,\n                    y: 4\n                }\n            }).setInteractive({\n                useHandCursor: true\n            }).on('pointerdown', btn.action);\n            this.actionButtons?.add(button);\n        });\n        if (this.actionButtons) this.battleUI?.add(this.actionButtons);\n    }\n    playerAttack() {\n        const playerAttack = this.getStatValue(this.playerPokemon.data, 'attack');\n        const wildDefense = this.getStatValue(this.wildPokemon.data, 'defense');\n        const baseDamage = Math.max(1, playerAttack - wildDefense);\n        const damage = Math.floor(baseDamage * (0.8 + Math.random() * 0.4)); // 0.8-1.2 multiplier\n        this.wildHp = Math.max(0, this.wildHp - damage);\n        this.updateBattleText(`${this.capitalize(this.playerPokemon.name)} attacks! Dealt ${damage} damage!`);\n        this.updateHpBars();\n        if (this.wildHp <= 0) {\n            this.wildDefeated();\n        } else {\n            this.time.delayedCall(1500, ()=>this.wildAttack());\n        }\n    }\n    wildAttack() {\n        const wildAttack = this.getStatValue(this.wildPokemon.data, 'attack');\n        const playerDefense = this.getStatValue(this.playerPokemon.data, 'defense');\n        const baseDamage = Math.max(1, wildAttack - playerDefense);\n        const damage = Math.floor(baseDamage * (0.8 + Math.random() * 0.4));\n        this.playerHp = Math.max(0, this.playerHp - damage);\n        this.updateBattleText(`Wild ${this.capitalize(this.wildPokemon.name)} attacks! Dealt ${damage} damage!`);\n        this.updateHpBars();\n        if (this.playerHp <= 0) {\n            this.playerDefeated();\n        }\n    }\n    attemptCatch() {\n        const catchRate = this.wildHp < this.wildMaxHp * 0.2 ? 0.8 : 0.3; // Higher rate if HP < 20%\n        if (Math.random() < catchRate) {\n            this.updateBattleText(`Gotcha! ${this.capitalize(this.wildPokemon.name)} was caught!`);\n            this.time.delayedCall(2000, ()=>this.endBattle(true));\n        } else {\n            this.updateBattleText(`${this.capitalize(this.wildPokemon.name)} broke free!`);\n            this.time.delayedCall(1500, ()=>this.wildAttack());\n        }\n    }\n    openBag() {\n        this.updateBattleText(\"You rummage through your bag...\");\n        // TODO: Implement bag/item usage\n        this.time.delayedCall(1000, ()=>this.wildAttack());\n    }\n    runAway() {\n        this.updateBattleText(\"You ran away safely!\");\n        this.time.delayedCall(1500, ()=>this.endBattle(false));\n    }\n    wildDefeated() {\n        const expGained = Math.floor(this.getStatValue(this.wildPokemon.data, 'attack') * 1.5);\n        this.updateBattleText(`Wild ${this.capitalize(this.wildPokemon.name)} fainted! ${this.capitalize(this.playerPokemon.name)} gained ${expGained} EXP!`);\n        this.time.delayedCall(3000, ()=>this.endBattle(true));\n    }\n    playerDefeated() {\n        this.updateBattleText(`${this.capitalize(this.playerPokemon.name)} fainted! You lost the battle!`);\n        this.time.delayedCall(3000, ()=>this.endBattle(false));\n    }\n    endBattle(victory) {\n        // Return to GameScene\n        this.scene.start(\"GameScene\");\n    }\n    updateHpBars() {\n        if (this.wildHpBar && this.wildHpText) {\n            const wildHpPercent = this.wildHp / this.wildMaxHp;\n            this.wildHpBar.width = 196 * wildHpPercent;\n            this.wildHpBar.fillColor = wildHpPercent > 0.5 ? 0x00ff00 : wildHpPercent > 0.2 ? 0xffff00 : 0xff0000;\n            this.wildHpText.setText(`${this.capitalize(this.wildPokemon.name)} HP: ${this.wildHp}/${this.wildMaxHp}`);\n        }\n        if (this.playerHpBar && this.playerHpText) {\n            const playerHpPercent = this.playerHp / this.playerMaxHp;\n            this.playerHpBar.width = 196 * playerHpPercent;\n            this.playerHpBar.fillColor = playerHpPercent > 0.5 ? 0x00ff00 : playerHpPercent > 0.2 ? 0xffff00 : 0xff0000;\n            this.playerHpText.setText(`${this.capitalize(this.playerPokemon.name)} Lv.${this.playerPokemon.level} HP: ${this.playerHp}/${this.playerMaxHp}`);\n        }\n    }\n    updateBattleText(text) {\n        if (this.battleText) {\n            this.battleText.setText(text);\n        }\n    }\n    getStatValue(pokemonData, statName) {\n        const stat = pokemonData?.stats?.find((s)=>s.stat.name === statName);\n        return stat?.base_stat || 50;\n    }\n    capitalize(str) {\n        return str.charAt(0).toUpperCase() + str.slice(1);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2xpYi9waGFzZXIvQmF0dGxlU2NlbmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlDO0FBb0IxQixNQUFNQyxvQkFBb0JELHlDQUFZO0lBbUIzQyxhQUFjO1FBQ1osS0FBSyxDQUFDLHFCQWZBRyxTQUFpQixRQUNqQkMsWUFBb0IsUUFDcEJDLFdBQW1CLFFBQ25CQyxjQUFzQjtJQWE5QjtJQUVBQyxLQUFLQyxJQUFnQixFQUFFO1FBQ3JCLElBQUksQ0FBQ0MsV0FBVyxHQUFHRCxLQUFLQyxXQUFXO1FBQ25DLElBQUksQ0FBQ0MsYUFBYSxHQUFHRixLQUFLRSxhQUFhO1FBRXZDLDBCQUEwQjtRQUMxQixNQUFNQyxhQUFhLElBQUksQ0FBQ0YsV0FBVyxDQUFDRCxJQUFJLEVBQUVJLE9BQU9DLEtBQUssQ0FBQ0MsSUFBV0EsRUFBRUMsSUFBSSxDQUFDQyxJQUFJLEtBQUssT0FBT0MsYUFBYTtRQUN0RyxJQUFJLENBQUNiLFNBQVMsR0FBR2MsS0FBS0MsS0FBSyxDQUFDUixhQUFhLE1BQU0sZ0JBQWdCO1FBQy9ELElBQUksQ0FBQ1IsTUFBTSxHQUFHLElBQUksQ0FBQ0MsU0FBUztRQUU1QixJQUFJLENBQUNFLFdBQVcsR0FBRyxJQUFJLENBQUNJLGFBQWEsQ0FBQ1UsS0FBSztRQUMzQyxJQUFJLENBQUNmLFFBQVEsR0FBRyxJQUFJLENBQUNLLGFBQWEsQ0FBQ1csU0FBUztJQUM5QztJQUVBLE1BQU1DLFVBQVU7UUFDZCw2Q0FBNkM7UUFDN0MsSUFBSSxDQUFDLElBQUksQ0FBQ0MsUUFBUSxDQUFDQyxNQUFNLENBQUMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDZixXQUFXLENBQUNnQixNQUFNLEVBQUUsR0FBRztZQUM1RCxNQUFNLElBQUlDLFFBQWMsQ0FBQ0M7Z0JBQ3ZCLElBQUksQ0FBQ0MsSUFBSSxDQUFDQyxJQUFJLENBQUM3QiwwQ0FBYSxDQUFDK0IsTUFBTSxDQUFDQyxRQUFRLEVBQUUsSUFBTUw7Z0JBQ3BELElBQUksQ0FBQ0MsSUFBSSxDQUFDSyxLQUFLLENBQUMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDeEIsV0FBVyxDQUFDZ0IsTUFBTSxFQUFFLEVBQUUsSUFBSSxDQUFDaEIsV0FBVyxDQUFDeUIsU0FBUztnQkFDN0UsSUFBSSxDQUFDTixJQUFJLENBQUNPLEtBQUs7WUFDakI7UUFDRjtRQUVBLElBQUksQ0FBQyxJQUFJLENBQUNaLFFBQVEsQ0FBQ0MsTUFBTSxDQUFDLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQ2QsYUFBYSxDQUFDZSxNQUFNLEVBQUUsR0FBRztZQUNoRSxNQUFNLElBQUlDLFFBQWMsQ0FBQ0M7Z0JBQ3ZCLElBQUksQ0FBQ0MsSUFBSSxDQUFDQyxJQUFJLENBQUM3QiwwQ0FBYSxDQUFDK0IsTUFBTSxDQUFDQyxRQUFRLEVBQUUsSUFBTUw7Z0JBQ3BELElBQUksQ0FBQ0MsSUFBSSxDQUFDSyxLQUFLLENBQUMsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDdkIsYUFBYSxDQUFDZSxNQUFNLEVBQUUsRUFBRSxJQUFJLENBQUNmLGFBQWEsQ0FBQ3dCLFNBQVM7Z0JBQ25GLElBQUksQ0FBQ04sSUFBSSxDQUFDTyxLQUFLO1lBQ2pCO1FBQ0Y7SUFDRjtJQUVBQyxTQUFTO1FBQ1AsTUFBTSxFQUFFQyxLQUFLLEVBQUVDLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQ0MsS0FBSztRQUVwQyxhQUFhO1FBQ2IsSUFBSSxDQUFDQyxHQUFHLENBQUNDLFNBQVMsQ0FBQ0osUUFBUSxHQUFHQyxTQUFTLEdBQUdELE9BQU9DLFFBQVEsVUFBVUksU0FBUyxDQUFDO1FBRTdFLGtDQUFrQztRQUNsQyxJQUFJLENBQUNDLFVBQVUsR0FBRyxJQUFJLENBQUNILEdBQUcsQ0FBQ1AsS0FBSyxDQUFDSSxRQUFRLE1BQU1DLFNBQVMsS0FBSyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUM3QixXQUFXLENBQUNnQixNQUFNLEVBQUUsRUFDM0ZtQixRQUFRLENBQUMsR0FDVEMsUUFBUSxDQUFDO1FBRVosNENBQTRDO1FBQzVDLElBQUksQ0FBQ0MsWUFBWSxHQUFHLElBQUksQ0FBQ04sR0FBRyxDQUFDUCxLQUFLLENBQUNJLFFBQVEsTUFBTUMsU0FBUyxNQUFNLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQzVCLGFBQWEsQ0FBQ2UsTUFBTSxFQUFFLEVBQ2xHbUIsUUFBUSxDQUFDLEdBQ1RDLFFBQVEsQ0FBQztRQUVaLElBQUksQ0FBQ0UsUUFBUTtRQUNiLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUMsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDQyxVQUFVLENBQUMsSUFBSSxDQUFDeEMsV0FBVyxDQUFDTyxJQUFJLEVBQUUsVUFBVSxDQUFDO0lBQ3BGO0lBRVErQixXQUFXO1FBQ2pCLE1BQU0sRUFBRVYsS0FBSyxFQUFFQyxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUNDLEtBQUs7UUFFcEMsc0JBQXNCO1FBQ3RCLElBQUksQ0FBQ1csUUFBUSxHQUFHLElBQUksQ0FBQ1YsR0FBRyxDQUFDVyxTQUFTLENBQUMsR0FBRztRQUV0QyxpQ0FBaUM7UUFDakMsTUFBTUMsV0FBVyxJQUFJLENBQUNaLEdBQUcsQ0FBQ0MsU0FBUyxDQUFDLElBQUksSUFBSSxLQUFLLElBQUksVUFBVUMsU0FBUyxDQUFDO1FBQ3pFLElBQUksQ0FBQ1csU0FBUyxHQUFHLElBQUksQ0FBQ2IsR0FBRyxDQUFDQyxTQUFTLENBQUMsSUFBSSxJQUFJLEtBQUssSUFBSSxVQUFVQyxTQUFTLENBQUM7UUFDekUsSUFBSSxDQUFDWSxVQUFVLEdBQUcsSUFBSSxDQUFDZCxHQUFHLENBQUNlLElBQUksQ0FBQyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUNOLFVBQVUsQ0FBQyxJQUFJLENBQUN4QyxXQUFXLENBQUNPLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDYixNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQ0MsU0FBUyxFQUFFLEVBQUU7WUFDeEhvRCxVQUFVO1lBQ1ZDLE9BQU87UUFDVDtRQUVBLHVDQUF1QztRQUN2QyxNQUFNQyxhQUFhLElBQUksQ0FBQ2xCLEdBQUcsQ0FBQ0MsU0FBUyxDQUFDSixRQUFRLEtBQUtDLFNBQVMsSUFBSSxLQUFLLElBQUksVUFBVUksU0FBUyxDQUFDO1FBQzdGLElBQUksQ0FBQ2lCLFdBQVcsR0FBRyxJQUFJLENBQUNuQixHQUFHLENBQUNDLFNBQVMsQ0FBQ0osUUFBUSxLQUFLQyxTQUFTLElBQUksS0FBSyxJQUFJLFVBQVVJLFNBQVMsQ0FBQztRQUM3RixJQUFJLENBQUNrQixZQUFZLEdBQUcsSUFBSSxDQUFDcEIsR0FBRyxDQUFDZSxJQUFJLENBQUNsQixRQUFRLEtBQUtDLFNBQVMsSUFBSSxHQUFHLElBQUksQ0FBQ1csVUFBVSxDQUFDLElBQUksQ0FBQ3ZDLGFBQWEsQ0FBQ00sSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUNOLGFBQWEsQ0FBQ21ELEtBQUssQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDeEQsUUFBUSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUNDLFdBQVcsRUFBRSxFQUFFO1lBQ2pMa0QsVUFBVTtZQUNWQyxPQUFPO1FBQ1Q7UUFFQSxtQkFBbUI7UUFDbkIsTUFBTUssU0FBUyxJQUFJLENBQUN0QixHQUFHLENBQUNDLFNBQVMsQ0FBQyxJQUFJSCxTQUFTLEtBQUtELFFBQVEsSUFBSSxLQUFLLFVBQVUsS0FBS0ssU0FBUyxDQUFDO1FBQzlGLElBQUksQ0FBQ3FCLFVBQVUsR0FBRyxJQUFJLENBQUN2QixHQUFHLENBQUNlLElBQUksQ0FBQyxJQUFJakIsU0FBUyxLQUFLLElBQUk7WUFDcERrQixVQUFVO1lBQ1ZDLE9BQU87WUFDUE8sVUFBVTtnQkFBRTNCLE9BQU9BLFFBQVE7WUFBRztRQUNoQztRQUVBLGlCQUFpQjtRQUNqQixJQUFJLENBQUM0QixtQkFBbUI7UUFFeEIsSUFBSSxDQUFDZixRQUFRLENBQUNWLEdBQUcsQ0FBQztZQUFDWTtZQUFVLElBQUksQ0FBQ0MsU0FBUztZQUFFLElBQUksQ0FBQ0MsVUFBVTtZQUFFSTtZQUFZLElBQUksQ0FBQ0MsV0FBVztZQUFFLElBQUksQ0FBQ0MsWUFBWTtZQUFFRTtZQUFRLElBQUksQ0FBQ0MsVUFBVTtTQUFDO0lBQ3pJO0lBRVFFLHNCQUFzQjtRQUM1QixNQUFNLEVBQUU1QixLQUFLLEVBQUVDLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQ0MsS0FBSztRQUVwQyxJQUFJLENBQUMyQixhQUFhLEdBQUcsSUFBSSxDQUFDMUIsR0FBRyxDQUFDVyxTQUFTLENBQUMsR0FBRztRQUUzQyxNQUFNZ0IsYUFBYTtZQUNqQjtnQkFBRVosTUFBTTtnQkFBVWEsR0FBRy9CLFFBQVE7Z0JBQUtnQyxHQUFHL0IsU0FBUztnQkFBSWdDLFFBQVEsSUFBTSxJQUFJLENBQUNDLFlBQVk7WUFBRztZQUNwRjtnQkFBRWhCLE1BQU07Z0JBQU9hLEdBQUcvQixRQUFRO2dCQUFLZ0MsR0FBRy9CLFNBQVM7Z0JBQUlnQyxRQUFRLElBQU0sSUFBSSxDQUFDRSxPQUFPO1lBQUc7WUFDNUU7Z0JBQUVqQixNQUFNO2dCQUFTYSxHQUFHL0IsUUFBUTtnQkFBS2dDLEdBQUcvQixTQUFTO2dCQUFJZ0MsUUFBUSxJQUFNLElBQUksQ0FBQ0csWUFBWTtZQUFHO1lBQ25GO2dCQUFFbEIsTUFBTTtnQkFBT2EsR0FBRy9CLFFBQVE7Z0JBQUlnQyxHQUFHL0IsU0FBUztnQkFBSWdDLFFBQVEsSUFBTSxJQUFJLENBQUNJLE9BQU87WUFBRztTQUM1RTtRQUVEUCxXQUFXUSxPQUFPLENBQUNDLENBQUFBO1lBQ2pCLE1BQU1DLFNBQVMsSUFBSSxDQUFDckMsR0FBRyxDQUFDZSxJQUFJLENBQUNxQixJQUFJUixDQUFDLEVBQUVRLElBQUlQLENBQUMsRUFBRU8sSUFBSXJCLElBQUksRUFBRTtnQkFDbkRDLFVBQVU7Z0JBQ1ZDLE9BQU87Z0JBQ1BxQixpQkFBaUI7Z0JBQ2pCQyxTQUFTO29CQUFFWCxHQUFHO29CQUFHQyxHQUFHO2dCQUFFO1lBQ3hCLEdBQUdXLGNBQWMsQ0FBQztnQkFBRUMsZUFBZTtZQUFLLEdBQ3JDQyxFQUFFLENBQUMsZUFBZU4sSUFBSU4sTUFBTTtZQUUvQixJQUFJLENBQUNKLGFBQWEsRUFBRTFCLElBQUlxQztRQUMxQjtRQUVBLElBQUksSUFBSSxDQUFDWCxhQUFhLEVBQUUsSUFBSSxDQUFDaEIsUUFBUSxFQUFFVixJQUFJLElBQUksQ0FBQzBCLGFBQWE7SUFDL0Q7SUFFUUssZUFBZTtRQUNyQixNQUFNQSxlQUFlLElBQUksQ0FBQ1ksWUFBWSxDQUFDLElBQUksQ0FBQ3pFLGFBQWEsQ0FBQ0YsSUFBSSxFQUFFO1FBQ2hFLE1BQU00RSxjQUFjLElBQUksQ0FBQ0QsWUFBWSxDQUFDLElBQUksQ0FBQzFFLFdBQVcsQ0FBQ0QsSUFBSSxFQUFFO1FBRTdELE1BQU02RSxhQUFhbkUsS0FBS29FLEdBQUcsQ0FBQyxHQUFHZixlQUFlYTtRQUM5QyxNQUFNRyxTQUFTckUsS0FBS0MsS0FBSyxDQUFDa0UsYUFBYyxPQUFNbkUsS0FBS3NFLE1BQU0sS0FBSyxHQUFFLElBQUsscUJBQXFCO1FBRTFGLElBQUksQ0FBQ3JGLE1BQU0sR0FBR2UsS0FBS29FLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQ25GLE1BQU0sR0FBR29GO1FBQ3hDLElBQUksQ0FBQ3ZDLGdCQUFnQixDQUFDLEdBQUcsSUFBSSxDQUFDQyxVQUFVLENBQUMsSUFBSSxDQUFDdkMsYUFBYSxDQUFDTSxJQUFJLEVBQUUsZ0JBQWdCLEVBQUV1RSxPQUFPLFFBQVEsQ0FBQztRQUVwRyxJQUFJLENBQUNFLFlBQVk7UUFFakIsSUFBSSxJQUFJLENBQUN0RixNQUFNLElBQUksR0FBRztZQUNwQixJQUFJLENBQUN1RixZQUFZO1FBQ25CLE9BQU87WUFDTCxJQUFJLENBQUNDLElBQUksQ0FBQ0MsV0FBVyxDQUFDLE1BQU0sSUFBTSxJQUFJLENBQUNDLFVBQVU7UUFDbkQ7SUFDRjtJQUVRQSxhQUFhO1FBQ25CLE1BQU1BLGFBQWEsSUFBSSxDQUFDVixZQUFZLENBQUMsSUFBSSxDQUFDMUUsV0FBVyxDQUFDRCxJQUFJLEVBQUU7UUFDNUQsTUFBTXNGLGdCQUFnQixJQUFJLENBQUNYLFlBQVksQ0FBQyxJQUFJLENBQUN6RSxhQUFhLENBQUNGLElBQUksRUFBRTtRQUVqRSxNQUFNNkUsYUFBYW5FLEtBQUtvRSxHQUFHLENBQUMsR0FBR08sYUFBYUM7UUFDNUMsTUFBTVAsU0FBU3JFLEtBQUtDLEtBQUssQ0FBQ2tFLGFBQWMsT0FBTW5FLEtBQUtzRSxNQUFNLEtBQUssR0FBRTtRQUVoRSxJQUFJLENBQUNuRixRQUFRLEdBQUdhLEtBQUtvRSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUNqRixRQUFRLEdBQUdrRjtRQUM1QyxJQUFJLENBQUN2QyxnQkFBZ0IsQ0FBQyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUNDLFVBQVUsQ0FBQyxJQUFJLENBQUN4QyxXQUFXLENBQUNPLElBQUksRUFBRSxnQkFBZ0IsRUFBRXVFLE9BQU8sUUFBUSxDQUFDO1FBRXZHLElBQUksQ0FBQ0UsWUFBWTtRQUVqQixJQUFJLElBQUksQ0FBQ3BGLFFBQVEsSUFBSSxHQUFHO1lBQ3RCLElBQUksQ0FBQzBGLGNBQWM7UUFDckI7SUFDRjtJQUVRdEIsZUFBZTtRQUNyQixNQUFNdUIsWUFBWSxJQUFJLENBQUM3RixNQUFNLEdBQUksSUFBSSxDQUFDQyxTQUFTLEdBQUcsTUFBTyxNQUFNLEtBQUssMEJBQTBCO1FBRTlGLElBQUljLEtBQUtzRSxNQUFNLEtBQUtRLFdBQVc7WUFDN0IsSUFBSSxDQUFDaEQsZ0JBQWdCLENBQUMsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDQyxVQUFVLENBQUMsSUFBSSxDQUFDeEMsV0FBVyxDQUFDTyxJQUFJLEVBQUUsWUFBWSxDQUFDO1lBQ3JGLElBQUksQ0FBQzJFLElBQUksQ0FBQ0MsV0FBVyxDQUFDLE1BQU0sSUFBTSxJQUFJLENBQUNLLFNBQVMsQ0FBQztRQUNuRCxPQUFPO1lBQ0wsSUFBSSxDQUFDakQsZ0JBQWdCLENBQUMsR0FBRyxJQUFJLENBQUNDLFVBQVUsQ0FBQyxJQUFJLENBQUN4QyxXQUFXLENBQUNPLElBQUksRUFBRSxZQUFZLENBQUM7WUFDN0UsSUFBSSxDQUFDMkUsSUFBSSxDQUFDQyxXQUFXLENBQUMsTUFBTSxJQUFNLElBQUksQ0FBQ0MsVUFBVTtRQUNuRDtJQUNGO0lBRVFyQixVQUFVO1FBQ2hCLElBQUksQ0FBQ3hCLGdCQUFnQixDQUFDO1FBQ3RCLGlDQUFpQztRQUNqQyxJQUFJLENBQUMyQyxJQUFJLENBQUNDLFdBQVcsQ0FBQyxNQUFNLElBQU0sSUFBSSxDQUFDQyxVQUFVO0lBQ25EO0lBRVFuQixVQUFVO1FBQ2hCLElBQUksQ0FBQzFCLGdCQUFnQixDQUFDO1FBQ3RCLElBQUksQ0FBQzJDLElBQUksQ0FBQ0MsV0FBVyxDQUFDLE1BQU0sSUFBTSxJQUFJLENBQUNLLFNBQVMsQ0FBQztJQUNuRDtJQUVRUCxlQUFlO1FBQ3JCLE1BQU1RLFlBQVloRixLQUFLQyxLQUFLLENBQUMsSUFBSSxDQUFDZ0UsWUFBWSxDQUFDLElBQUksQ0FBQzFFLFdBQVcsQ0FBQ0QsSUFBSSxFQUFFLFlBQVk7UUFDbEYsSUFBSSxDQUFDd0MsZ0JBQWdCLENBQUMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDQyxVQUFVLENBQUMsSUFBSSxDQUFDeEMsV0FBVyxDQUFDTyxJQUFJLEVBQUUsVUFBVSxFQUFFLElBQUksQ0FBQ2lDLFVBQVUsQ0FBQyxJQUFJLENBQUN2QyxhQUFhLENBQUNNLElBQUksRUFBRSxRQUFRLEVBQUVrRixVQUFVLEtBQUssQ0FBQztRQUNwSixJQUFJLENBQUNQLElBQUksQ0FBQ0MsV0FBVyxDQUFDLE1BQU0sSUFBTSxJQUFJLENBQUNLLFNBQVMsQ0FBQztJQUNuRDtJQUVRRixpQkFBaUI7UUFDdkIsSUFBSSxDQUFDL0MsZ0JBQWdCLENBQUMsR0FBRyxJQUFJLENBQUNDLFVBQVUsQ0FBQyxJQUFJLENBQUN2QyxhQUFhLENBQUNNLElBQUksRUFBRSw4QkFBOEIsQ0FBQztRQUNqRyxJQUFJLENBQUMyRSxJQUFJLENBQUNDLFdBQVcsQ0FBQyxNQUFNLElBQU0sSUFBSSxDQUFDSyxTQUFTLENBQUM7SUFDbkQ7SUFFUUEsVUFBVUUsT0FBZ0IsRUFBRTtRQUNsQyxzQkFBc0I7UUFDdEIsSUFBSSxDQUFDQyxLQUFLLENBQUNqRSxLQUFLLENBQUM7SUFDbkI7SUFFUXNELGVBQWU7UUFDckIsSUFBSSxJQUFJLENBQUNwQyxTQUFTLElBQUksSUFBSSxDQUFDQyxVQUFVLEVBQUU7WUFDckMsTUFBTStDLGdCQUFnQixJQUFJLENBQUNsRyxNQUFNLEdBQUcsSUFBSSxDQUFDQyxTQUFTO1lBQ2xELElBQUksQ0FBQ2lELFNBQVMsQ0FBQ2hCLEtBQUssR0FBRyxNQUFNZ0U7WUFDN0IsSUFBSSxDQUFDaEQsU0FBUyxDQUFDaUQsU0FBUyxHQUFHRCxnQkFBZ0IsTUFBTSxXQUFXQSxnQkFBZ0IsTUFBTSxXQUFXO1lBQzdGLElBQUksQ0FBQy9DLFVBQVUsQ0FBQ2lELE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQ3RELFVBQVUsQ0FBQyxJQUFJLENBQUN4QyxXQUFXLENBQUNPLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDYixNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQ0MsU0FBUyxFQUFFO1FBQzFHO1FBRUEsSUFBSSxJQUFJLENBQUN1RCxXQUFXLElBQUksSUFBSSxDQUFDQyxZQUFZLEVBQUU7WUFDekMsTUFBTTRDLGtCQUFrQixJQUFJLENBQUNuRyxRQUFRLEdBQUcsSUFBSSxDQUFDQyxXQUFXO1lBQ3hELElBQUksQ0FBQ3FELFdBQVcsQ0FBQ3RCLEtBQUssR0FBRyxNQUFNbUU7WUFDL0IsSUFBSSxDQUFDN0MsV0FBVyxDQUFDMkMsU0FBUyxHQUFHRSxrQkFBa0IsTUFBTSxXQUFXQSxrQkFBa0IsTUFBTSxXQUFXO1lBQ25HLElBQUksQ0FBQzVDLFlBQVksQ0FBQzJDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQ3RELFVBQVUsQ0FBQyxJQUFJLENBQUN2QyxhQUFhLENBQUNNLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDTixhQUFhLENBQUNtRCxLQUFLLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQ3hELFFBQVEsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDQyxXQUFXLEVBQUU7UUFDako7SUFDRjtJQUVRMEMsaUJBQWlCTyxJQUFZLEVBQUU7UUFDckMsSUFBSSxJQUFJLENBQUNRLFVBQVUsRUFBRTtZQUNuQixJQUFJLENBQUNBLFVBQVUsQ0FBQ3dDLE9BQU8sQ0FBQ2hEO1FBQzFCO0lBQ0Y7SUFFUTRCLGFBQWFzQixXQUFnQixFQUFFQyxRQUFnQixFQUFVO1FBQy9ELE1BQU0zRixPQUFPMEYsYUFBYTdGLE9BQU9DLEtBQUssQ0FBQ0MsSUFBV0EsRUFBRUMsSUFBSSxDQUFDQyxJQUFJLEtBQUswRjtRQUNsRSxPQUFPM0YsTUFBTUUsYUFBYTtJQUM1QjtJQUVRZ0MsV0FBVzBELEdBQVcsRUFBVTtRQUN0QyxPQUFPQSxJQUFJQyxNQUFNLENBQUMsR0FBR0MsV0FBVyxLQUFLRixJQUFJRyxLQUFLLENBQUM7SUFDakQ7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxTYWhpdGhcXE9uZURyaXZlXFxEZXNrdG9wXFx5b2thaWh1bnRcXGZyb250ZW5kXFxsaWJcXHBoYXNlclxcQmF0dGxlU2NlbmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUGhhc2VyIGZyb20gXCJwaGFzZXJcIjtcclxuXHJcbmludGVyZmFjZSBCYXR0bGVEYXRhIHtcclxuICB3aWxkUG9rZW1vbjoge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgcG9rZUlkOiBudW1iZXI7XHJcbiAgICBkYXRhOiBhbnk7XHJcbiAgICBzcHJpdGVVcmw6IHN0cmluZztcclxuICB9O1xyXG4gIHBsYXllclBva2Vtb246IHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHBva2VJZDogbnVtYmVyO1xyXG4gICAgZGF0YTogYW55O1xyXG4gICAgc3ByaXRlVXJsOiBzdHJpbmc7XHJcbiAgICBsZXZlbDogbnVtYmVyO1xyXG4gICAgY3VycmVudEhwOiBudW1iZXI7XHJcbiAgICBtYXhIcDogbnVtYmVyO1xyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBCYXR0bGVTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcbiAgcHJpdmF0ZSB3aWxkUG9rZW1vbiE6IEJhdHRsZURhdGFbXCJ3aWxkUG9rZW1vblwiXTtcclxuICBwcml2YXRlIHBsYXllclBva2Vtb24hOiBCYXR0bGVEYXRhW1wicGxheWVyUG9rZW1vblwiXTtcclxuICBwcml2YXRlIHdpbGRTcHJpdGU/OiBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2U7XHJcbiAgcHJpdmF0ZSBwbGF5ZXJTcHJpdGU/OiBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2U7XHJcbiAgcHJpdmF0ZSB3aWxkSHA6IG51bWJlciA9IDA7XHJcbiAgcHJpdmF0ZSB3aWxkTWF4SHA6IG51bWJlciA9IDA7XHJcbiAgcHJpdmF0ZSBwbGF5ZXJIcDogbnVtYmVyID0gMDtcclxuICBwcml2YXRlIHBsYXllck1heEhwOiBudW1iZXIgPSAwO1xyXG4gIFxyXG4gIC8vIFVJIEVsZW1lbnRzXHJcbiAgcHJpdmF0ZSBiYXR0bGVVST86IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXI7XHJcbiAgcHJpdmF0ZSB3aWxkSHBCYXI/OiBQaGFzZXIuR2FtZU9iamVjdHMuUmVjdGFuZ2xlO1xyXG4gIHByaXZhdGUgcGxheWVySHBCYXI/OiBQaGFzZXIuR2FtZU9iamVjdHMuUmVjdGFuZ2xlO1xyXG4gIHByaXZhdGUgd2lsZEhwVGV4dD86IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xyXG4gIHByaXZhdGUgcGxheWVySHBUZXh0PzogUGhhc2VyLkdhbWVPYmplY3RzLlRleHQ7XHJcbiAgcHJpdmF0ZSBiYXR0bGVUZXh0PzogUGhhc2VyLkdhbWVPYmplY3RzLlRleHQ7XHJcbiAgcHJpdmF0ZSBhY3Rpb25CdXR0b25zPzogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcihcIkJhdHRsZVNjZW5lXCIpO1xyXG4gIH1cclxuXHJcbiAgaW5pdChkYXRhOiBCYXR0bGVEYXRhKSB7XHJcbiAgICB0aGlzLndpbGRQb2tlbW9uID0gZGF0YS53aWxkUG9rZW1vbjtcclxuICAgIHRoaXMucGxheWVyUG9rZW1vbiA9IGRhdGEucGxheWVyUG9rZW1vbjtcclxuICAgIFxyXG4gICAgLy8gQ2FsY3VsYXRlIEhQIGZyb20gc3RhdHNcclxuICAgIGNvbnN0IHdpbGRIcFN0YXQgPSB0aGlzLndpbGRQb2tlbW9uLmRhdGE/LnN0YXRzPy5maW5kKChzOiBhbnkpID0+IHMuc3RhdC5uYW1lID09PSAnaHAnKT8uYmFzZV9zdGF0IHx8IDUwO1xyXG4gICAgdGhpcy53aWxkTWF4SHAgPSBNYXRoLmZsb29yKHdpbGRIcFN0YXQgKiAxLjUpOyAvLyBMZXZlbCBzY2FsaW5nXHJcbiAgICB0aGlzLndpbGRIcCA9IHRoaXMud2lsZE1heEhwO1xyXG4gICAgXHJcbiAgICB0aGlzLnBsYXllck1heEhwID0gdGhpcy5wbGF5ZXJQb2tlbW9uLm1heEhwO1xyXG4gICAgdGhpcy5wbGF5ZXJIcCA9IHRoaXMucGxheWVyUG9rZW1vbi5jdXJyZW50SHA7XHJcbiAgfVxyXG5cclxuICBhc3luYyBwcmVsb2FkKCkge1xyXG4gICAgLy8gTG9hZCBQb2vDqW1vbiBzcHJpdGVzIGlmIG5vdCBhbHJlYWR5IGxvYWRlZFxyXG4gICAgaWYgKCF0aGlzLnRleHR1cmVzLmV4aXN0cyhgd2lsZC0ke3RoaXMud2lsZFBva2Vtb24ucG9rZUlkfWApKSB7XHJcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5sb2FkLm9uY2UoUGhhc2VyLkxvYWRlci5FdmVudHMuQ09NUExFVEUsICgpID0+IHJlc29sdmUoKSk7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKGB3aWxkLSR7dGhpcy53aWxkUG9rZW1vbi5wb2tlSWR9YCwgdGhpcy53aWxkUG9rZW1vbi5zcHJpdGVVcmwpO1xyXG4gICAgICAgIHRoaXMubG9hZC5zdGFydCgpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKCF0aGlzLnRleHR1cmVzLmV4aXN0cyhgcGxheWVyLSR7dGhpcy5wbGF5ZXJQb2tlbW9uLnBva2VJZH1gKSkge1xyXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgIHRoaXMubG9hZC5vbmNlKFBoYXNlci5Mb2FkZXIuRXZlbnRzLkNPTVBMRVRFLCAoKSA9PiByZXNvbHZlKCkpO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShgcGxheWVyLSR7dGhpcy5wbGF5ZXJQb2tlbW9uLnBva2VJZH1gLCB0aGlzLnBsYXllclBva2Vtb24uc3ByaXRlVXJsKTtcclxuICAgICAgICB0aGlzLmxvYWQuc3RhcnQoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjcmVhdGUoKSB7XHJcbiAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XHJcblxyXG4gICAgLy8gQmFja2dyb3VuZFxyXG4gICAgdGhpcy5hZGQucmVjdGFuZ2xlKHdpZHRoIC8gMiwgaGVpZ2h0IC8gMiwgd2lkdGgsIGhlaWdodCwgMHg4N0NFRUIpLnNldE9yaWdpbigwLjUpO1xyXG5cclxuICAgIC8vIFdpbGQgUG9rw6ltb24gKGVuZW15LCB0b3AgcmlnaHQpXHJcbiAgICB0aGlzLndpbGRTcHJpdGUgPSB0aGlzLmFkZC5pbWFnZSh3aWR0aCAqIDAuNzUsIGhlaWdodCAqIDAuMywgYHdpbGQtJHt0aGlzLndpbGRQb2tlbW9uLnBva2VJZH1gKVxyXG4gICAgICAuc2V0U2NhbGUoMilcclxuICAgICAgLnNldEZsaXBYKGZhbHNlKTtcclxuXHJcbiAgICAvLyBQbGF5ZXIgUG9rw6ltb24gKGJvdHRvbSBsZWZ0LCBiYWNrIHNwcml0ZSlcclxuICAgIHRoaXMucGxheWVyU3ByaXRlID0gdGhpcy5hZGQuaW1hZ2Uod2lkdGggKiAwLjI1LCBoZWlnaHQgKiAwLjY1LCBgcGxheWVyLSR7dGhpcy5wbGF5ZXJQb2tlbW9uLnBva2VJZH1gKVxyXG4gICAgICAuc2V0U2NhbGUoMilcclxuICAgICAgLnNldEZsaXBYKHRydWUpO1xyXG5cclxuICAgIHRoaXMuY3JlYXRlVUkoKTtcclxuICAgIHRoaXMudXBkYXRlQmF0dGxlVGV4dChgQSB3aWxkICR7dGhpcy5jYXBpdGFsaXplKHRoaXMud2lsZFBva2Vtb24ubmFtZSl9IGFwcGVhcmVkIWApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjcmVhdGVVSSgpIHtcclxuICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcclxuXHJcbiAgICAvLyBCYXR0bGUgVUkgQ29udGFpbmVyXHJcbiAgICB0aGlzLmJhdHRsZVVJID0gdGhpcy5hZGQuY29udGFpbmVyKDAsIDApO1xyXG5cclxuICAgIC8vIFdpbGQgUG9rw6ltb24gSFAgQmFyICh0b3AgbGVmdClcclxuICAgIGNvbnN0IHdpbGRIcEJnID0gdGhpcy5hZGQucmVjdGFuZ2xlKDIwLCAyMCwgMjAwLCAyMCwgMHgzMzMzMzMpLnNldE9yaWdpbigwKTtcclxuICAgIHRoaXMud2lsZEhwQmFyID0gdGhpcy5hZGQucmVjdGFuZ2xlKDIyLCAyMiwgMTk2LCAxNiwgMHgwMGZmMDApLnNldE9yaWdpbigwKTtcclxuICAgIHRoaXMud2lsZEhwVGV4dCA9IHRoaXMuYWRkLnRleHQoMjAsIDQ1LCBgJHt0aGlzLmNhcGl0YWxpemUodGhpcy53aWxkUG9rZW1vbi5uYW1lKX0gSFA6ICR7dGhpcy53aWxkSHB9LyR7dGhpcy53aWxkTWF4SHB9YCwge1xyXG4gICAgICBmb250U2l6ZTogJzE0cHgnLFxyXG4gICAgICBjb2xvcjogJyMwMDAnXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBQbGF5ZXIgUG9rw6ltb24gSFAgQmFyIChib3R0b20gcmlnaHQpXHJcbiAgICBjb25zdCBwbGF5ZXJIcEJnID0gdGhpcy5hZGQucmVjdGFuZ2xlKHdpZHRoIC0gMjIwLCBoZWlnaHQgLSA4MCwgMjAwLCAyMCwgMHgzMzMzMzMpLnNldE9yaWdpbigwKTtcclxuICAgIHRoaXMucGxheWVySHBCYXIgPSB0aGlzLmFkZC5yZWN0YW5nbGUod2lkdGggLSAyMTgsIGhlaWdodCAtIDc4LCAxOTYsIDE2LCAweDAwZmYwMCkuc2V0T3JpZ2luKDApO1xyXG4gICAgdGhpcy5wbGF5ZXJIcFRleHQgPSB0aGlzLmFkZC50ZXh0KHdpZHRoIC0gMjIwLCBoZWlnaHQgLSA1NSwgYCR7dGhpcy5jYXBpdGFsaXplKHRoaXMucGxheWVyUG9rZW1vbi5uYW1lKX0gTHYuJHt0aGlzLnBsYXllclBva2Vtb24ubGV2ZWx9IEhQOiAke3RoaXMucGxheWVySHB9LyR7dGhpcy5wbGF5ZXJNYXhIcH1gLCB7XHJcbiAgICAgIGZvbnRTaXplOiAnMTRweCcsXHJcbiAgICAgIGNvbG9yOiAnIzAwMCdcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEJhdHRsZSB0ZXh0IGFyZWFcclxuICAgIGNvbnN0IHRleHRCZyA9IHRoaXMuYWRkLnJlY3RhbmdsZSgyMCwgaGVpZ2h0IC0gMTUwLCB3aWR0aCAtIDQwLCAxMDAsIDB4ZmZmZmZmLCAwLjkpLnNldE9yaWdpbigwKTtcclxuICAgIHRoaXMuYmF0dGxlVGV4dCA9IHRoaXMuYWRkLnRleHQoMzAsIGhlaWdodCAtIDE0MCwgJycsIHtcclxuICAgICAgZm9udFNpemU6ICcxNnB4JyxcclxuICAgICAgY29sb3I6ICcjMDAwJyxcclxuICAgICAgd29yZFdyYXA6IHsgd2lkdGg6IHdpZHRoIC0gNjAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQWN0aW9uIGJ1dHRvbnNcclxuICAgIHRoaXMuY3JlYXRlQWN0aW9uQnV0dG9ucygpO1xyXG5cclxuICAgIHRoaXMuYmF0dGxlVUkuYWRkKFt3aWxkSHBCZywgdGhpcy53aWxkSHBCYXIsIHRoaXMud2lsZEhwVGV4dCwgcGxheWVySHBCZywgdGhpcy5wbGF5ZXJIcEJhciwgdGhpcy5wbGF5ZXJIcFRleHQsIHRleHRCZywgdGhpcy5iYXR0bGVUZXh0XSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZUFjdGlvbkJ1dHRvbnMoKSB7XHJcbiAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XHJcbiAgICBcclxuICAgIHRoaXMuYWN0aW9uQnV0dG9ucyA9IHRoaXMuYWRkLmNvbnRhaW5lcigwLCAwKTtcclxuICAgIFxyXG4gICAgY29uc3QgYnV0dG9uRGF0YSA9IFtcclxuICAgICAgeyB0ZXh0OiAnQVRUQUNLJywgeDogd2lkdGggLSAyMDAsIHk6IGhlaWdodCAtIDQwLCBhY3Rpb246ICgpID0+IHRoaXMucGxheWVyQXR0YWNrKCkgfSxcclxuICAgICAgeyB0ZXh0OiAnQkFHJywgeDogd2lkdGggLSAxNTAsIHk6IGhlaWdodCAtIDQwLCBhY3Rpb246ICgpID0+IHRoaXMub3BlbkJhZygpIH0sXHJcbiAgICAgIHsgdGV4dDogJ0NBVENIJywgeDogd2lkdGggLSAxMDAsIHk6IGhlaWdodCAtIDQwLCBhY3Rpb246ICgpID0+IHRoaXMuYXR0ZW1wdENhdGNoKCkgfSxcclxuICAgICAgeyB0ZXh0OiAnUlVOJywgeDogd2lkdGggLSA1MCwgeTogaGVpZ2h0IC0gNDAsIGFjdGlvbjogKCkgPT4gdGhpcy5ydW5Bd2F5KCkgfVxyXG4gICAgXTtcclxuXHJcbiAgICBidXR0b25EYXRhLmZvckVhY2goYnRuID0+IHtcclxuICAgICAgY29uc3QgYnV0dG9uID0gdGhpcy5hZGQudGV4dChidG4ueCwgYnRuLnksIGJ0bi50ZXh0LCB7XHJcbiAgICAgICAgZm9udFNpemU6ICcxNHB4JyxcclxuICAgICAgICBjb2xvcjogJyNmZmYnLFxyXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyMzMzMnLFxyXG4gICAgICAgIHBhZGRpbmc6IHsgeDogOCwgeTogNCB9XHJcbiAgICAgIH0pLnNldEludGVyYWN0aXZlKHsgdXNlSGFuZEN1cnNvcjogdHJ1ZSB9KVxyXG4gICAgICAgIC5vbigncG9pbnRlcmRvd24nLCBidG4uYWN0aW9uKTtcclxuICAgICAgXHJcbiAgICAgIHRoaXMuYWN0aW9uQnV0dG9ucz8uYWRkKGJ1dHRvbik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAodGhpcy5hY3Rpb25CdXR0b25zKSB0aGlzLmJhdHRsZVVJPy5hZGQodGhpcy5hY3Rpb25CdXR0b25zKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcGxheWVyQXR0YWNrKCkge1xyXG4gICAgY29uc3QgcGxheWVyQXR0YWNrID0gdGhpcy5nZXRTdGF0VmFsdWUodGhpcy5wbGF5ZXJQb2tlbW9uLmRhdGEsICdhdHRhY2snKTtcclxuICAgIGNvbnN0IHdpbGREZWZlbnNlID0gdGhpcy5nZXRTdGF0VmFsdWUodGhpcy53aWxkUG9rZW1vbi5kYXRhLCAnZGVmZW5zZScpO1xyXG4gICAgXHJcbiAgICBjb25zdCBiYXNlRGFtYWdlID0gTWF0aC5tYXgoMSwgcGxheWVyQXR0YWNrIC0gd2lsZERlZmVuc2UpO1xyXG4gICAgY29uc3QgZGFtYWdlID0gTWF0aC5mbG9vcihiYXNlRGFtYWdlICogKDAuOCArIE1hdGgucmFuZG9tKCkgKiAwLjQpKTsgLy8gMC44LTEuMiBtdWx0aXBsaWVyXHJcbiAgICBcclxuICAgIHRoaXMud2lsZEhwID0gTWF0aC5tYXgoMCwgdGhpcy53aWxkSHAgLSBkYW1hZ2UpO1xyXG4gICAgdGhpcy51cGRhdGVCYXR0bGVUZXh0KGAke3RoaXMuY2FwaXRhbGl6ZSh0aGlzLnBsYXllclBva2Vtb24ubmFtZSl9IGF0dGFja3MhIERlYWx0ICR7ZGFtYWdlfSBkYW1hZ2UhYCk7XHJcbiAgICBcclxuICAgIHRoaXMudXBkYXRlSHBCYXJzKCk7XHJcbiAgICBcclxuICAgIGlmICh0aGlzLndpbGRIcCA8PSAwKSB7XHJcbiAgICAgIHRoaXMud2lsZERlZmVhdGVkKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoMTUwMCwgKCkgPT4gdGhpcy53aWxkQXR0YWNrKCkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB3aWxkQXR0YWNrKCkge1xyXG4gICAgY29uc3Qgd2lsZEF0dGFjayA9IHRoaXMuZ2V0U3RhdFZhbHVlKHRoaXMud2lsZFBva2Vtb24uZGF0YSwgJ2F0dGFjaycpO1xyXG4gICAgY29uc3QgcGxheWVyRGVmZW5zZSA9IHRoaXMuZ2V0U3RhdFZhbHVlKHRoaXMucGxheWVyUG9rZW1vbi5kYXRhLCAnZGVmZW5zZScpO1xyXG4gICAgXHJcbiAgICBjb25zdCBiYXNlRGFtYWdlID0gTWF0aC5tYXgoMSwgd2lsZEF0dGFjayAtIHBsYXllckRlZmVuc2UpO1xyXG4gICAgY29uc3QgZGFtYWdlID0gTWF0aC5mbG9vcihiYXNlRGFtYWdlICogKDAuOCArIE1hdGgucmFuZG9tKCkgKiAwLjQpKTtcclxuICAgIFxyXG4gICAgdGhpcy5wbGF5ZXJIcCA9IE1hdGgubWF4KDAsIHRoaXMucGxheWVySHAgLSBkYW1hZ2UpO1xyXG4gICAgdGhpcy51cGRhdGVCYXR0bGVUZXh0KGBXaWxkICR7dGhpcy5jYXBpdGFsaXplKHRoaXMud2lsZFBva2Vtb24ubmFtZSl9IGF0dGFja3MhIERlYWx0ICR7ZGFtYWdlfSBkYW1hZ2UhYCk7XHJcbiAgICBcclxuICAgIHRoaXMudXBkYXRlSHBCYXJzKCk7XHJcbiAgICBcclxuICAgIGlmICh0aGlzLnBsYXllckhwIDw9IDApIHtcclxuICAgICAgdGhpcy5wbGF5ZXJEZWZlYXRlZCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhdHRlbXB0Q2F0Y2goKSB7XHJcbiAgICBjb25zdCBjYXRjaFJhdGUgPSB0aGlzLndpbGRIcCA8ICh0aGlzLndpbGRNYXhIcCAqIDAuMikgPyAwLjggOiAwLjM7IC8vIEhpZ2hlciByYXRlIGlmIEhQIDwgMjAlXHJcbiAgICBcclxuICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgY2F0Y2hSYXRlKSB7XHJcbiAgICAgIHRoaXMudXBkYXRlQmF0dGxlVGV4dChgR290Y2hhISAke3RoaXMuY2FwaXRhbGl6ZSh0aGlzLndpbGRQb2tlbW9uLm5hbWUpfSB3YXMgY2F1Z2h0IWApO1xyXG4gICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoMjAwMCwgKCkgPT4gdGhpcy5lbmRCYXR0bGUodHJ1ZSkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy51cGRhdGVCYXR0bGVUZXh0KGAke3RoaXMuY2FwaXRhbGl6ZSh0aGlzLndpbGRQb2tlbW9uLm5hbWUpfSBicm9rZSBmcmVlIWApO1xyXG4gICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoMTUwMCwgKCkgPT4gdGhpcy53aWxkQXR0YWNrKCkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvcGVuQmFnKCkge1xyXG4gICAgdGhpcy51cGRhdGVCYXR0bGVUZXh0KFwiWW91IHJ1bW1hZ2UgdGhyb3VnaCB5b3VyIGJhZy4uLlwiKTtcclxuICAgIC8vIFRPRE86IEltcGxlbWVudCBiYWcvaXRlbSB1c2FnZVxyXG4gICAgdGhpcy50aW1lLmRlbGF5ZWRDYWxsKDEwMDAsICgpID0+IHRoaXMud2lsZEF0dGFjaygpKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcnVuQXdheSgpIHtcclxuICAgIHRoaXMudXBkYXRlQmF0dGxlVGV4dChcIllvdSByYW4gYXdheSBzYWZlbHkhXCIpO1xyXG4gICAgdGhpcy50aW1lLmRlbGF5ZWRDYWxsKDE1MDAsICgpID0+IHRoaXMuZW5kQmF0dGxlKGZhbHNlKSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHdpbGREZWZlYXRlZCgpIHtcclxuICAgIGNvbnN0IGV4cEdhaW5lZCA9IE1hdGguZmxvb3IodGhpcy5nZXRTdGF0VmFsdWUodGhpcy53aWxkUG9rZW1vbi5kYXRhLCAnYXR0YWNrJykgKiAxLjUpO1xyXG4gICAgdGhpcy51cGRhdGVCYXR0bGVUZXh0KGBXaWxkICR7dGhpcy5jYXBpdGFsaXplKHRoaXMud2lsZFBva2Vtb24ubmFtZSl9IGZhaW50ZWQhICR7dGhpcy5jYXBpdGFsaXplKHRoaXMucGxheWVyUG9rZW1vbi5uYW1lKX0gZ2FpbmVkICR7ZXhwR2FpbmVkfSBFWFAhYCk7XHJcbiAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoMzAwMCwgKCkgPT4gdGhpcy5lbmRCYXR0bGUodHJ1ZSkpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBwbGF5ZXJEZWZlYXRlZCgpIHtcclxuICAgIHRoaXMudXBkYXRlQmF0dGxlVGV4dChgJHt0aGlzLmNhcGl0YWxpemUodGhpcy5wbGF5ZXJQb2tlbW9uLm5hbWUpfSBmYWludGVkISBZb3UgbG9zdCB0aGUgYmF0dGxlIWApO1xyXG4gICAgdGhpcy50aW1lLmRlbGF5ZWRDYWxsKDMwMDAsICgpID0+IHRoaXMuZW5kQmF0dGxlKGZhbHNlKSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGVuZEJhdHRsZSh2aWN0b3J5OiBib29sZWFuKSB7XHJcbiAgICAvLyBSZXR1cm4gdG8gR2FtZVNjZW5lXHJcbiAgICB0aGlzLnNjZW5lLnN0YXJ0KFwiR2FtZVNjZW5lXCIpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVIcEJhcnMoKSB7XHJcbiAgICBpZiAodGhpcy53aWxkSHBCYXIgJiYgdGhpcy53aWxkSHBUZXh0KSB7XHJcbiAgICAgIGNvbnN0IHdpbGRIcFBlcmNlbnQgPSB0aGlzLndpbGRIcCAvIHRoaXMud2lsZE1heEhwO1xyXG4gICAgICB0aGlzLndpbGRIcEJhci53aWR0aCA9IDE5NiAqIHdpbGRIcFBlcmNlbnQ7XHJcbiAgICAgIHRoaXMud2lsZEhwQmFyLmZpbGxDb2xvciA9IHdpbGRIcFBlcmNlbnQgPiAwLjUgPyAweDAwZmYwMCA6IHdpbGRIcFBlcmNlbnQgPiAwLjIgPyAweGZmZmYwMCA6IDB4ZmYwMDAwO1xyXG4gICAgICB0aGlzLndpbGRIcFRleHQuc2V0VGV4dChgJHt0aGlzLmNhcGl0YWxpemUodGhpcy53aWxkUG9rZW1vbi5uYW1lKX0gSFA6ICR7dGhpcy53aWxkSHB9LyR7dGhpcy53aWxkTWF4SHB9YCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICh0aGlzLnBsYXllckhwQmFyICYmIHRoaXMucGxheWVySHBUZXh0KSB7XHJcbiAgICAgIGNvbnN0IHBsYXllckhwUGVyY2VudCA9IHRoaXMucGxheWVySHAgLyB0aGlzLnBsYXllck1heEhwO1xyXG4gICAgICB0aGlzLnBsYXllckhwQmFyLndpZHRoID0gMTk2ICogcGxheWVySHBQZXJjZW50O1xyXG4gICAgICB0aGlzLnBsYXllckhwQmFyLmZpbGxDb2xvciA9IHBsYXllckhwUGVyY2VudCA+IDAuNSA/IDB4MDBmZjAwIDogcGxheWVySHBQZXJjZW50ID4gMC4yID8gMHhmZmZmMDAgOiAweGZmMDAwMDtcclxuICAgICAgdGhpcy5wbGF5ZXJIcFRleHQuc2V0VGV4dChgJHt0aGlzLmNhcGl0YWxpemUodGhpcy5wbGF5ZXJQb2tlbW9uLm5hbWUpfSBMdi4ke3RoaXMucGxheWVyUG9rZW1vbi5sZXZlbH0gSFA6ICR7dGhpcy5wbGF5ZXJIcH0vJHt0aGlzLnBsYXllck1heEhwfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVCYXR0bGVUZXh0KHRleHQ6IHN0cmluZykge1xyXG4gICAgaWYgKHRoaXMuYmF0dGxlVGV4dCkge1xyXG4gICAgICB0aGlzLmJhdHRsZVRleHQuc2V0VGV4dCh0ZXh0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0U3RhdFZhbHVlKHBva2Vtb25EYXRhOiBhbnksIHN0YXROYW1lOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgY29uc3Qgc3RhdCA9IHBva2Vtb25EYXRhPy5zdGF0cz8uZmluZCgoczogYW55KSA9PiBzLnN0YXQubmFtZSA9PT0gc3RhdE5hbWUpO1xyXG4gICAgcmV0dXJuIHN0YXQ/LmJhc2Vfc3RhdCB8fCA1MDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2FwaXRhbGl6ZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJQaGFzZXIiLCJCYXR0bGVTY2VuZSIsIlNjZW5lIiwid2lsZEhwIiwid2lsZE1heEhwIiwicGxheWVySHAiLCJwbGF5ZXJNYXhIcCIsImluaXQiLCJkYXRhIiwid2lsZFBva2Vtb24iLCJwbGF5ZXJQb2tlbW9uIiwid2lsZEhwU3RhdCIsInN0YXRzIiwiZmluZCIsInMiLCJzdGF0IiwibmFtZSIsImJhc2Vfc3RhdCIsIk1hdGgiLCJmbG9vciIsIm1heEhwIiwiY3VycmVudEhwIiwicHJlbG9hZCIsInRleHR1cmVzIiwiZXhpc3RzIiwicG9rZUlkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJsb2FkIiwib25jZSIsIkxvYWRlciIsIkV2ZW50cyIsIkNPTVBMRVRFIiwiaW1hZ2UiLCJzcHJpdGVVcmwiLCJzdGFydCIsImNyZWF0ZSIsIndpZHRoIiwiaGVpZ2h0Iiwic2NhbGUiLCJhZGQiLCJyZWN0YW5nbGUiLCJzZXRPcmlnaW4iLCJ3aWxkU3ByaXRlIiwic2V0U2NhbGUiLCJzZXRGbGlwWCIsInBsYXllclNwcml0ZSIsImNyZWF0ZVVJIiwidXBkYXRlQmF0dGxlVGV4dCIsImNhcGl0YWxpemUiLCJiYXR0bGVVSSIsImNvbnRhaW5lciIsIndpbGRIcEJnIiwid2lsZEhwQmFyIiwid2lsZEhwVGV4dCIsInRleHQiLCJmb250U2l6ZSIsImNvbG9yIiwicGxheWVySHBCZyIsInBsYXllckhwQmFyIiwicGxheWVySHBUZXh0IiwibGV2ZWwiLCJ0ZXh0QmciLCJiYXR0bGVUZXh0Iiwid29yZFdyYXAiLCJjcmVhdGVBY3Rpb25CdXR0b25zIiwiYWN0aW9uQnV0dG9ucyIsImJ1dHRvbkRhdGEiLCJ4IiwieSIsImFjdGlvbiIsInBsYXllckF0dGFjayIsIm9wZW5CYWciLCJhdHRlbXB0Q2F0Y2giLCJydW5Bd2F5IiwiZm9yRWFjaCIsImJ0biIsImJ1dHRvbiIsImJhY2tncm91bmRDb2xvciIsInBhZGRpbmciLCJzZXRJbnRlcmFjdGl2ZSIsInVzZUhhbmRDdXJzb3IiLCJvbiIsImdldFN0YXRWYWx1ZSIsIndpbGREZWZlbnNlIiwiYmFzZURhbWFnZSIsIm1heCIsImRhbWFnZSIsInJhbmRvbSIsInVwZGF0ZUhwQmFycyIsIndpbGREZWZlYXRlZCIsInRpbWUiLCJkZWxheWVkQ2FsbCIsIndpbGRBdHRhY2siLCJwbGF5ZXJEZWZlbnNlIiwicGxheWVyRGVmZWF0ZWQiLCJjYXRjaFJhdGUiLCJlbmRCYXR0bGUiLCJleHBHYWluZWQiLCJ2aWN0b3J5Iiwic2NlbmUiLCJ3aWxkSHBQZXJjZW50IiwiZmlsbENvbG9yIiwic2V0VGV4dCIsInBsYXllckhwUGVyY2VudCIsInBva2Vtb25EYXRhIiwic3RhdE5hbWUiLCJzdHIiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./lib/phaser/BattleScene.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./lib/phaser/GameScene.ts":
/*!*********************************!*\
  !*** ./lib/phaser/GameScene.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GameScene: () => (/* binding */ GameScene)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! socket.io-client */ \"socket.io-client\");\n/* harmony import */ var _spawnUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../spawnUtils */ \"(pages-dir-node)/./lib/spawnUtils.ts\");\n/* harmony import */ var _mapZones__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../mapZones */ \"(pages-dir-node)/./lib/mapZones.ts\");\n/* harmony import */ var _biomes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../biomes */ \"(pages-dir-node)/./lib/biomes.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([socket_io_client__WEBPACK_IMPORTED_MODULE_1__]);\nsocket_io_client__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\nfunction capitalize(s) {\n    return (s || \"\").charAt(0).toUpperCase() + (s || \"\").slice(1);\n}\nclass GameScene extends phaser__WEBPACK_IMPORTED_MODULE_0__.Scene {\n    constructor(){\n        super(\"GameScene\"), this.configData = {\n            tileSize: 32,\n            mapWidth: 50,\n            mapHeight: 38,\n            playerSpeed: 200\n        }, this.playerSpeed = 200, // Cached map dimensions\n        this.mapWidthTiles = 0, this.mapHeightTiles = 0, this.tileSizePx = 32, this.others = new Map(), this.lastSent = 0, // UI (sidebar) - removed in favor of React/Next UI\n        this.lastStatusAt = 0, this.miniW = 160, this.miniH = 160, // Structures\n        this.structures = [], this.insideStructure = {\n            active: false,\n            type: null\n        };\n    }\n    init(data) {\n        this.configData = {\n            ...this.configData,\n            ...data\n        };\n        if (this.configData.playerSpeed) this.playerSpeed = this.configData.playerSpeed;\n    }\n    preload() {\n        // Generate a simple 2-tile spritesheet (grass, wall) programmatically\n        const { tileSize } = this.configData;\n        const width = tileSize * 2;\n        const height = tileSize;\n        const sheet = this.textures.createCanvas(\"tilesheet\", width, height);\n        if (!sheet) {\n            throw new Error(\"Failed to create canvas texture 'tilesheet'\");\n        }\n        const ctx = sheet.getContext();\n        if (!ctx) {\n            throw new Error(\"Failed to get 2D rendering context from canvas 'tilesheet'\");\n        }\n        // Grass tile (index 0)\n        ctx.fillStyle = \"#2d6a4f\";\n        ctx.fillRect(0, 0, tileSize, tileSize);\n        // sprinkle dots\n        ctx.fillStyle = \"#40916c\";\n        for(let i = 0; i < 30; i++){\n            const x = Math.random() * (tileSize - 2);\n            const y = Math.random() * (tileSize - 2);\n            ctx.fillRect(x, y, 2, 2);\n        }\n        // Wall tile (index 1)\n        ctx.fillStyle = \"#6c757d\";\n        ctx.fillRect(tileSize, 0, tileSize, tileSize);\n        ctx.strokeStyle = \"#495057\";\n        for(let i = 0; i < tileSize; i += 4){\n            ctx.beginPath();\n            ctx.moveTo(tileSize, i + 0.5);\n            ctx.lineTo(tileSize * 2, i + 0.5);\n            ctx.stroke();\n        }\n        sheet.refresh();\n        // Generate a player texture (circle)\n        const g = this.make.graphics({\n            x: 0,\n            y: 0\n        });\n        g.fillStyle(0xffd166, 1);\n        g.fillCircle(tileSize / 2, tileSize / 2, tileSize * 0.4);\n        g.lineStyle(2, 0x073b4c, 1);\n        g.strokeCircle(tileSize / 2, tileSize / 2, tileSize * 0.4);\n        g.generateTexture(\"player\", tileSize, tileSize);\n        g.destroy();\n    }\n    create() {\n        const { tileSize, mapWidth, mapHeight } = this.configData;\n        this.tileSizePx = tileSize;\n        this.mapWidthTiles = mapWidth;\n        this.mapHeightTiles = mapHeight;\n        // Create a blank tilemap and a dynamic layer using our generated spritesheet\n        const map = this.make.tilemap({\n            tileWidth: tileSize,\n            tileHeight: tileSize,\n            width: mapWidth,\n            height: mapHeight\n        });\n        const tileset = map.addTilesetImage(\"tiles\", \"tilesheet\", tileSize, tileSize, 0, 0);\n        if (!tileset) throw new Error(\"Failed to create tileset from tilesheet\");\n        const layer = map.createBlankLayer(\"ground\", tileset, 0, 0);\n        if (!layer) throw new Error(\"Failed to create blank ground layer\");\n        this.groundLayer = layer;\n        // Fill ground (index 0) and carve walls (index 1) along the border + a few random obstacles\n        this.groundLayer.fill(0, 0, 0, mapWidth, mapHeight);\n        for(let x = 0; x < mapWidth; x++){\n            this.groundLayer.putTileAt(1, x, 0);\n            this.groundLayer.putTileAt(1, x, mapHeight - 1);\n        }\n        for(let y = 0; y < mapHeight; y++){\n            this.groundLayer.putTileAt(1, 0, y);\n            this.groundLayer.putTileAt(1, mapWidth - 1, y);\n        }\n        // random obstacles\n        for(let i = 0; i < Math.floor(mapWidth * mapHeight * 0.05); i++){\n            const rx = phaser__WEBPACK_IMPORTED_MODULE_0__.Math.Between(1, mapWidth - 2);\n            const ry = phaser__WEBPACK_IMPORTED_MODULE_0__.Math.Between(1, mapHeight - 2);\n            this.groundLayer.putTileAt(1, rx, ry);\n        }\n        // Enable collisions for wall tiles (index 1)\n        this.groundLayer.setCollision(1, true);\n        // Player setup\n        const startX = this.configData.initialX ?? tileSize * 2;\n        const startY = this.configData.initialY ?? tileSize * 2;\n        this.player = this.physics.add.sprite(startX, startY, \"player\");\n        this.player.setDepth(10);\n        this.player.setCollideWorldBounds(true);\n        // Camera and world bounds\n        const worldWidth = mapWidth * tileSize;\n        const worldHeight = mapHeight * tileSize;\n        this.cameras.main.setBounds(0, 0, worldWidth, worldHeight);\n        this.cameras.main.startFollow(this.player, true, 0.1, 0.1);\n        this.physics.world.setBounds(0, 0, worldWidth, worldHeight);\n        // Collide player with walls\n        this.physics.add.collider(this.player, this.groundLayer);\n        // Input\n        this.cursors = this.input.keyboard?.createCursorKeys();\n        this.wasd = this.input.keyboard?.addKeys({\n            W: phaser__WEBPACK_IMPORTED_MODULE_0__.Input.Keyboard.KeyCodes.W,\n            A: phaser__WEBPACK_IMPORTED_MODULE_0__.Input.Keyboard.KeyCodes.A,\n            S: phaser__WEBPACK_IMPORTED_MODULE_0__.Input.Keyboard.KeyCodes.S,\n            D: phaser__WEBPACK_IMPORTED_MODULE_0__.Input.Keyboard.KeyCodes.D\n        });\n        this.enterKey = this.input.keyboard?.addKey(phaser__WEBPACK_IMPORTED_MODULE_0__.Input.Keyboard.KeyCodes.ENTER);\n        // Multiplayer socket (kept from your original)\n        this.initMultiplayer();\n        // Environment overlay\n        this.envOverlay = this.add.rectangle(0, 0, this.scale.width, this.scale.height, 0xffffff, 0.08).setOrigin(0).setScrollFactor(0).setDepth(900);\n        // Minimap overlay (no grid lines)\n        this.createMiniMap();\n        // Zone-aware spawn manager\n        this.spawnManager = new _spawnUtils__WEBPACK_IMPORTED_MODULE_2__.SpawnManager(this, tileSize, mapWidth, mapHeight);\n        this.spawnManager.on(\"spawned\", (rec)=>{\n            this.addMiniMarker(rec.key, rec.position.x, rec.position.y);\n            this.statusOnce(`A wild ${capitalize(rec.name)} appeared near you!`, 800);\n            this.configData.onPokemonSpotted?.({\n                name: rec.name,\n                spriteUrl: rec.spriteUrl,\n                pokeId: rec.pokeId\n            });\n            this.pushSpawnsToUI();\n        });\n        this.spawnManager.on(\"despawned\", (_key)=>{\n            this.removeMiniMarker(_key);\n            if (this.spawnManager.getActiveSpawns().length === 0) this.configData.onPokemonCleared?.();\n            this.pushSpawnsToUI();\n        });\n        this.spawnManager.on(\"spawnClicked\", async (key)=>{\n            await this.startBattleFromKey(key);\n        });\n        this.spawnManager.on(\"zoneChanged\", (z)=>{\n            this.highlightMiniZone();\n            const czx = (z.col * _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES + _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES / 2) * tileSize;\n            const czy = (z.row * _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES + _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES / 2) * tileSize;\n            const cam = this.cameras.main;\n            cam.stopFollow();\n            cam.pan(czx, czy, 300, \"Sine.easeInOut\", true, (camera, progress)=>{\n                if (progress === 1) cam.startFollow(this.player, true, 0.1, 0.1);\n            });\n            // apply biome environment tint\n            const zones = (0,_mapZones__WEBPACK_IMPORTED_MODULE_3__.generateZones)(Math.floor(this.mapWidthTiles / _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES), Math.floor(this.mapHeightTiles / _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES));\n            const meta = zones.find((q)=>q.id === `${z.col},${z.row}`);\n            if (meta) this.applyBiome(meta.biome);\n        });\n        this.generateStructures();\n        this.spawnManager.start();\n    }\n    update() {\n        if (!this.player || !this.player.body) return;\n        const speed = this.playerSpeed;\n        let vx = 0;\n        let vy = 0;\n        // Arrow keys\n        if (this.cursors?.left?.isDown) vx -= 1;\n        if (this.cursors?.right?.isDown) vx += 1;\n        if (this.cursors?.up?.isDown) vy -= 1;\n        if (this.cursors?.down?.isDown) vy += 1;\n        // WASD\n        if (this.wasd?.A?.isDown) vx -= 1;\n        if (this.wasd?.D?.isDown) vx += 1;\n        if (this.wasd?.W?.isDown) vy -= 1;\n        if (this.wasd?.S?.isDown) vy += 1;\n        const body = this.player.body;\n        if (vx === 0 && vy === 0) {\n            body.setVelocity(0, 0);\n        } else {\n            const len = Math.hypot(vx, vy) || 1;\n            body.setVelocity(vx / len * speed, vy / len * speed);\n        }\n        // Keep UI + minimap pinned\n        if (this.mini) this.mini.setScrollFactor(0);\n        // Throttled position sync (multiplayer)\n        const now = this.time.now;\n        if (this.socket && now - this.lastSent > 100) {\n            this.socket.emit(\"move\", {\n                x: this.player.x,\n                y: this.player.y\n            });\n            this.lastSent = now;\n        }\n        // Update zone tracking for spawns/minimap\n        this.spawnManager?.updatePlayerPos(this.player.x, this.player.y);\n        // Battle when near and Enter pressed (compat)\n        if (this.enterKey && phaser__WEBPACK_IMPORTED_MODULE_0__.Input.Keyboard.JustDown(this.enterKey)) {\n            const nearest = this.getNearestActive(64);\n            if (nearest) this.startBattleFromKey(nearest.key);\n        }\n    }\n    // ---- UI helpers ----\n    statusOnce(_text, cooldownMs = 800) {\n        const now = this.time.now;\n        if (now - this.lastStatusAt < cooldownMs) return;\n        this.lastStatusAt = now;\n    // React sidebar now handles messaging\n    }\n    // ---- Multiplayer (kept) ----\n    initMultiplayer() {\n        if (this.socket) return; // already connected\n        const socket = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_1__.io)(\"http://localhost:4000\", {\n            transports: [\n                \"websocket\"\n            ],\n            autoConnect: true\n        });\n        this.socket = socket;\n        socket.on(\"connect\", ()=>{\n            this.myId = socket.id;\n        });\n        socket.on(\"initState\", (payload)=>{\n            Object.entries(payload.players).forEach(([id, pos])=>{\n                if (id === this.myId) return;\n                this.spawnOther(id, pos.x, pos.y);\n            });\n        });\n        socket.on(\"playerJoined\", ({ id, x, y })=>{\n            if (id === this.myId) return;\n            this.spawnOther(id, x, y);\n        });\n        socket.on(\"playerMoved\", ({ id, x, y })=>{\n            const sprite = this.others.get(id);\n            if (sprite) {\n                sprite.x = x;\n                sprite.y = y;\n            }\n        });\n        socket.on(\"playerLeft\", ({ id })=>{\n            const sprite = this.others.get(id);\n            if (sprite) {\n                sprite.destroy();\n                this.others.delete(id);\n            }\n        });\n        this.events.once(phaser__WEBPACK_IMPORTED_MODULE_0__.Scenes.Events.SHUTDOWN, ()=>{\n            socket.removeAllListeners();\n            socket.disconnect();\n            this.socket = undefined;\n            this.myId = undefined;\n            this.others.forEach((s)=>s.destroy());\n            this.others.clear();\n        });\n    }\n    spawnOther(id, x, y) {\n        const s = this.add.sprite(x, y, \"player\").setTint(0x118ab2);\n        s.setDepth(5);\n        this.others.set(id, s);\n    }\n    // ---- Minimap ----\n    createMiniMap() {\n        // Place top-left inside gameplay area (away from right sidebar)\n        const baseX = 12;\n        const baseY = 12;\n        this.mini = this.add.container(baseX, baseY).setDepth(1000);\n        this.mini.setScrollFactor(0);\n        const bg = this.add.rectangle(0, 0, this.miniW, this.miniH, 0x111111, 0.6).setOrigin(0);\n        this.miniGfx = this.add.graphics();\n        this.miniMarkers = this.add.container(0, 0);\n        this.miniBuildings = this.add.container(0, 0);\n        this.miniHighlight = this.add.graphics();\n        // no grid lines to keep zones invisible\n        const cols = Math.max(1, Math.floor(this.mapWidthTiles / _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES));\n        const rows = Math.max(1, Math.floor(this.mapHeightTiles / _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES));\n        this.miniGfx.clear();\n        this.miniGfx.lineStyle(1, 0x333333, 0.8);\n        this.miniGfx.strokeRect(0, 0, this.miniW, this.miniH);\n        // clickable zone\n        const hit = this.add.zone(0, 0, this.miniW, this.miniH).setOrigin(0).setInteractive({\n            useHandCursor: true\n        });\n        hit.on('pointerdown', (_pointer, localX, localY)=>{\n            const zc = Math.floor(localX / (this.miniW / cols));\n            const zr = Math.floor(localY / (this.miniH / rows));\n            const cx = (zc * _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES + _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES / 2) * this.tileSizePx;\n            const cy = (zr * _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES + _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES / 2) * this.tileSizePx;\n            const cam = this.cameras.main;\n            cam.stopFollow();\n            cam.pan(cx, cy, 300, 'Sine.easeInOut', true, (camera, progress)=>{\n                if (progress === 1) cam.startFollow(this.player, true, 0.1, 0.1);\n            });\n        });\n        this.mini.add([\n            bg,\n            this.miniGfx,\n            this.miniHighlight,\n            this.miniBuildings,\n            this.miniMarkers,\n            hit\n        ]);\n        this.highlightMiniZone();\n    }\n    highlightMiniZone() {\n        if (!this.miniHighlight) return;\n        const grid = this.spawnManager?.getZoneGrid();\n        const cols = grid?.cols ?? Math.max(1, Math.floor(this.mapWidthTiles / _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES));\n        const rows = grid?.rows ?? Math.max(1, Math.floor(this.mapHeightTiles / _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES));\n        const cur = this.spawnManager?.getCurrentZone();\n        if (!cur) return;\n        const cw = this.miniW / cols;\n        const ch = this.miniH / rows;\n        this.miniHighlight.clear();\n        this.miniHighlight.lineStyle(2, 0xffff66, 1);\n        this.miniHighlight.strokeRect(cur.col * cw, cur.row * ch, cw, ch);\n    }\n    worldToMini(x, y) {\n        const sx = this.miniW / (this.mapWidthTiles * this.tileSizePx);\n        const sy = this.miniH / (this.mapHeightTiles * this.tileSizePx);\n        return {\n            x: x * sx,\n            y: y * sy\n        };\n    }\n    addMiniMarker(key, wx, wy) {\n        if (!this.miniMarkers) return;\n        const pt = this.worldToMini(wx, wy);\n        const dot = this.add.rectangle(pt.x, pt.y, 4, 4, 0xffffff, 1).setOrigin(0.5);\n        dot.name = key;\n        this.miniMarkers.add(dot);\n    }\n    removeMiniMarker(key) {\n        if (!this.miniMarkers) return;\n        const list = this.miniMarkers.list;\n        const found = list.find((ch)=>ch.name === key);\n        if (found) found.destroy();\n    }\n    getNearestActive(radius) {\n        if (!this.spawnManager) return null;\n        let best = null;\n        let bestD = Number.POSITIVE_INFINITY;\n        this.spawnManager.getActiveSpawns().forEach((rec)=>{\n            const d = phaser__WEBPACK_IMPORTED_MODULE_0__.Math.Distance.Between(this.player.x, this.player.y, rec.position.x, rec.position.y);\n            if (d < radius && d < bestD) {\n                bestD = d;\n                best = rec;\n            }\n        });\n        return best;\n    }\n    async startBattleFromKey(key) {\n        if (!this.spawnManager) return;\n        const rec = this.spawnManager.getActiveSpawns().find((r)=>r.key === key);\n        if (!rec) return;\n        if (!this.configData.playerPokemon) {\n            this.statusOnce('You need a Pokémon to battle!', 800);\n            return;\n        }\n        try {\n            const pokeRes = await fetch(`https://pokeapi.co/api/v2/pokemon/${rec.pokeId}`);\n            const pokeData = await pokeRes.json();\n            this.spawnManager.despawn(key);\n            this.scene.start('BattleScene', {\n                wildPokemon: {\n                    name: rec.name,\n                    pokeId: rec.pokeId,\n                    data: pokeData,\n                    spriteUrl: rec.spriteUrl\n                },\n                playerPokemon: this.configData.playerPokemon\n            });\n        } catch  {}\n    }\n    // ---- Structures ----\n    generateStructures() {\n        const cols = Math.max(1, Math.floor(this.mapWidthTiles / _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES));\n        const rows = Math.max(1, Math.floor(this.mapHeightTiles / _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES));\n        const zones = (0,_mapZones__WEBPACK_IMPORTED_MODULE_3__.generateZones)(cols, rows);\n        const choose = (arr)=>arr[Math.floor(Math.random() * arr.length)];\n        const byBiome = {\n            city: [\n                \"lab\",\n                \"house\"\n            ],\n            mountain: [\n                \"temple\",\n                \"house\"\n            ],\n            forest: [\n                \"house\",\n                \"tower\"\n            ],\n            desert: [\n                \"temple\"\n            ],\n            lake: [\n                \"tower\"\n            ],\n            grassland: [\n                \"house\"\n            ],\n            cave: [\n                \"tower\"\n            ],\n            snowfield: [\n                \"house\",\n                \"temple\"\n            ]\n        };\n        this.structures = [];\n        zones.forEach((z)=>{\n            if (Math.random() > 0.12) return; // ~12% of zones have a building\n            const types = byBiome[z.biome] || [\n                \"house\"\n            ];\n            const type = choose(types);\n            const startX = z.col * _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES * this.tileSizePx;\n            const startY = z.row * _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES * this.tileSizePx;\n            const x = startX + 16 + Math.random() * (_mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES * this.tileSizePx - 32);\n            const y = startY + 16 + Math.random() * (_mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES * this.tileSizePx - 32);\n            const id = `b-${z.id}-${type}-${Math.floor(x)}-${Math.floor(y)}`;\n            this.structures.push({\n                id,\n                type,\n                col: z.col,\n                row: z.row,\n                x,\n                y\n            });\n        });\n        // render\n        this.structures.forEach((s)=>{\n            const color = s.type === \"lab\" ? 0xcfe3ff : s.type === \"tower\" ? 0x6b4e9b : s.type === \"temple\" ? 0xc2b280 : 0xd3d3d3;\n            const building = this.add.rectangle(s.x, s.y, 32, 24, color, 1).setOrigin(0.5).setDepth(15);\n            this.physics.add.existing(building, true);\n            const door = this.add.rectangle(s.x, s.y + 12, 10, 6, 0x000000, 0.8).setDepth(16);\n            this.physics.add.existing(door, true);\n            this.physics.add.overlap(this.player, door, ()=>this.enterStructure(s));\n            // minimap marker\n            if (this.miniBuildings) {\n                const pt = this.worldToMini(s.x, s.y);\n                const sq = this.add.rectangle(pt.x, pt.y, 5, 5, 0xffe066, 1).setOrigin(0.5);\n                this.miniBuildings.add(sq);\n            }\n        });\n    }\n    enterStructure(s) {\n        if (this.insideStructure.active) return;\n        this.insideStructure = {\n            active: true,\n            type: s.type\n        };\n        // override spawn pool based on structure -> use BIOMES mapping\n        const b = s.type === \"tower\" ? _biomes__WEBPACK_IMPORTED_MODULE_4__.BIOMES.tower : s.type === \"lab\" ? _biomes__WEBPACK_IMPORTED_MODULE_4__.BIOMES.lab : _biomes__WEBPACK_IMPORTED_MODULE_4__.BIOMES.temple;\n        this.applyBiome(b.id);\n        this.spawnManager?.setOverrideTypes(b.pokemonPool);\n    }\n    exitStructure() {\n        if (!this.insideStructure.active) return;\n        this.insideStructure = {\n            active: false,\n            type: null\n        };\n        // clear override and re-apply zone biome color\n        this.spawnManager?.setOverrideTypes(null);\n        const cur = this.spawnManager?.getCurrentZone();\n        if (cur) {\n            const zones = (0,_mapZones__WEBPACK_IMPORTED_MODULE_3__.generateZones)(Math.floor(this.mapWidthTiles / _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES), Math.floor(this.mapHeightTiles / _mapZones__WEBPACK_IMPORTED_MODULE_3__.ZONE_TILES));\n            const meta = zones.find((q)=>q.id === `${cur.col},${cur.row}`);\n            if (meta) this.applyBiome(meta.biome);\n        }\n    }\n    applyBiome(id) {\n        const def = _biomes__WEBPACK_IMPORTED_MODULE_4__.BIOMES[id];\n        if (!def) return;\n        if (this.envOverlay) {\n            const target = def.environmentColor;\n            const from = this.envOverlay.fillColor ?? 0xffffff;\n            const o = {\n                t: 0\n            };\n            this.tweens.add({\n                targets: o,\n                t: 1,\n                duration: 400,\n                onUpdate: ()=>{\n                    const c = phaser__WEBPACK_IMPORTED_MODULE_0__.Display.Color.Interpolate.ColorWithColor(phaser__WEBPACK_IMPORTED_MODULE_0__.Display.Color.IntegerToColor(from), phaser__WEBPACK_IMPORTED_MODULE_0__.Display.Color.IntegerToColor(target), 100, Math.floor(o.t * 100));\n                    const hex = phaser__WEBPACK_IMPORTED_MODULE_0__.Display.Color.GetColor(c.r, c.g, c.b);\n                    this.envOverlay.setFillStyle(hex, 0.08);\n                }\n            });\n        }\n    }\n    pushSpawnsToUI() {\n        if (!this.configData.onSpawnsUpdate || !this.spawnManager) return;\n        const spawns = this.spawnManager.getActiveSpawns().map((r)=>({\n                key: r.key,\n                name: r.name,\n                pokeId: r.pokeId,\n                spriteUrl: r.spriteUrl,\n                position: r.position,\n                distance: phaser__WEBPACK_IMPORTED_MODULE_0__.Math.Distance.Between(this.player.x, this.player.y, r.position.x, r.position.y)\n            }));\n        this.configData.onSpawnsUpdate(spawns);\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2xpYi9waGFzZXIvR2FtZVNjZW5lLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBaUM7QUFDa0I7QUFFTjtBQUNXO0FBQ2dDO0FBRXhGLFNBQVNNLFdBQVdDLENBQVM7SUFDM0IsT0FBTyxDQUFDQSxLQUFLLEVBQUMsRUFBR0MsTUFBTSxDQUFDLEdBQUdDLFdBQVcsS0FBSyxDQUFDRixLQUFLLEVBQUMsRUFBR0csS0FBSyxDQUFDO0FBQzdEO0FBeUJPLE1BQU1DLGtCQUFrQlgseUNBQVk7SUFnRHpDLGFBQWM7UUFDWixLQUFLLENBQUMsbUJBM0NBYSxhQUEwQjtZQUNoQ0MsVUFBVTtZQUNWQyxVQUFVO1lBQ1ZDLFdBQVc7WUFDWEMsYUFBYTtRQUNmLFFBQ1FBLGNBQWMsS0FJdEIsd0JBQXdCO2FBQ2hCQyxnQkFBZ0IsUUFDaEJDLGlCQUFpQixRQUNqQkMsYUFBYSxTQUNiQyxTQUFpRCxJQUFJQyxZQUNyREMsV0FBVyxHQUtuQixtREFBbUQ7YUFDM0NDLGVBQWUsUUFRZkMsUUFBUSxVQUNSQyxRQUFRLEtBS2hCLGFBQWE7YUFDTEMsYUFBNkIsRUFBRSxPQUMvQkMsa0JBQW1FO1lBQUVDLFFBQVE7WUFBT0MsTUFBTTtRQUFLO0lBT3ZHO0lBRUFDLEtBQUtDLElBQTBCLEVBQUU7UUFDL0IsSUFBSSxDQUFDbkIsVUFBVSxHQUFHO1lBQUUsR0FBRyxJQUFJLENBQUNBLFVBQVU7WUFBRSxHQUFHbUIsSUFBSTtRQUFDO1FBQ2hELElBQUksSUFBSSxDQUFDbkIsVUFBVSxDQUFDSSxXQUFXLEVBQzdCLElBQUksQ0FBQ0EsV0FBVyxHQUFHLElBQUksQ0FBQ0osVUFBVSxDQUFDSSxXQUFXO0lBQ2xEO0lBRUFnQixVQUFVO1FBQ1Isc0VBQXNFO1FBQ3RFLE1BQU0sRUFBRW5CLFFBQVEsRUFBRSxHQUFHLElBQUksQ0FBQ0QsVUFBVTtRQUNwQyxNQUFNcUIsUUFBUXBCLFdBQVc7UUFDekIsTUFBTXFCLFNBQVNyQjtRQUNmLE1BQU1zQixR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UCxRQUFRLENBQUM3SyxPQUFPLENBQUMsSUFBSSxDQUFDTyxNQUFNLENBQUN2QyxDQUFDLEVBQUUsSUFBSSxDQUFDdUMsTUFBTSxDQUFDcEMsQ0FBQyxFQUFFMk0sRUFBRTdILFFBQVEsQ0FBQ2pGLENBQUMsRUFBRThNLEVBQUU3SCxRQUFRLENBQUM5RSxDQUFDO1lBQ2pHO1FBQ0EsSUFBSSxDQUFDbkMsVUFBVSxDQUFDc1MsY0FBYyxDQUFDQztJQUNqQztBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFNhaGl0aFxcT25lRHJpdmVcXERlc2t0b3BcXHlva2FpaHVudFxcZnJvbnRlbmRcXGxpYlxccGhhc2VyXFxHYW1lU2NlbmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUGhhc2VyIGZyb20gXCJwaGFzZXJcIjtcclxuaW1wb3J0IHsgaW8sIHR5cGUgU29ja2V0IH0gZnJvbSBcInNvY2tldC5pby1jbGllbnRcIjtcclxuaW1wb3J0IHsgY2F0Y2hQb2tlbW9uIGFzIGFwaUNhdGNoIH0gZnJvbSBcIi4uL2FwaS9hcGlcIjtcclxuaW1wb3J0IHsgU3Bhd25NYW5hZ2VyIH0gZnJvbSBcIi4uL3NwYXduVXRpbHNcIjtcclxuaW1wb3J0IHsgWk9ORV9USUxFUywgZ2VuZXJhdGVab25lcyB9IGZyb20gXCIuLi9tYXBab25lc1wiO1xyXG5pbXBvcnQgeyBCSU9NRVMsIHR5cGUgQmlvbWVJZCwgdHlwZSBTdHJ1Y3R1cmVEZWYsIHR5cGUgU3RydWN0dXJlVHlwZSB9IGZyb20gXCIuLi9iaW9tZXNcIjtcclxuXHJcbmZ1bmN0aW9uIGNhcGl0YWxpemUoczogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIChzIHx8IFwiXCIpLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgKHMgfHwgXCJcIikuc2xpY2UoMSk7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2NlbmVDb25maWcge1xyXG4gIHRpbGVTaXplOiBudW1iZXI7XHJcbiAgbWFwV2lkdGg6IG51bWJlcjtcclxuICBtYXBIZWlnaHQ6IG51bWJlcjtcclxuICBwbGF5ZXJTcGVlZDogbnVtYmVyO1xyXG4gIGluaXRpYWxYPzogbnVtYmVyO1xyXG4gIGluaXRpYWxZPzogbnVtYmVyO1xyXG4gIG9uUG9rZW1vblNwb3R0ZWQ/OiAocG9rZW1vbjogeyBuYW1lOiBzdHJpbmc7IHNwcml0ZVVybDogc3RyaW5nOyBwb2tlSWQ6IG51bWJlciB9KSA9PiB2b2lkO1xyXG4gIG9uUG9rZW1vbkNsZWFyZWQ/OiAoKSA9PiB2b2lkO1xyXG4gIG9uU3Bhd25zVXBkYXRlPzogKHNwYXduczogeyBrZXk6IHN0cmluZzsgbmFtZTogc3RyaW5nOyBwb2tlSWQ6IG51bWJlcjsgc3ByaXRlVXJsOiBzdHJpbmc7IHBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0gfVtdKSA9PiB2b2lkO1xyXG4gIHBsYXllclBva2Vtb24/OiBhbnk7IC8vIFNlbGVjdGVkIFBva8OpbW9uIGZvciBiYXR0bGVcclxufVxyXG5cclxudHlwZSBTcGF3blJlY29yZCA9IHtcclxuICBrZXk6IHN0cmluZztcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgcG9rZUlkOiBudW1iZXI7XHJcbiAgZGF0YTogYW55O1xyXG4gIHNwcml0ZTogUGhhc2VyLkdhbWVPYmplY3RzLkltYWdlIHwgbnVsbDtcclxuICBwb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9O1xyXG4gIHNwcml0ZVVybDogc3RyaW5nO1xyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIEdhbWVTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcbiAgcHJpdmF0ZSBjdXJzb3JzPzogUGhhc2VyLlR5cGVzLklucHV0LktleWJvYXJkLkN1cnNvcktleXM7XHJcbiAgcHJpdmF0ZSB3YXNkPzogUmVjb3JkPFwiV1wiIHwgXCJBXCIgfCBcIlNcIiB8IFwiRFwiLCBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5PjtcclxuICBwcml2YXRlIGVudGVyS2V5PzogUGhhc2VyLklucHV0LktleWJvYXJkLktleTtcclxuICBwcml2YXRlIHBsYXllciE6IFBoYXNlci5UeXBlcy5QaHlzaWNzLkFyY2FkZS5TcHJpdGVXaXRoRHluYW1pY0JvZHk7XHJcbiAgcHJpdmF0ZSBncm91bmRMYXllciE6IFBoYXNlci5UaWxlbWFwcy5UaWxlbWFwTGF5ZXI7XHJcbiAgcHJpdmF0ZSBjb25maWdEYXRhOiBTY2VuZUNvbmZpZyA9IHtcclxuICAgIHRpbGVTaXplOiAzMixcclxuICAgIG1hcFdpZHRoOiA1MCxcclxuICAgIG1hcEhlaWdodDogMzgsXHJcbiAgICBwbGF5ZXJTcGVlZDogMjAwLFxyXG4gIH07XHJcbiAgcHJpdmF0ZSBwbGF5ZXJTcGVlZCA9IDIwMDtcclxuICBwcml2YXRlIHNvY2tldD86IFNvY2tldDtcclxuICBwcml2YXRlIG15SWQ/OiBzdHJpbmc7XHJcblxyXG4gIC8vIENhY2hlZCBtYXAgZGltZW5zaW9uc1xyXG4gIHByaXZhdGUgbWFwV2lkdGhUaWxlcyA9IDA7XHJcbiAgcHJpdmF0ZSBtYXBIZWlnaHRUaWxlcyA9IDA7XHJcbiAgcHJpdmF0ZSB0aWxlU2l6ZVB4ID0gMzI7XHJcbiAgcHJpdmF0ZSBvdGhlcnM6IE1hcDxzdHJpbmcsIFBoYXNlci5HYW1lT2JqZWN0cy5TcHJpdGU+ID0gbmV3IE1hcCgpO1xyXG4gIHByaXZhdGUgbGFzdFNlbnQgPSAwO1xyXG5cclxuICAvLyBTcGF3bnMgKG1hbmFnZWQgYnkgU3Bhd25NYW5hZ2VyKVxyXG4gIHByaXZhdGUgc3Bhd25NYW5hZ2VyPzogU3Bhd25NYW5hZ2VyO1xyXG5cclxuICAvLyBVSSAoc2lkZWJhcikgLSByZW1vdmVkIGluIGZhdm9yIG9mIFJlYWN0L05leHQgVUlcclxuICBwcml2YXRlIGxhc3RTdGF0dXNBdCA9IDA7XHJcblxyXG4gIC8vIE1pbmltYXBcclxuICBwcml2YXRlIG1pbmk/OiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xyXG4gIHByaXZhdGUgbWluaUdmeD86IFBoYXNlci5HYW1lT2JqZWN0cy5HcmFwaGljcztcclxuICBwcml2YXRlIG1pbmlNYXJrZXJzPzogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcclxuICBwcml2YXRlIG1pbmlIaWdobGlnaHQ/OiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3M7XHJcbiAgcHJpdmF0ZSBtaW5pQnVpbGRpbmdzPzogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcclxuICBwcml2YXRlIG1pbmlXID0gMTYwO1xyXG4gIHByaXZhdGUgbWluaUggPSAxNjA7XHJcblxyXG4gIC8vIFRvYXN0IG5vdGlmaWNhdGlvblxyXG4gIHByaXZhdGUgdG9hc3Q/OiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dDtcclxuXHJcbiAgLy8gU3RydWN0dXJlc1xyXG4gIHByaXZhdGUgc3RydWN0dXJlczogU3RydWN0dXJlRGVmW10gPSBbXTtcclxuICBwcml2YXRlIGluc2lkZVN0cnVjdHVyZTogeyBhY3RpdmU6IGJvb2xlYW47IHR5cGU6IFN0cnVjdHVyZVR5cGUgfCBudWxsIH0gPSB7IGFjdGl2ZTogZmFsc2UsIHR5cGU6IG51bGwgfTtcclxuXHJcbiAgLy8gRW52aXJvbm1lbnQgb3ZlcmxheSAobm8gcGFydGljbGVzIHRvIGF2b2lkIHJ1bnRpbWUgaW5jb21wYXQpXHJcbiAgcHJpdmF0ZSBlbnZPdmVybGF5PzogUGhhc2VyLkdhbWVPYmplY3RzLlJlY3RhbmdsZTtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcihcIkdhbWVTY2VuZVwiKTtcclxuICB9XHJcblxyXG4gIGluaXQoZGF0YTogUGFydGlhbDxTY2VuZUNvbmZpZz4pIHtcclxuICAgIHRoaXMuY29uZmlnRGF0YSA9IHsgLi4udGhpcy5jb25maWdEYXRhLCAuLi5kYXRhIH0gYXMgU2NlbmVDb25maWc7XHJcbiAgICBpZiAodGhpcy5jb25maWdEYXRhLnBsYXllclNwZWVkKVxyXG4gICAgICB0aGlzLnBsYXllclNwZWVkID0gdGhpcy5jb25maWdEYXRhLnBsYXllclNwZWVkO1xyXG4gIH1cclxuXHJcbiAgcHJlbG9hZCgpIHtcclxuICAgIC8vIEdlbmVyYXRlIGEgc2ltcGxlIDItdGlsZSBzcHJpdGVzaGVldCAoZ3Jhc3MsIHdhbGwpIHByb2dyYW1tYXRpY2FsbHlcclxuICAgIGNvbnN0IHsgdGlsZVNpemUgfSA9IHRoaXMuY29uZmlnRGF0YTtcclxuICAgIGNvbnN0IHdpZHRoID0gdGlsZVNpemUgKiAyO1xyXG4gICAgY29uc3QgaGVpZ2h0ID0gdGlsZVNpemU7XHJcbiAgICBjb25zdCBzaGVldCA9IHRoaXMudGV4dHVyZXMuY3JlYXRlQ2FudmFzKFwidGlsZXNoZWV0XCIsIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgaWYgKCFzaGVldCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gY3JlYXRlIGNhbnZhcyB0ZXh0dXJlICd0aWxlc2hlZXQnXCIpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY3R4ID0gc2hlZXQuZ2V0Q29udGV4dCgpO1xyXG4gICAgaWYgKCFjdHgpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGdldCAyRCByZW5kZXJpbmcgY29udGV4dCBmcm9tIGNhbnZhcyAndGlsZXNoZWV0J1wiKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHcmFzcyB0aWxlIChpbmRleCAwKVxyXG4gICAgY3R4LmZpbGxTdHlsZSA9IFwiIzJkNmE0ZlwiO1xyXG4gICAgY3R4LmZpbGxSZWN0KDAsIDAsIHRpbGVTaXplLCB0aWxlU2l6ZSk7XHJcbiAgICAvLyBzcHJpbmtsZSBkb3RzXHJcbiAgICBjdHguZmlsbFN0eWxlID0gXCIjNDA5MTZjXCI7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDMwOyBpKyspIHtcclxuICAgICAgY29uc3QgeCA9IE1hdGgucmFuZG9tKCkgKiAodGlsZVNpemUgLSAyKTtcclxuICAgICAgY29uc3QgeSA9IE1hdGgucmFuZG9tKCkgKiAodGlsZVNpemUgLSAyKTtcclxuICAgICAgY3R4LmZpbGxSZWN0KHgsIHksIDIsIDIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFdhbGwgdGlsZSAoaW5kZXggMSlcclxuICAgIGN0eC5maWxsU3R5bGUgPSBcIiM2Yzc1N2RcIjtcclxuICAgIGN0eC5maWxsUmVjdCh0aWxlU2l6ZSwgMCwgdGlsZVNpemUsIHRpbGVTaXplKTtcclxuICAgIGN0eC5zdHJva2VTdHlsZSA9IFwiIzQ5NTA1N1wiO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aWxlU2l6ZTsgaSArPSA0KSB7XHJcbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgY3R4Lm1vdmVUbyh0aWxlU2l6ZSwgaSArIDAuNSk7XHJcbiAgICAgIGN0eC5saW5lVG8odGlsZVNpemUgKiAyLCBpICsgMC41KTtcclxuICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNoZWV0LnJlZnJlc2goKTtcclxuXHJcbiAgICAvLyBHZW5lcmF0ZSBhIHBsYXllciB0ZXh0dXJlIChjaXJjbGUpXHJcbiAgICBjb25zdCBnID0gdGhpcy5tYWtlLmdyYXBoaWNzKHsgeDogMCwgeTogMCB9KTtcclxuICAgIGcuZmlsbFN0eWxlKDB4ZmZkMTY2LCAxKTtcclxuICAgIGcuZmlsbENpcmNsZSh0aWxlU2l6ZSAvIDIsIHRpbGVTaXplIC8gMiwgdGlsZVNpemUgKiAwLjQpO1xyXG4gICAgZy5saW5lU3R5bGUoMiwgMHgwNzNiNGMsIDEpO1xyXG4gICAgZy5zdHJva2VDaXJjbGUodGlsZVNpemUgLyAyLCB0aWxlU2l6ZSAvIDIsIHRpbGVTaXplICogMC40KTtcclxuICAgIGcuZ2VuZXJhdGVUZXh0dXJlKFwicGxheWVyXCIsIHRpbGVTaXplLCB0aWxlU2l6ZSk7XHJcbiAgICBnLmRlc3Ryb3koKTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZSgpIHtcclxuICAgIGNvbnN0IHsgdGlsZVNpemUsIG1hcFdpZHRoLCBtYXBIZWlnaHQgfSA9IHRoaXMuY29uZmlnRGF0YTtcclxuICAgIHRoaXMudGlsZVNpemVQeCA9IHRpbGVTaXplO1xyXG4gICAgdGhpcy5tYXBXaWR0aFRpbGVzID0gbWFwV2lkdGg7XHJcbiAgICB0aGlzLm1hcEhlaWdodFRpbGVzID0gbWFwSGVpZ2h0O1xyXG5cclxuICAgIC8vIENyZWF0ZSBhIGJsYW5rIHRpbGVtYXAgYW5kIGEgZHluYW1pYyBsYXllciB1c2luZyBvdXIgZ2VuZXJhdGVkIHNwcml0ZXNoZWV0XHJcbiAgICBjb25zdCBtYXAgPSB0aGlzLm1ha2UudGlsZW1hcCh7XHJcbiAgICAgIHRpbGVXaWR0aDogdGlsZVNpemUsXHJcbiAgICAgIHRpbGVIZWlnaHQ6IHRpbGVTaXplLFxyXG4gICAgICB3aWR0aDogbWFwV2lkdGgsXHJcbiAgICAgIGhlaWdodDogbWFwSGVpZ2h0LFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCB0aWxlc2V0ID0gbWFwLmFkZFRpbGVzZXRJbWFnZShcclxuICAgICAgXCJ0aWxlc1wiLFxyXG4gICAgICBcInRpbGVzaGVldFwiLFxyXG4gICAgICB0aWxlU2l6ZSxcclxuICAgICAgdGlsZVNpemUsXHJcbiAgICAgIDAsXHJcbiAgICAgIDAsXHJcbiAgICApO1xyXG4gICAgaWYgKCF0aWxlc2V0KSB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gY3JlYXRlIHRpbGVzZXQgZnJvbSB0aWxlc2hlZXRcIik7XHJcbiAgICBjb25zdCBsYXllciA9IG1hcC5jcmVhdGVCbGFua0xheWVyKFwiZ3JvdW5kXCIsIHRpbGVzZXQsIDAsIDApO1xyXG4gICAgaWYgKCFsYXllcikgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBibGFuayBncm91bmQgbGF5ZXJcIik7XHJcbiAgICB0aGlzLmdyb3VuZExheWVyID0gbGF5ZXI7XHJcblxyXG4gICAgLy8gRmlsbCBncm91bmQgKGluZGV4IDApIGFuZCBjYXJ2ZSB3YWxscyAoaW5kZXggMSkgYWxvbmcgdGhlIGJvcmRlciArIGEgZmV3IHJhbmRvbSBvYnN0YWNsZXNcclxuICAgIHRoaXMuZ3JvdW5kTGF5ZXIuZmlsbCgwLCAwLCAwLCBtYXBXaWR0aCwgbWFwSGVpZ2h0KTtcclxuICAgIGZvciAobGV0IHggPSAwOyB4IDwgbWFwV2lkdGg7IHgrKykge1xyXG4gICAgICB0aGlzLmdyb3VuZExheWVyLnB1dFRpbGVBdCgxLCB4LCAwKTtcclxuICAgICAgdGhpcy5ncm91bmRMYXllci5wdXRUaWxlQXQoMSwgeCwgbWFwSGVpZ2h0IC0gMSk7XHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IG1hcEhlaWdodDsgeSsrKSB7XHJcbiAgICAgIHRoaXMuZ3JvdW5kTGF5ZXIucHV0VGlsZUF0KDEsIDAsIHkpO1xyXG4gICAgICB0aGlzLmdyb3VuZExheWVyLnB1dFRpbGVBdCgxLCBtYXBXaWR0aCAtIDEsIHkpO1xyXG4gICAgfVxyXG4gICAgLy8gcmFuZG9tIG9ic3RhY2xlc1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLmZsb29yKG1hcFdpZHRoICogbWFwSGVpZ2h0ICogMC4wNSk7IGkrKykge1xyXG4gICAgICBjb25zdCByeCA9IFBoYXNlci5NYXRoLkJldHdlZW4oMSwgbWFwV2lkdGggLSAyKTtcclxuICAgICAgY29uc3QgcnkgPSBQaGFzZXIuTWF0aC5CZXR3ZWVuKDEsIG1hcEhlaWdodCAtIDIpO1xyXG4gICAgICB0aGlzLmdyb3VuZExheWVyLnB1dFRpbGVBdCgxLCByeCwgcnkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEVuYWJsZSBjb2xsaXNpb25zIGZvciB3YWxsIHRpbGVzIChpbmRleCAxKVxyXG4gICAgdGhpcy5ncm91bmRMYXllci5zZXRDb2xsaXNpb24oMSwgdHJ1ZSk7XHJcblxyXG4gICAgLy8gUGxheWVyIHNldHVwXHJcbiAgICBjb25zdCBzdGFydFggPSB0aGlzLmNvbmZpZ0RhdGEuaW5pdGlhbFggPz8gdGlsZVNpemUgKiAyO1xyXG4gICAgY29uc3Qgc3RhcnRZID0gdGhpcy5jb25maWdEYXRhLmluaXRpYWxZID8/IHRpbGVTaXplICogMjtcclxuICAgIHRoaXMucGxheWVyID0gdGhpcy5waHlzaWNzLmFkZC5zcHJpdGUoc3RhcnRYLCBzdGFydFksIFwicGxheWVyXCIpO1xyXG4gICAgdGhpcy5wbGF5ZXIuc2V0RGVwdGgoMTApO1xyXG4gICAgdGhpcy5wbGF5ZXIuc2V0Q29sbGlkZVdvcmxkQm91bmRzKHRydWUpO1xyXG5cclxuICAgIC8vIENhbWVyYSBhbmQgd29ybGQgYm91bmRzXHJcbiAgICBjb25zdCB3b3JsZFdpZHRoID0gbWFwV2lkdGggKiB0aWxlU2l6ZTtcclxuICAgIGNvbnN0IHdvcmxkSGVpZ2h0ID0gbWFwSGVpZ2h0ICogdGlsZVNpemU7XHJcbiAgICB0aGlzLmNhbWVyYXMubWFpbi5zZXRCb3VuZHMoMCwgMCwgd29ybGRXaWR0aCwgd29ybGRIZWlnaHQpO1xyXG4gICAgdGhpcy5jYW1lcmFzLm1haW4uc3RhcnRGb2xsb3codGhpcy5wbGF5ZXIsIHRydWUsIDAuMSwgMC4xKTtcclxuICAgIHRoaXMucGh5c2ljcy53b3JsZC5zZXRCb3VuZHMoMCwgMCwgd29ybGRXaWR0aCwgd29ybGRIZWlnaHQpO1xyXG5cclxuICAgIC8vIENvbGxpZGUgcGxheWVyIHdpdGggd2FsbHNcclxuICAgIHRoaXMucGh5c2ljcy5hZGQuY29sbGlkZXIodGhpcy5wbGF5ZXIsIHRoaXMuZ3JvdW5kTGF5ZXIpO1xyXG5cclxuICAgIC8vIElucHV0XHJcbiAgICB0aGlzLmN1cnNvcnMgPSB0aGlzLmlucHV0LmtleWJvYXJkPy5jcmVhdGVDdXJzb3JLZXlzKCk7XHJcbiAgICB0aGlzLndhc2QgPSB0aGlzLmlucHV0LmtleWJvYXJkPy5hZGRLZXlzKHtcclxuICAgICAgVzogUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzLlcsXHJcbiAgICAgIEE6IFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlcy5BLFxyXG4gICAgICBTOiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuUyxcclxuICAgICAgRDogUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzLkQsXHJcbiAgICB9KSBhcyBSZWNvcmQ8XCJXXCIgfCBcIkFcIiB8IFwiU1wiIHwgXCJEXCIsIFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXk+IHwgdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5lbnRlcktleSA9IHRoaXMuaW5wdXQua2V5Ym9hcmQ/LmFkZEtleShQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuRU5URVIpO1xyXG5cclxuXHJcbiAgICAvLyBNdWx0aXBsYXllciBzb2NrZXQgKGtlcHQgZnJvbSB5b3VyIG9yaWdpbmFsKVxyXG4gICAgdGhpcy5pbml0TXVsdGlwbGF5ZXIoKTtcclxuXHJcbiAgICAvLyBFbnZpcm9ubWVudCBvdmVybGF5XHJcbiAgICB0aGlzLmVudk92ZXJsYXkgPSB0aGlzLmFkZC5yZWN0YW5nbGUoMCwgMCwgdGhpcy5zY2FsZS53aWR0aCwgdGhpcy5zY2FsZS5oZWlnaHQsIDB4ZmZmZmZmLCAwLjA4KS5zZXRPcmlnaW4oMCkuc2V0U2Nyb2xsRmFjdG9yKDApLnNldERlcHRoKDkwMCk7XHJcblxyXG4gICAgLy8gTWluaW1hcCBvdmVybGF5IChubyBncmlkIGxpbmVzKVxyXG4gICAgdGhpcy5jcmVhdGVNaW5pTWFwKCk7XHJcblxyXG4gICAgLy8gWm9uZS1hd2FyZSBzcGF3biBtYW5hZ2VyXHJcbiAgICB0aGlzLnNwYXduTWFuYWdlciA9IG5ldyBTcGF3bk1hbmFnZXIodGhpcywgdGlsZVNpemUsIG1hcFdpZHRoLCBtYXBIZWlnaHQpO1xyXG4gICAgdGhpcy5zcGF3bk1hbmFnZXIub24oXCJzcGF3bmVkXCIsIChyZWM6IGFueSkgPT4ge1xyXG4gICAgICB0aGlzLmFkZE1pbmlNYXJrZXIocmVjLmtleSwgcmVjLnBvc2l0aW9uLngsIHJlYy5wb3NpdGlvbi55KTtcclxuICAgICAgdGhpcy5zdGF0dXNPbmNlKGBBIHdpbGQgJHtjYXBpdGFsaXplKHJlYy5uYW1lKX0gYXBwZWFyZWQgbmVhciB5b3UhYCwgODAwKTtcclxuICAgICAgdGhpcy5jb25maWdEYXRhLm9uUG9rZW1vblNwb3R0ZWQ/Lih7IG5hbWU6IHJlYy5uYW1lLCBzcHJpdGVVcmw6IHJlYy5zcHJpdGVVcmwsIHBva2VJZDogcmVjLnBva2VJZCB9KTtcclxuICAgICAgdGhpcy5wdXNoU3Bhd25zVG9VSSgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLnNwYXduTWFuYWdlci5vbihcImRlc3Bhd25lZFwiLCAoX2tleTogc3RyaW5nKSA9PiB7XHJcbiAgICAgIHRoaXMucmVtb3ZlTWluaU1hcmtlcihfa2V5KTtcclxuICAgICAgaWYgKHRoaXMuc3Bhd25NYW5hZ2VyIS5nZXRBY3RpdmVTcGF3bnMoKS5sZW5ndGggPT09IDApIHRoaXMuY29uZmlnRGF0YS5vblBva2Vtb25DbGVhcmVkPy4oKTtcclxuICAgICAgdGhpcy5wdXNoU3Bhd25zVG9VSSgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLnNwYXduTWFuYWdlci5vbihcInNwYXduQ2xpY2tlZFwiLCBhc3luYyAoa2V5OiBzdHJpbmcpID0+IHtcclxuICAgICAgYXdhaXQgdGhpcy5zdGFydEJhdHRsZUZyb21LZXkoa2V5KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5zcGF3bk1hbmFnZXIub24oXCJ6b25lQ2hhbmdlZFwiLCAoejogYW55KSA9PiB7XHJcbiAgICAgIHRoaXMuaGlnaGxpZ2h0TWluaVpvbmUoKTtcclxuICAgICAgY29uc3QgY3p4ID0gKHouY29sICogWk9ORV9USUxFUyArIFpPTkVfVElMRVMgLyAyKSAqIHRpbGVTaXplO1xyXG4gICAgICBjb25zdCBjenkgPSAoei5yb3cgKiBaT05FX1RJTEVTICsgWk9ORV9USUxFUyAvIDIpICogdGlsZVNpemU7XHJcbiAgICAgIGNvbnN0IGNhbSA9IHRoaXMuY2FtZXJhcy5tYWluO1xyXG4gICAgICBjYW0uc3RvcEZvbGxvdygpO1xyXG4gICAgICBjYW0ucGFuKGN6eCwgY3p5LCAzMDAsIFwiU2luZS5lYXNlSW5PdXRcIiwgdHJ1ZSwgKGNhbWVyYTogYW55LCBwcm9ncmVzczogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgaWYgKHByb2dyZXNzID09PSAxKSBjYW0uc3RhcnRGb2xsb3codGhpcy5wbGF5ZXIsIHRydWUsIDAuMSwgMC4xKTtcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIGFwcGx5IGJpb21lIGVudmlyb25tZW50IHRpbnRcclxuICAgICAgY29uc3Qgem9uZXMgPSBnZW5lcmF0ZVpvbmVzKE1hdGguZmxvb3IodGhpcy5tYXBXaWR0aFRpbGVzIC8gWk9ORV9USUxFUyksIE1hdGguZmxvb3IodGhpcy5tYXBIZWlnaHRUaWxlcyAvIFpPTkVfVElMRVMpKTtcclxuICAgICAgY29uc3QgbWV0YSA9IHpvbmVzLmZpbmQoKHEpID0+IHEuaWQgPT09IGAke3ouY29sfSwke3oucm93fWApO1xyXG4gICAgICBpZiAobWV0YSkgdGhpcy5hcHBseUJpb21lKG1ldGEuYmlvbWUgYXMgQmlvbWVJZCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuZ2VuZXJhdGVTdHJ1Y3R1cmVzKCk7XHJcbiAgICB0aGlzLnNwYXduTWFuYWdlci5zdGFydCgpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKCkge1xyXG4gICAgaWYgKCF0aGlzLnBsYXllciB8fCAhdGhpcy5wbGF5ZXIuYm9keSkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IHNwZWVkOiBudW1iZXIgPSB0aGlzLnBsYXllclNwZWVkO1xyXG4gICAgbGV0IHZ4ID0gMDtcclxuICAgIGxldCB2eSA9IDA7XHJcblxyXG4gICAgLy8gQXJyb3cga2V5c1xyXG4gICAgaWYgKHRoaXMuY3Vyc29ycz8ubGVmdD8uaXNEb3duKSB2eCAtPSAxO1xyXG4gICAgaWYgKHRoaXMuY3Vyc29ycz8ucmlnaHQ/LmlzRG93bikgdnggKz0gMTtcclxuICAgIGlmICh0aGlzLmN1cnNvcnM/LnVwPy5pc0Rvd24pIHZ5IC09IDE7XHJcbiAgICBpZiAodGhpcy5jdXJzb3JzPy5kb3duPy5pc0Rvd24pIHZ5ICs9IDE7XHJcblxyXG4gICAgLy8gV0FTRFxyXG4gICAgaWYgKHRoaXMud2FzZD8uQT8uaXNEb3duKSB2eCAtPSAxO1xyXG4gICAgaWYgKHRoaXMud2FzZD8uRD8uaXNEb3duKSB2eCArPSAxO1xyXG4gICAgaWYgKHRoaXMud2FzZD8uVz8uaXNEb3duKSB2eSAtPSAxO1xyXG4gICAgaWYgKHRoaXMud2FzZD8uUz8uaXNEb3duKSB2eSArPSAxO1xyXG5cclxuICAgIGNvbnN0IGJvZHkgPSB0aGlzLnBsYXllci5ib2R5IGFzIFBoYXNlci5QaHlzaWNzLkFyY2FkZS5Cb2R5O1xyXG5cclxuICAgIGlmICh2eCA9PT0gMCAmJiB2eSA9PT0gMCkge1xyXG4gICAgICBib2R5LnNldFZlbG9jaXR5KDAsIDApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgbGVuID0gTWF0aC5oeXBvdCh2eCwgdnkpIHx8IDE7XHJcbiAgICAgIGJvZHkuc2V0VmVsb2NpdHkoKHZ4IC8gbGVuKSAqIHNwZWVkLCAodnkgLyBsZW4pICogc3BlZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEtlZXAgVUkgKyBtaW5pbWFwIHBpbm5lZFxyXG4gICAgaWYgKHRoaXMubWluaSkgdGhpcy5taW5pLnNldFNjcm9sbEZhY3RvcigwKTtcclxuXHJcbiAgICAvLyBUaHJvdHRsZWQgcG9zaXRpb24gc3luYyAobXVsdGlwbGF5ZXIpXHJcbiAgICBjb25zdCBub3cgPSB0aGlzLnRpbWUubm93O1xyXG4gICAgaWYgKHRoaXMuc29ja2V0ICYmIG5vdyAtIHRoaXMubGFzdFNlbnQgPiAxMDApIHtcclxuICAgICAgdGhpcy5zb2NrZXQuZW1pdChcIm1vdmVcIiwgeyB4OiB0aGlzLnBsYXllci54LCB5OiB0aGlzLnBsYXllci55IH0pO1xyXG4gICAgICB0aGlzLmxhc3RTZW50ID0gbm93O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSB6b25lIHRyYWNraW5nIGZvciBzcGF3bnMvbWluaW1hcFxyXG4gICAgdGhpcy5zcGF3bk1hbmFnZXI/LnVwZGF0ZVBsYXllclBvcyh0aGlzLnBsYXllci54LCB0aGlzLnBsYXllci55KTtcclxuXHJcbiAgICAvLyBCYXR0bGUgd2hlbiBuZWFyIGFuZCBFbnRlciBwcmVzc2VkIChjb21wYXQpXHJcbiAgICBpZiAodGhpcy5lbnRlcktleSAmJiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuSnVzdERvd24odGhpcy5lbnRlcktleSkpIHtcclxuICAgICAgY29uc3QgbmVhcmVzdCA9IHRoaXMuZ2V0TmVhcmVzdEFjdGl2ZSg2NCk7XHJcbiAgICAgIGlmIChuZWFyZXN0KSB0aGlzLnN0YXJ0QmF0dGxlRnJvbUtleShuZWFyZXN0LmtleSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gLS0tLSBVSSBoZWxwZXJzIC0tLS1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0dXNPbmNlKF90ZXh0OiBzdHJpbmcsIGNvb2xkb3duTXMgPSA4MDApIHtcclxuICAgIGNvbnN0IG5vdyA9IHRoaXMudGltZS5ub3c7XHJcbiAgICBpZiAobm93IC0gdGhpcy5sYXN0U3RhdHVzQXQgPCBjb29sZG93bk1zKSByZXR1cm47XHJcbiAgICB0aGlzLmxhc3RTdGF0dXNBdCA9IG5vdztcclxuICAgIC8vIFJlYWN0IHNpZGViYXIgbm93IGhhbmRsZXMgbWVzc2FnaW5nXHJcbiAgfVxyXG5cclxuICAvLyAtLS0tIE11bHRpcGxheWVyIChrZXB0KSAtLS0tXHJcbiAgcHJpdmF0ZSBpbml0TXVsdGlwbGF5ZXIoKSB7XHJcbiAgICBpZiAodGhpcy5zb2NrZXQpIHJldHVybjsgLy8gYWxyZWFkeSBjb25uZWN0ZWRcclxuXHJcbiAgICBjb25zdCBzb2NrZXQgPSBpbyhcImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMFwiLCB7XHJcbiAgICAgIHRyYW5zcG9ydHM6IFtcIndlYnNvY2tldFwiXSxcclxuICAgICAgYXV0b0Nvbm5lY3Q6IHRydWUsXHJcbiAgICB9KTtcclxuICAgIHRoaXMuc29ja2V0ID0gc29ja2V0O1xyXG5cclxuICAgIHNvY2tldC5vbihcImNvbm5lY3RcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLm15SWQgPSBzb2NrZXQuaWQ7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzb2NrZXQub24oXHJcbiAgICAgIFwiaW5pdFN0YXRlXCIsXHJcbiAgICAgIChwYXlsb2FkOiB7IHBsYXllcnM6IFJlY29yZDxzdHJpbmcsIHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfT4gfSkgPT4ge1xyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHBheWxvYWQucGxheWVycykuZm9yRWFjaCgoW2lkLCBwb3NdKSA9PiB7XHJcbiAgICAgICAgICBpZiAoaWQgPT09IHRoaXMubXlJZCkgcmV0dXJuO1xyXG4gICAgICAgICAgdGhpcy5zcGF3bk90aGVyKGlkLCBwb3MueCwgcG9zLnkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgKTtcclxuXHJcbiAgICBzb2NrZXQub24oXHJcbiAgICAgIFwicGxheWVySm9pbmVkXCIsXHJcbiAgICAgICh7IGlkLCB4LCB5IH06IHsgaWQ6IHN0cmluZzsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSkgPT4ge1xyXG4gICAgICAgIGlmIChpZCA9PT0gdGhpcy5teUlkKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5zcGF3bk90aGVyKGlkLCB4LCB5KTtcclxuICAgICAgfSxcclxuICAgICk7XHJcblxyXG4gICAgc29ja2V0Lm9uKFxyXG4gICAgICBcInBsYXllck1vdmVkXCIsXHJcbiAgICAgICh7IGlkLCB4LCB5IH06IHsgaWQ6IHN0cmluZzsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHNwcml0ZSA9IHRoaXMub3RoZXJzLmdldChpZCk7XHJcbiAgICAgICAgaWYgKHNwcml0ZSkge1xyXG4gICAgICAgICAgc3ByaXRlLnggPSB4O1xyXG4gICAgICAgICAgc3ByaXRlLnkgPSB5O1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICk7XHJcblxyXG4gICAgc29ja2V0Lm9uKFwicGxheWVyTGVmdFwiLCAoeyBpZCB9OiB7IGlkOiBzdHJpbmcgfSkgPT4ge1xyXG4gICAgICBjb25zdCBzcHJpdGUgPSB0aGlzLm90aGVycy5nZXQoaWQpO1xyXG4gICAgICBpZiAoc3ByaXRlKSB7XHJcbiAgICAgICAgc3ByaXRlLmRlc3Ryb3koKTtcclxuICAgICAgICB0aGlzLm90aGVycy5kZWxldGUoaWQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmV2ZW50cy5vbmNlKFBoYXNlci5TY2VuZXMuRXZlbnRzLlNIVVRET1dOLCAoKSA9PiB7XHJcbiAgICAgIHNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcclxuICAgICAgc29ja2V0LmRpc2Nvbm5lY3QoKTtcclxuICAgICAgdGhpcy5zb2NrZXQgPSB1bmRlZmluZWQ7XHJcbiAgICAgIHRoaXMubXlJZCA9IHVuZGVmaW5lZDtcclxuICAgICAgdGhpcy5vdGhlcnMuZm9yRWFjaCgocykgPT4gcy5kZXN0cm95KCkpO1xyXG4gICAgICB0aGlzLm90aGVycy5jbGVhcigpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNwYXduT3RoZXIoaWQ6IHN0cmluZywgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIGNvbnN0IHMgPSB0aGlzLmFkZC5zcHJpdGUoeCwgeSwgXCJwbGF5ZXJcIikuc2V0VGludCgweDExOGFiMik7XHJcbiAgICBzLnNldERlcHRoKDUpO1xyXG4gICAgdGhpcy5vdGhlcnMuc2V0KGlkLCBzKTtcclxuICB9XHJcblxyXG4gIC8vIC0tLS0gTWluaW1hcCAtLS0tXHJcbiAgcHJpdmF0ZSBjcmVhdGVNaW5pTWFwKCkge1xyXG4gICAgLy8gUGxhY2UgdG9wLWxlZnQgaW5zaWRlIGdhbWVwbGF5IGFyZWEgKGF3YXkgZnJvbSByaWdodCBzaWRlYmFyKVxyXG4gICAgY29uc3QgYmFzZVggPSAxMjtcclxuICAgIGNvbnN0IGJhc2VZID0gMTI7XHJcbiAgICB0aGlzLm1pbmkgPSB0aGlzLmFkZC5jb250YWluZXIoYmFzZVgsIGJhc2VZKS5zZXREZXB0aCgxMDAwKTtcclxuICAgIHRoaXMubWluaS5zZXRTY3JvbGxGYWN0b3IoMCk7XHJcblxyXG4gICAgY29uc3QgYmcgPSB0aGlzLmFkZC5yZWN0YW5nbGUoMCwgMCwgdGhpcy5taW5pVywgdGhpcy5taW5pSCwgMHgxMTExMTEsIDAuNikuc2V0T3JpZ2luKDApO1xyXG4gICAgdGhpcy5taW5pR2Z4ID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcclxuICAgIHRoaXMubWluaU1hcmtlcnMgPSB0aGlzLmFkZC5jb250YWluZXIoMCwgMCk7XHJcbiAgICB0aGlzLm1pbmlCdWlsZGluZ3MgPSB0aGlzLmFkZC5jb250YWluZXIoMCwgMCk7XHJcbiAgICB0aGlzLm1pbmlIaWdobGlnaHQgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xyXG5cclxuICAgIC8vIG5vIGdyaWQgbGluZXMgdG8ga2VlcCB6b25lcyBpbnZpc2libGVcclxuICAgIGNvbnN0IGNvbHMgPSBNYXRoLm1heCgxLCBNYXRoLmZsb29yKHRoaXMubWFwV2lkdGhUaWxlcyAvIFpPTkVfVElMRVMpKTtcclxuICAgIGNvbnN0IHJvd3MgPSBNYXRoLm1heCgxLCBNYXRoLmZsb29yKHRoaXMubWFwSGVpZ2h0VGlsZXMgLyBaT05FX1RJTEVTKSk7XHJcbiAgICB0aGlzLm1pbmlHZnguY2xlYXIoKTtcclxuICAgIHRoaXMubWluaUdmeC5saW5lU3R5bGUoMSwgMHgzMzMzMzMsIDAuOCk7XHJcbiAgICB0aGlzLm1pbmlHZnguc3Ryb2tlUmVjdCgwLCAwLCB0aGlzLm1pbmlXLCB0aGlzLm1pbmlIKTtcclxuXHJcbiAgICAvLyBjbGlja2FibGUgem9uZVxyXG4gICAgY29uc3QgaGl0ID0gdGhpcy5hZGQuem9uZSgwLCAwLCB0aGlzLm1pbmlXLCB0aGlzLm1pbmlIKS5zZXRPcmlnaW4oMCkuc2V0SW50ZXJhY3RpdmUoeyB1c2VIYW5kQ3Vyc29yOiB0cnVlIH0pO1xyXG4gICAgaGl0Lm9uKCdwb2ludGVyZG93bicsIChfcG9pbnRlcjogYW55LCBsb2NhbFg6IG51bWJlciwgbG9jYWxZOiBudW1iZXIpID0+IHtcclxuICAgICAgY29uc3QgemMgPSBNYXRoLmZsb29yKGxvY2FsWCAvICh0aGlzLm1pbmlXIC8gY29scykpO1xyXG4gICAgICBjb25zdCB6ciA9IE1hdGguZmxvb3IobG9jYWxZIC8gKHRoaXMubWluaUggLyByb3dzKSk7XHJcbiAgICAgIGNvbnN0IGN4ID0gKHpjICogWk9ORV9USUxFUyArIFpPTkVfVElMRVMgLyAyKSAqIHRoaXMudGlsZVNpemVQeDtcclxuICAgICAgY29uc3QgY3kgPSAoenIgKiBaT05FX1RJTEVTICsgWk9ORV9USUxFUyAvIDIpICogdGhpcy50aWxlU2l6ZVB4O1xyXG4gICAgICBjb25zdCBjYW0gPSB0aGlzLmNhbWVyYXMubWFpbjtcclxuICAgICAgY2FtLnN0b3BGb2xsb3coKTtcclxuICAgICAgY2FtLnBhbihjeCwgY3ksIDMwMCwgJ1NpbmUuZWFzZUluT3V0JywgdHJ1ZSwgKGNhbWVyYTogYW55LCBwcm9ncmVzczogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgaWYgKHByb2dyZXNzID09PSAxKSBjYW0uc3RhcnRGb2xsb3codGhpcy5wbGF5ZXIsIHRydWUsIDAuMSwgMC4xKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLm1pbmkuYWRkKFtiZywgdGhpcy5taW5pR2Z4LCB0aGlzLm1pbmlIaWdobGlnaHQsIHRoaXMubWluaUJ1aWxkaW5ncywgdGhpcy5taW5pTWFya2VycywgaGl0XSk7XHJcbiAgICB0aGlzLmhpZ2hsaWdodE1pbmlab25lKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGhpZ2hsaWdodE1pbmlab25lKCkge1xyXG4gICAgaWYgKCF0aGlzLm1pbmlIaWdobGlnaHQpIHJldHVybjtcclxuICAgIGNvbnN0IGdyaWQgPSB0aGlzLnNwYXduTWFuYWdlcj8uZ2V0Wm9uZUdyaWQoKTtcclxuICAgIGNvbnN0IGNvbHMgPSBncmlkPy5jb2xzID8/IE1hdGgubWF4KDEsIE1hdGguZmxvb3IodGhpcy5tYXBXaWR0aFRpbGVzIC8gWk9ORV9USUxFUykpO1xyXG4gICAgY29uc3Qgcm93cyA9IGdyaWQ/LnJvd3MgPz8gTWF0aC5tYXgoMSwgTWF0aC5mbG9vcih0aGlzLm1hcEhlaWdodFRpbGVzIC8gWk9ORV9USUxFUykpO1xyXG4gICAgY29uc3QgY3VyID0gdGhpcy5zcGF3bk1hbmFnZXI/LmdldEN1cnJlbnRab25lKCk7XHJcbiAgICBpZiAoIWN1cikgcmV0dXJuO1xyXG4gICAgY29uc3QgY3cgPSB0aGlzLm1pbmlXIC8gY29scztcclxuICAgIGNvbnN0IGNoID0gdGhpcy5taW5pSCAvIHJvd3M7XHJcbiAgICB0aGlzLm1pbmlIaWdobGlnaHQuY2xlYXIoKTtcclxuICAgIHRoaXMubWluaUhpZ2hsaWdodC5saW5lU3R5bGUoMiwgMHhmZmZmNjYsIDEpO1xyXG4gICAgdGhpcy5taW5pSGlnaGxpZ2h0LnN0cm9rZVJlY3QoY3VyLmNvbCAqIGN3LCBjdXIucm93ICogY2gsIGN3LCBjaCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHdvcmxkVG9NaW5pKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBzeCA9IHRoaXMubWluaVcgLyAodGhpcy5tYXBXaWR0aFRpbGVzICogdGhpcy50aWxlU2l6ZVB4KTtcclxuICAgIGNvbnN0IHN5ID0gdGhpcy5taW5pSCAvICh0aGlzLm1hcEhlaWdodFRpbGVzICogdGhpcy50aWxlU2l6ZVB4KTtcclxuICAgIHJldHVybiB7IHg6IHggKiBzeCwgeTogeSAqIHN5IH07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFkZE1pbmlNYXJrZXIoa2V5OiBzdHJpbmcsIHd4OiBudW1iZXIsIHd5OiBudW1iZXIpIHtcclxuICAgIGlmICghdGhpcy5taW5pTWFya2VycykgcmV0dXJuO1xyXG4gICAgY29uc3QgcHQgPSB0aGlzLndvcmxkVG9NaW5pKHd4LCB3eSk7XHJcbiAgICBjb25zdCBkb3QgPSB0aGlzLmFkZC5yZWN0YW5nbGUocHQueCwgcHQueSwgNCwgNCwgMHhmZmZmZmYsIDEpLnNldE9yaWdpbigwLjUpO1xyXG4gICAgKGRvdCBhcyBhbnkpLm5hbWUgPSBrZXk7XHJcbiAgICB0aGlzLm1pbmlNYXJrZXJzLmFkZChkb3QpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZW1vdmVNaW5pTWFya2VyKGtleTogc3RyaW5nKSB7XHJcbiAgICBpZiAoIXRoaXMubWluaU1hcmtlcnMpIHJldHVybjtcclxuICAgIGNvbnN0IGxpc3QgPSAodGhpcy5taW5pTWFya2VycyBhcyBhbnkpLmxpc3QgYXMgUGhhc2VyLkdhbWVPYmplY3RzLkdhbWVPYmplY3RbXTtcclxuICAgIGNvbnN0IGZvdW5kID0gbGlzdC5maW5kKChjaDogYW55KSA9PiBjaC5uYW1lID09PSBrZXkpO1xyXG4gICAgaWYgKGZvdW5kKSBmb3VuZC5kZXN0cm95KCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldE5lYXJlc3RBY3RpdmUocmFkaXVzOiBudW1iZXIpOiBhbnkgfCBudWxsIHtcclxuICAgIGlmICghdGhpcy5zcGF3bk1hbmFnZXIpIHJldHVybiBudWxsO1xyXG4gICAgbGV0IGJlc3Q6IGFueSA9IG51bGw7XHJcbiAgICBsZXQgYmVzdEQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XHJcbiAgICB0aGlzLnNwYXduTWFuYWdlci5nZXRBY3RpdmVTcGF3bnMoKS5mb3JFYWNoKChyZWM6IGFueSkgPT4ge1xyXG4gICAgICBjb25zdCBkID0gUGhhc2VyLk1hdGguRGlzdGFuY2UuQmV0d2Vlbih0aGlzLnBsYXllci54LCB0aGlzLnBsYXllci55LCByZWMucG9zaXRpb24ueCwgcmVjLnBvc2l0aW9uLnkpO1xyXG4gICAgICBpZiAoZCA8IHJhZGl1cyAmJiBkIDwgYmVzdEQpIHsgYmVzdEQgPSBkOyBiZXN0ID0gcmVjOyB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBiZXN0O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBzdGFydEJhdHRsZUZyb21LZXkoa2V5OiBzdHJpbmcpIHtcclxuICAgIGlmICghdGhpcy5zcGF3bk1hbmFnZXIpIHJldHVybjtcclxuICAgIGNvbnN0IHJlYyA9IHRoaXMuc3Bhd25NYW5hZ2VyLmdldEFjdGl2ZVNwYXducygpLmZpbmQociA9PiByLmtleSA9PT0ga2V5KTtcclxuICAgIGlmICghcmVjKSByZXR1cm47XHJcbiAgICBpZiAoIXRoaXMuY29uZmlnRGF0YS5wbGF5ZXJQb2tlbW9uKSB7XHJcbiAgICAgIHRoaXMuc3RhdHVzT25jZSgnWW91IG5lZWQgYSBQb2vDqW1vbiB0byBiYXR0bGUhJywgODAwKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcG9rZVJlcyA9IGF3YWl0IGZldGNoKGBodHRwczovL3Bva2VhcGkuY28vYXBpL3YyL3Bva2Vtb24vJHtyZWMucG9rZUlkfWApO1xyXG4gICAgICBjb25zdCBwb2tlRGF0YSA9IGF3YWl0IHBva2VSZXMuanNvbigpO1xyXG4gICAgICB0aGlzLnNwYXduTWFuYWdlci5kZXNwYXduKGtleSk7XHJcbiAgICAgIHRoaXMuc2NlbmUuc3RhcnQoJ0JhdHRsZVNjZW5lJywge1xyXG4gICAgICAgIHdpbGRQb2tlbW9uOiB7XHJcbiAgICAgICAgICBuYW1lOiByZWMubmFtZSxcclxuICAgICAgICAgIHBva2VJZDogcmVjLnBva2VJZCxcclxuICAgICAgICAgIGRhdGE6IHBva2VEYXRhLFxyXG4gICAgICAgICAgc3ByaXRlVXJsOiByZWMuc3ByaXRlVXJsLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcGxheWVyUG9rZW1vbjogdGhpcy5jb25maWdEYXRhLnBsYXllclBva2Vtb24sXHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCB7fVxyXG4gIH1cclxuXHJcbiAgLy8gLS0tLSBTdHJ1Y3R1cmVzIC0tLS1cclxuICBwcml2YXRlIGdlbmVyYXRlU3RydWN0dXJlcygpIHtcclxuICAgIGNvbnN0IGNvbHMgPSBNYXRoLm1heCgxLCBNYXRoLmZsb29yKHRoaXMubWFwV2lkdGhUaWxlcyAvIFpPTkVfVElMRVMpKTtcclxuICAgIGNvbnN0IHJvd3MgPSBNYXRoLm1heCgxLCBNYXRoLmZsb29yKHRoaXMubWFwSGVpZ2h0VGlsZXMgLyBaT05FX1RJTEVTKSk7XHJcbiAgICBjb25zdCB6b25lcyA9IGdlbmVyYXRlWm9uZXMoY29scywgcm93cyk7XHJcbiAgICBjb25zdCBjaG9vc2UgPSA8VCw+KGFycjogVFtdKSA9PiBhcnJbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyLmxlbmd0aCldO1xyXG4gICAgY29uc3QgYnlCaW9tZTogUmVjb3JkPHN0cmluZywgU3RydWN0dXJlVHlwZVtdPiA9IHtcclxuICAgICAgY2l0eTogW1wibGFiXCIsIFwiaG91c2VcIl0sXHJcbiAgICAgIG1vdW50YWluOiBbXCJ0ZW1wbGVcIiwgXCJob3VzZVwiXSxcclxuICAgICAgZm9yZXN0OiBbXCJob3VzZVwiLCBcInRvd2VyXCJdLFxyXG4gICAgICBkZXNlcnQ6IFtcInRlbXBsZVwiXSxcclxuICAgICAgbGFrZTogW1widG93ZXJcIl0sXHJcbiAgICAgIGdyYXNzbGFuZDogW1wiaG91c2VcIl0sXHJcbiAgICAgIGNhdmU6IFtcInRvd2VyXCJdLFxyXG4gICAgICBzbm93ZmllbGQ6IFtcImhvdXNlXCIsIFwidGVtcGxlXCJdLFxyXG4gICAgfSBhcyBhbnk7XHJcblxyXG4gICAgdGhpcy5zdHJ1Y3R1cmVzID0gW107XHJcbiAgICB6b25lcy5mb3JFYWNoKCh6KSA9PiB7XHJcbiAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC4xMikgcmV0dXJuOyAvLyB+MTIlIG9mIHpvbmVzIGhhdmUgYSBidWlsZGluZ1xyXG4gICAgICBjb25zdCB0eXBlcyA9IGJ5QmlvbWVbei5iaW9tZV0gfHwgW1wiaG91c2VcIl07XHJcbiAgICAgIGNvbnN0IHR5cGUgPSBjaG9vc2UodHlwZXMpO1xyXG4gICAgICBjb25zdCBzdGFydFggPSB6LmNvbCAqIFpPTkVfVElMRVMgKiB0aGlzLnRpbGVTaXplUHg7XHJcbiAgICAgIGNvbnN0IHN0YXJ0WSA9IHoucm93ICogWk9ORV9USUxFUyAqIHRoaXMudGlsZVNpemVQeDtcclxuICAgICAgY29uc3QgeCA9IHN0YXJ0WCArIDE2ICsgTWF0aC5yYW5kb20oKSAqIChaT05FX1RJTEVTICogdGhpcy50aWxlU2l6ZVB4IC0gMzIpO1xyXG4gICAgICBjb25zdCB5ID0gc3RhcnRZICsgMTYgKyBNYXRoLnJhbmRvbSgpICogKFpPTkVfVElMRVMgKiB0aGlzLnRpbGVTaXplUHggLSAzMik7XHJcbiAgICAgIGNvbnN0IGlkID0gYGItJHt6LmlkfS0ke3R5cGV9LSR7TWF0aC5mbG9vcih4KX0tJHtNYXRoLmZsb29yKHkpfWA7XHJcbiAgICAgIHRoaXMuc3RydWN0dXJlcy5wdXNoKHsgaWQsIHR5cGUsIGNvbDogei5jb2wsIHJvdzogei5yb3csIHgsIHkgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyByZW5kZXJcclxuICAgIHRoaXMuc3RydWN0dXJlcy5mb3JFYWNoKChzKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbG9yID0gcy50eXBlID09PSBcImxhYlwiID8gMHhjZmUzZmYgOiBzLnR5cGUgPT09IFwidG93ZXJcIiA/IDB4NmI0ZTliIDogcy50eXBlID09PSBcInRlbXBsZVwiID8gMHhjMmIyODAgOiAweGQzZDNkMztcclxuICAgICAgY29uc3QgYnVpbGRpbmcgPSB0aGlzLmFkZC5yZWN0YW5nbGUocy54LCBzLnksIDMyLCAyNCwgY29sb3IsIDEpLnNldE9yaWdpbigwLjUpLnNldERlcHRoKDE1KTtcclxuICAgICAgdGhpcy5waHlzaWNzLmFkZC5leGlzdGluZyhidWlsZGluZywgdHJ1ZSk7XHJcbiAgICAgIGNvbnN0IGRvb3IgPSB0aGlzLmFkZC5yZWN0YW5nbGUocy54LCBzLnkgKyAxMiwgMTAsIDYsIDB4MDAwMDAwLCAwLjgpLnNldERlcHRoKDE2KTtcclxuICAgICAgdGhpcy5waHlzaWNzLmFkZC5leGlzdGluZyhkb29yLCB0cnVlKTtcclxuICAgICAgdGhpcy5waHlzaWNzLmFkZC5vdmVybGFwKHRoaXMucGxheWVyLCBkb29yLCAoKSA9PiB0aGlzLmVudGVyU3RydWN0dXJlKHMpKTtcclxuICAgICAgLy8gbWluaW1hcCBtYXJrZXJcclxuICAgICAgaWYgKHRoaXMubWluaUJ1aWxkaW5ncykge1xyXG4gICAgICAgIGNvbnN0IHB0ID0gdGhpcy53b3JsZFRvTWluaShzLngsIHMueSk7XHJcbiAgICAgICAgY29uc3Qgc3EgPSB0aGlzLmFkZC5yZWN0YW5nbGUocHQueCwgcHQueSwgNSwgNSwgMHhmZmUwNjYsIDEpLnNldE9yaWdpbigwLjUpO1xyXG4gICAgICAgIHRoaXMubWluaUJ1aWxkaW5ncy5hZGQoc3EpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZW50ZXJTdHJ1Y3R1cmUoczogU3RydWN0dXJlRGVmKSB7XHJcbiAgICBpZiAodGhpcy5pbnNpZGVTdHJ1Y3R1cmUuYWN0aXZlKSByZXR1cm47XHJcbiAgICB0aGlzLmluc2lkZVN0cnVjdHVyZSA9IHsgYWN0aXZlOiB0cnVlLCB0eXBlOiBzLnR5cGUgfSBhcyBhbnk7XHJcbiAgICAvLyBvdmVycmlkZSBzcGF3biBwb29sIGJhc2VkIG9uIHN0cnVjdHVyZSAtPiB1c2UgQklPTUVTIG1hcHBpbmdcclxuICAgIGNvbnN0IGIgPSBzLnR5cGUgPT09IFwidG93ZXJcIiA/IEJJT01FUy50b3dlciA6IHMudHlwZSA9PT0gXCJsYWJcIiA/IEJJT01FUy5sYWIgOiBCSU9NRVMudGVtcGxlO1xyXG4gICAgdGhpcy5hcHBseUJpb21lKGIuaWQpO1xyXG4gICAgdGhpcy5zcGF3bk1hbmFnZXI/LnNldE92ZXJyaWRlVHlwZXMoYi5wb2tlbW9uUG9vbCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGV4aXRTdHJ1Y3R1cmUoKSB7XHJcbiAgICBpZiAoIXRoaXMuaW5zaWRlU3RydWN0dXJlLmFjdGl2ZSkgcmV0dXJuO1xyXG4gICAgdGhpcy5pbnNpZGVTdHJ1Y3R1cmUgPSB7IGFjdGl2ZTogZmFsc2UsIHR5cGU6IG51bGwgfSBhcyBhbnk7XHJcbiAgICAvLyBjbGVhciBvdmVycmlkZSBhbmQgcmUtYXBwbHkgem9uZSBiaW9tZSBjb2xvclxyXG4gICAgdGhpcy5zcGF3bk1hbmFnZXI/LnNldE92ZXJyaWRlVHlwZXMobnVsbCk7XHJcbiAgICBjb25zdCBjdXIgPSB0aGlzLnNwYXduTWFuYWdlcj8uZ2V0Q3VycmVudFpvbmUoKTtcclxuICAgIGlmIChjdXIpIHtcclxuICAgICAgY29uc3Qgem9uZXMgPSBnZW5lcmF0ZVpvbmVzKE1hdGguZmxvb3IodGhpcy5tYXBXaWR0aFRpbGVzIC8gWk9ORV9USUxFUyksIE1hdGguZmxvb3IodGhpcy5tYXBIZWlnaHRUaWxlcyAvIFpPTkVfVElMRVMpKTtcclxuICAgICAgY29uc3QgbWV0YSA9IHpvbmVzLmZpbmQoKHEpID0+IHEuaWQgPT09IGAke2N1ci5jb2x9LCR7Y3VyLnJvd31gKTtcclxuICAgICAgaWYgKG1ldGEpIHRoaXMuYXBwbHlCaW9tZShtZXRhLmJpb21lIGFzIEJpb21lSWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhcHBseUJpb21lKGlkOiBCaW9tZUlkKSB7XHJcbiAgICBjb25zdCBkZWYgPSBCSU9NRVNbaWRdO1xyXG4gICAgaWYgKCFkZWYpIHJldHVybjtcclxuICAgIGlmICh0aGlzLmVudk92ZXJsYXkpIHtcclxuICAgICAgY29uc3QgdGFyZ2V0ID0gZGVmLmVudmlyb25tZW50Q29sb3I7XHJcbiAgICAgIGNvbnN0IGZyb20gPSAodGhpcy5lbnZPdmVybGF5LmZpbGxDb2xvciA/PyAweGZmZmZmZikgYXMgbnVtYmVyO1xyXG4gICAgICBjb25zdCBvID0geyB0OiAwIH0gYXMgYW55O1xyXG4gICAgICB0aGlzLnR3ZWVucy5hZGQoeyB0YXJnZXRzOiBvLCB0OiAxLCBkdXJhdGlvbjogNDAwLCBvblVwZGF0ZTogKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGMgPSBQaGFzZXIuRGlzcGxheS5Db2xvci5JbnRlcnBvbGF0ZS5Db2xvcldpdGhDb2xvcihcclxuICAgICAgICAgIFBoYXNlci5EaXNwbGF5LkNvbG9yLkludGVnZXJUb0NvbG9yKGZyb20pLFxyXG4gICAgICAgICAgUGhhc2VyLkRpc3BsYXkuQ29sb3IuSW50ZWdlclRvQ29sb3IodGFyZ2V0KSxcclxuICAgICAgICAgIDEwMCxcclxuICAgICAgICAgIE1hdGguZmxvb3Ioby50ICogMTAwKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29uc3QgaGV4ID0gUGhhc2VyLkRpc3BsYXkuQ29sb3IuR2V0Q29sb3IoYy5yLCBjLmcsIGMuYik7XHJcbiAgICAgICAgdGhpcy5lbnZPdmVybGF5IS5zZXRGaWxsU3R5bGUoaGV4LCAwLjA4KTtcclxuICAgICAgfX0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBwdXNoU3Bhd25zVG9VSSgpIHtcclxuICAgIGlmICghdGhpcy5jb25maWdEYXRhLm9uU3Bhd25zVXBkYXRlIHx8ICF0aGlzLnNwYXduTWFuYWdlcikgcmV0dXJuO1xyXG4gICAgY29uc3Qgc3Bhd25zID0gdGhpcy5zcGF3bk1hbmFnZXIuZ2V0QWN0aXZlU3Bhd25zKCkubWFwKChyOiBhbnkpID0+ICh7XHJcbiAgICAgIGtleTogci5rZXksXHJcbiAgICAgIG5hbWU6IHIubmFtZSxcclxuICAgICAgcG9rZUlkOiByLnBva2VJZCxcclxuICAgICAgc3ByaXRlVXJsOiByLnNwcml0ZVVybCxcclxuICAgICAgcG9zaXRpb246IHIucG9zaXRpb24sXHJcbiAgICAgIGRpc3RhbmNlOiBQaGFzZXIuTWF0aC5EaXN0YW5jZS5CZXR3ZWVuKHRoaXMucGxheWVyLngsIHRoaXMucGxheWVyLnksIHIucG9zaXRpb24ueCwgci5wb3NpdGlvbi55KSxcclxuICAgIH0pKTtcclxuICAgIHRoaXMuY29uZmlnRGF0YS5vblNwYXduc1VwZGF0ZShzcGF3bnMpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiUGhhc2VyIiwiaW8iLCJTcGF3bk1hbmFnZXIiLCJaT05FX1RJTEVTIiwiZ2VuZXJhdGVab25lcyIsIkJJT01FUyIsImNhcGl0YWxpemUiLCJzIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsIkdhbWVTY2VuZSIsIlNjZW5lIiwiY29uZmlnRGF0YSIsInRpbGVTaXplIiwibWFwV2lkdGgiLCJtYXBIZWlnaHQiLCJwbGF5ZXJTcGVlZCIsIm1hcFdpZHRoVGlsZXMiLCJtYXBIZWlnaHRUaWxlcyIsInRpbGVTaXplUHgiLCJvdGhlcnMiLCJNYXAiLCJsYXN0U2VudCIsImxhc3RTdGF0dXNBdCIsIm1pbmlXIiwibWluaUgiLCJzdHJ1Y3R1cmVzIiwiaW5zaWRlU3RydWN0dXJlIiwiYWN0aXZlIiwidHlwZSIsImluaXQiLCJkYXRhIiwicHJlbG9hZCIsIndpZHRoIiwiaGVpZ2h0Iiwic2hlZXQiLCJ0ZXh0dXJlcyIsImNyZWF0ZUNhbnZhcyIsIkVycm9yIiwiY3R4IiwiZ2V0Q29udGV4dCIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiaSIsIngiLCJNYXRoIiwicmFuZG9tIiwieSIsInN0cm9rZVN0eWxlIiwiYmVnaW5QYXRoIiwibW92ZVRvIiwibGluZVRvIiwic3Ryb2tlIiwicmVmcmVzaCIsImciLCJtYWtlIiwiZ3JhcGhpY3MiLCJmaWxsQ2lyY2xlIiwibGluZVN0eWxlIiwic3Ryb2tlQ2lyY2xlIiwiZ2VuZXJhdGVUZXh0dXJlIiwiZGVzdHJveSIsImNyZWF0ZSIsIm1hcCIsInRpbGVtYXAiLCJ0aWxlV2lkdGgiLCJ0aWxlSGVpZ2h0IiwidGlsZXNldCIsImFkZFRpbGVzZXRJbWFnZSIsImxheWVyIiwiY3JlYXRlQmxhbmtMYXllciIsImdyb3VuZExheWVyIiwiZmlsbCIsInB1dFRpbGVBdCIsImZsb29yIiwicngiLCJCZXR3ZWVuIiwicnkiLCJzZXRDb2xsaXNpb24iLCJzdGFydFgiLCJpbml0aWFsWCIsInN0YXJ0WSIsImluaXRpYWxZIiwicGxheWVyIiwicGh5c2ljcyIsImFkZCIsInNwcml0ZSIsInNldERlcHRoIiwic2V0Q29sbGlkZVdvcmxkQm91bmRzIiwid29ybGRXaWR0aCIsIndvcmxkSGVpZ2h0IiwiY2FtZXJhcyIsIm1haW4iLCJzZXRCb3VuZHMiLCJzdGFydEZvbGxvdyIsIndvcmxkIiwiY29sbGlkZXIiLCJjdXJzb3JzIiwiaW5wdXQiLCJrZXlib2FyZCIsImNyZWF0ZUN1cnNvcktleXMiLCJ3YXNkIiwiYWRkS2V5cyIsIlciLCJJbnB1dCIsIktleWJvYXJkIiwiS2V5Q29kZXMiLCJBIiwiUyIsIkQiLCJlbnRlcktleSIsImFkZEtleSIsIkVOVEVSIiwiaW5pdE11bHRpcGxheWVyIiwiZW52T3ZlcmxheSIsInJlY3RhbmdsZSIsInNjYWxlIiwic2V0T3JpZ2luIiwic2V0U2Nyb2xsRmFjdG9yIiwiY3JlYXRlTWluaU1hcCIsInNwYXduTWFuYWdlciIsIm9uIiwicmVjIiwiYWRkTWluaU1hcmtlciIsImtleSIsInBvc2l0aW9uIiwic3RhdHVzT25jZSIsIm5hbWUiLCJvblBva2Vtb25TcG90dGVkIiwic3ByaXRlVXJsIiwicG9rZUlkIiwicHVzaFNwYXduc1RvVUkiLCJfa2V5IiwicmVtb3ZlTWluaU1hcmtlciIsImdldEFjdGl2ZVNwYXducyIsImxlbmd0aCIsIm9uUG9rZW1vbkNsZWFyZWQiLCJzdGFydEJhdHRsZUZyb21LZXkiLCJ6IiwiaGlnaGxpZ2h0TWluaVpvbmUiLCJjengiLCJjb2wiLCJjenkiLCJyb3ciLCJjYW0iLCJzdG9wRm9sbG93IiwicGFuIiwiY2FtZXJhIiwicHJvZ3Jlc3MiLCJ6b25lcyIsIm1ldGEiLCJmaW5kIiwicSIsImlkIiwiYXBwbHlCaW9tZSIsImJpb21lIiwiZ2VuZXJhdGVTdHJ1Y3R1cmVzIiwic3RhcnQiLCJ1cGRhdGUiLCJib2R5Iiwic3BlZWQiLCJ2eCIsInZ5IiwibGVmdCIsImlzRG93biIsInJpZ2h0IiwidXAiLCJkb3duIiwic2V0VmVsb2NpdHkiLCJsZW4iLCJoeXBvdCIsIm1pbmkiLCJub3ciLCJ0aW1lIiwic29ja2V0IiwiZW1pdCIsInVwZGF0ZVBsYXllclBvcyIsIkp1c3REb3duIiwibmVhcmVzdCIsImdldE5lYXJlc3RBY3RpdmUiLCJfdGV4dCIsImNvb2xkb3duTXMiLCJ0cmFuc3BvcnRzIiwiYXV0b0Nvbm5lY3QiLCJteUlkIiwicGF5bG9hZCIsIk9iamVjdCIsImVudHJpZXMiLCJwbGF5ZXJzIiwiZm9yRWFjaCIsInBvcyIsInNwYXduT3RoZXIiLCJnZXQiLCJkZWxldGUiLCJldmVudHMiLCJvbmNlIiwiU2NlbmVzIiwiRXZlbnRzIiwiU0hVVERPV04iLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJkaXNjb25uZWN0IiwidW5kZWZpbmVkIiwiY2xlYXIiLCJzZXRUaW50Iiwic2V0IiwiYmFzZVgiLCJiYXNlWSIsImNvbnRhaW5lciIsImJnIiwibWluaUdmeCIsIm1pbmlNYXJrZXJzIiwibWluaUJ1aWxkaW5ncyIsIm1pbmlIaWdobGlnaHQiLCJjb2xzIiwibWF4Iiwicm93cyIsInN0cm9rZVJlY3QiLCJoaXQiLCJ6b25lIiwic2V0SW50ZXJhY3RpdmUiLCJ1c2VIYW5kQ3Vyc29yIiwiX3BvaW50ZXIiLCJsb2NhbFgiLCJsb2NhbFkiLCJ6YyIsInpyIiwiY3giLCJjeSIsImdyaWQiLCJnZXRab25lR3JpZCIsImN1ciIsImdldEN1cnJlbnRab25lIiwiY3ciLCJjaCIsIndvcmxkVG9NaW5pIiwic3giLCJzeSIsInd4Iiwid3kiLCJwdCIsImRvdCIsImxpc3QiLCJmb3VuZCIsInJhZGl1cyIsImJlc3QiLCJiZXN0RCIsIk51bWJlciIsIlBPU0lUSVZFX0lORklOSVRZIiwiZCIsIkRpc3RhbmNlIiwiciIsInBsYXllclBva2Vtb24iLCJwb2tlUmVzIiwiZmV0Y2giLCJwb2tlRGF0YSIsImpzb24iLCJkZXNwYXduIiwic2NlbmUiLCJ3aWxkUG9rZW1vbiIsImNob29zZSIsImFyciIsImJ5QmlvbWUiLCJjaXR5IiwibW91bnRhaW4iLCJmb3Jlc3QiLCJkZXNlcnQiLCJsYWtlIiwiZ3Jhc3NsYW5kIiwiY2F2ZSIsInNub3dmaWVsZCIsInR5cGVzIiwicHVzaCIsImNvbG9yIiwiYnVpbGRpbmciLCJleGlzdGluZyIsImRvb3IiLCJvdmVybGFwIiwiZW50ZXJTdHJ1Y3R1cmUiLCJzcSIsImIiLCJ0b3dlciIsImxhYiIsInRlbXBsZSIsInNldE92ZXJyaWRlVHlwZXMiLCJwb2tlbW9uUG9vbCIsImV4aXRTdHJ1Y3R1cmUiLCJkZWYiLCJ0YXJnZXQiLCJlbnZpcm9ubWVudENvbG9yIiwiZnJvbSIsImZpbGxDb2xvciIsIm8iLCJ0IiwidHdlZW5zIiwidGFyZ2V0cyIsImR1cmF0aW9uIiwib25VcGRhdGUiLCJjIiwiRGlzcGxheSIsIkNvbG9yIiwiSW50ZXJwb2xhdGUiLCJDb2xvcldpdGhDb2xvciIsIkludGVnZXJUb0NvbG9yIiwiaGV4IiwiR2V0Q29sb3IiLCJzZXRGaWxsU3R5bGUiLCJvblNwYXduc1VwZGF0ZSIsInNwYXducyIsImRpc3RhbmNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./lib/phaser/GameScene.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./lib/spawnUtils.ts":
/*!***************************!*\
  !*** ./lib/spawnUtils.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SpawnManager: () => (/* binding */ SpawnManager)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _mapZones__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mapZones */ \"(pages-dir-node)/./lib/mapZones.ts\");\n\n\nconst MAX_ACTIVE = 8;\n// Weighted rarity target buckets\nconst RARITY_WEIGHTS = {\n    common: 0.7,\n    rare: 0.25,\n    legendary: 0.05\n};\nfunction pickRarity() {\n    const r = Math.random();\n    if (r < RARITY_WEIGHTS.common) return \"common\";\n    if (r < RARITY_WEIGHTS.common + RARITY_WEIGHTS.rare) return \"rare\";\n    return \"legendary\";\n}\nasync function fetchPokemon(pokeId) {\n    const res = await fetch(`https://pokeapi.co/api/v2/pokemon/${pokeId}`);\n    const data = await res.json();\n    const types = data.types?.map((t)=>t.type.name) || [];\n    const spriteUrl = data?.sprites?.front_default || data?.sprites?.other?.[\"official-artwork\"]?.front_default;\n    return {\n        data,\n        types,\n        spriteUrl,\n        name: data.name\n    };\n}\nasync function fetchSpecies(pokeId) {\n    const res = await fetch(`https://pokeapi.co/api/v2/pokemon-species/${pokeId}`);\n    return res.json();\n}\n// Heuristic rarity tiering based on species flags and capture_rate\nfunction classifyRarity(species) {\n    if (species?.is_legendary || species?.is_mythical) return \"legendary\";\n    const rate = species?.capture_rate ?? 45; // 0-255 higher = easier\n    if (rate >= 140) return \"common\"; // easy to catch\n    if (rate >= 70) return \"rare\";\n    return \"legendary\";\n}\nclass SpawnManager extends phaser__WEBPACK_IMPORTED_MODULE_0__.Events.EventEmitter {\n    constructor(scene, tileSize, mapWidthTiles, mapHeightTiles){\n        super(), this.zones = [], this.zoneCols = 0, this.zoneRows = 0, this.active = new Map(), this.currentZone = {\n            col: 0,\n            row: 0,\n            id: \"0,0\"\n        }, this.overrideTypes = null;\n        this.scene = scene;\n        this.tileSize = tileSize;\n        this.mapWidthTiles = mapWidthTiles;\n        this.mapHeightTiles = mapHeightTiles;\n        this.zoneCols = Math.max(1, Math.floor(mapWidthTiles / _mapZones__WEBPACK_IMPORTED_MODULE_1__.ZONE_TILES));\n        this.zoneRows = Math.max(1, Math.floor(mapHeightTiles / _mapZones__WEBPACK_IMPORTED_MODULE_1__.ZONE_TILES));\n        this.zones = (0,_mapZones__WEBPACK_IMPORTED_MODULE_1__.generateZones)(this.zoneCols, this.zoneRows);\n    }\n    getActiveSpawns() {\n        return Array.from(this.active.values());\n    }\n    getZoneGrid() {\n        return {\n            cols: this.zoneCols,\n            rows: this.zoneRows,\n            zones: this.zones\n        };\n    }\n    getCurrentZone() {\n        return this.currentZone;\n    }\n    setOverrideTypes(types) {\n        this.overrideTypes = types;\n        this.topUpSpawns(true);\n    }\n    updatePlayerPos(x, y) {\n        const tx = Math.floor(x / this.tileSize);\n        const ty = Math.floor(y / this.tileSize);\n        const z = (0,_mapZones__WEBPACK_IMPORTED_MODULE_1__.getZoneForTile)(tx, ty, this.zoneCols, this.zoneRows);\n        if (z.id !== this.currentZone.id) {\n            this.currentZone = z;\n            this.emit(\"zoneChanged\", z);\n            // on zone change, try to top up spawns immediately\n            this.topUpSpawns(true);\n        }\n    }\n    start() {\n        this.topUpSpawns(true);\n        this.spawnTimer?.remove(false);\n        const scheduleNext = ()=>{\n            const delay = phaser__WEBPACK_IMPORTED_MODULE_0__.Math.Between(20000, 40000);\n            this.spawnTimer = this.scene.time.addEvent({\n                delay,\n                loop: false,\n                callback: ()=>{\n                    this.topUpSpawns(false);\n                    scheduleNext();\n                }\n            });\n        };\n        scheduleNext();\n    }\n    stop() {\n        this.spawnTimer?.remove(false);\n        this.active.forEach((r)=>this.despawn(r.key));\n        this.active.clear();\n    }\n    async topUpSpawns(immediate) {\n        if (this.active.size >= MAX_ACTIVE) return;\n        const need = Math.min(MAX_ACTIVE - this.active.size, 2); // spawn up to 2 at a time\n        for(let i = 0; i < need; i++){\n            try {\n                await this.spawnOne();\n            } catch  {}\n            if (!immediate) break;\n        }\n    }\n    getCandidateZones() {\n        const around = (0,_mapZones__WEBPACK_IMPORTED_MODULE_1__.getAdjacentZoneCoords)(this.currentZone.col, this.currentZone.row, this.zoneCols, this.zoneRows, 1);\n        return around;\n    }\n    pickZoneArea(zone) {\n        const startX = zone.col * _mapZones__WEBPACK_IMPORTED_MODULE_1__.ZONE_TILES * this.tileSize;\n        const startY = zone.row * _mapZones__WEBPACK_IMPORTED_MODULE_1__.ZONE_TILES * this.tileSize;\n        const endX = startX + _mapZones__WEBPACK_IMPORTED_MODULE_1__.ZONE_TILES * this.tileSize;\n        const endY = startY + _mapZones__WEBPACK_IMPORTED_MODULE_1__.ZONE_TILES * this.tileSize;\n        return {\n            startX,\n            startY,\n            endX,\n            endY\n        };\n    }\n    async spawnOne() {\n        const zones = this.getCandidateZones();\n        const picked = phaser__WEBPACK_IMPORTED_MODULE_0__.Utils.Array.GetRandom(zones);\n        const zoneMeta = this.zones.find((z)=>z.id === picked.id);\n        const biome = zoneMeta.biome;\n        const types = this.overrideTypes || _mapZones__WEBPACK_IMPORTED_MODULE_1__.BIOME_TYPE_POOLS[biome];\n        // rarity target\n        const target = pickRarity();\n        // Try several random ids until we find one that matches biome + rarity\n        let chosen = null;\n        for(let tries = 0; tries < 12; tries++){\n            const id = phaser__WEBPACK_IMPORTED_MODULE_0__.Math.Between(1, 898);\n            const p = await fetchPokemon(id);\n            if (!p.spriteUrl) continue;\n            if (!p.types.some((t)=>types.includes(t))) continue; // not matching biome\n            const species = await fetchSpecies(id);\n            const r = classifyRarity(species);\n            if (r !== target && Math.random() > 0.35) continue; // allow some bleed-over so we don't loop forever\n            chosen = {\n                id,\n                name: p.name,\n                spriteUrl: p.spriteUrl,\n                types: p.types\n            };\n            break;\n        }\n        if (!chosen) return;\n        const area = this.pickZoneArea(picked);\n        const x = phaser__WEBPACK_IMPORTED_MODULE_0__.Math.Between(area.startX + 12, area.endX - 12);\n        const y = phaser__WEBPACK_IMPORTED_MODULE_0__.Math.Between(area.startY + 12, area.endY - 12);\n        const key = `spawn-${chosen.id}-${Date.now()}`;\n        const sprite = this.scene.add.image(x, y, `pkmn-${chosen.id}`).setVisible(false);\n        if (!this.scene.textures.exists(`pkmn-${chosen.id}`)) {\n            await new Promise((resolve)=>{\n                this.scene.load.once(phaser__WEBPACK_IMPORTED_MODULE_0__.Loader.Events.COMPLETE, ()=>resolve());\n                this.scene.load.image(`pkmn-${chosen.id}`, chosen.spriteUrl);\n                this.scene.load.start();\n            });\n            sprite.setTexture(`pkmn-${chosen.id}`);\n        }\n        sprite.setDepth(20).setInteractive({\n            useHandCursor: true\n        });\n        sprite.setScale(0.1).setAlpha(0);\n        sprite.on(\"pointerdown\", ()=>this.emit(\"spawnClicked\", key));\n        // emerge animation\n        sprite.setVisible(true);\n        this.scene.tweens.add({\n            targets: sprite,\n            alpha: 1,\n            scale: 1.2,\n            duration: 300,\n            yoyo: true,\n            ease: \"sine.out\",\n            onComplete: ()=>sprite.setScale(1)\n        });\n        const rec = {\n            key,\n            name: chosen.name,\n            pokeId: chosen.id,\n            types: chosen.types,\n            spriteUrl: chosen.spriteUrl,\n            position: {\n                x,\n                y\n            },\n            zone: picked,\n            sprite\n        };\n        // despawn after 60s with fade out\n        rec.timeout = this.scene.time.delayedCall(60000, ()=>this.despawn(key));\n        this.active.set(key, rec);\n        this.emit(\"spawned\", rec);\n    }\n    despawn(key) {\n        const rec = this.active.get(key);\n        if (!rec) return;\n        if (rec.timeout) rec.timeout.remove(false);\n        if (rec.sprite) {\n            this.scene.tweens.add({\n                targets: rec.sprite,\n                alpha: 0,\n                duration: 400,\n                onComplete: ()=>rec.sprite?.destroy()\n            });\n        }\n        this.emit(\"despawned\", key);\n        this.active.delete(key);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTTtnQkFBRXFCLE9BQU87Z0JBQUdFLFVBQVU7Z0JBQUtHLFlBQVksSUFBTUMsSUFBSTNCLE1BQU0sRUFBRWlDO1lBQVU7UUFDaEg7UUFDQSxJQUFJLENBQUM5RSxJQUFJLENBQUMsYUFBYWM7UUFDdkIsSUFBSSxDQUFDdkMsTUFBTSxDQUFDd0csTUFBTSxDQUFDakU7SUFDckI7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxTYWhpdGhcXE9uZURyaXZlXFxEZXNrdG9wXFx5b2thaWh1bnRcXGZyb250ZW5kXFxsaWJcXHNwYXduVXRpbHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUGhhc2VyIGZyb20gXCJwaGFzZXJcIjtcclxuaW1wb3J0IHsgQklPTUVfVFlQRV9QT09MUywgWk9ORV9USUxFUywgZ2VuZXJhdGVab25lcywgZ2V0QWRqYWNlbnRab25lQ29vcmRzLCBnZXRab25lRm9yVGlsZSwgdHlwZSBCaW9tZSB9IGZyb20gXCIuL21hcFpvbmVzXCI7XHJcblxyXG5leHBvcnQgdHlwZSBTcGF3blJhcml0eSA9IFwiY29tbW9uXCIgfCBcInJhcmVcIiB8IFwibGVnZW5kYXJ5XCI7XHJcblxyXG5leHBvcnQgdHlwZSBTcGF3blJlY29yZCA9IHtcclxuICBrZXk6IHN0cmluZztcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgcG9rZUlkOiBudW1iZXI7XHJcbiAgdHlwZXM6IHN0cmluZ1tdO1xyXG4gIHNwcml0ZVVybDogc3RyaW5nO1xyXG4gIHBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH07XHJcbiAgem9uZTogeyBjb2w6IG51bWJlcjsgcm93OiBudW1iZXI7IGlkOiBzdHJpbmcgfTtcclxuICBzcHJpdGU/OiBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2U7XHJcbiAgdGltZW91dD86IFBoYXNlci5UaW1lLlRpbWVyRXZlbnQ7XHJcbiAgbWFya2VyPzogUGhhc2VyLkdhbWVPYmplY3RzLlNoYXBlOyAvLyBtaW5pbWFwIG1hcmtlclxyXG59O1xyXG5cclxuY29uc3QgTUFYX0FDVElWRSA9IDg7XHJcblxyXG4vLyBXZWlnaHRlZCByYXJpdHkgdGFyZ2V0IGJ1Y2tldHNcclxuY29uc3QgUkFSSVRZX1dFSUdIVFM6IFJlY29yZDxTcGF3blJhcml0eSwgbnVtYmVyPiA9IHtcclxuICBjb21tb246IDAuNyxcclxuICByYXJlOiAwLjI1LFxyXG4gIGxlZ2VuZGFyeTogMC4wNSxcclxufTtcclxuXHJcbmZ1bmN0aW9uIHBpY2tSYXJpdHkoKTogU3Bhd25SYXJpdHkge1xyXG4gIGNvbnN0IHIgPSBNYXRoLnJhbmRvbSgpO1xyXG4gIGlmIChyIDwgUkFSSVRZX1dFSUdIVFMuY29tbW9uKSByZXR1cm4gXCJjb21tb25cIjtcclxuICBpZiAociA8IFJBUklUWV9XRUlHSFRTLmNvbW1vbiArIFJBUklUWV9XRUlHSFRTLnJhcmUpIHJldHVybiBcInJhcmVcIjtcclxuICByZXR1cm4gXCJsZWdlbmRhcnlcIjtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hQb2tlbW9uKHBva2VJZDogbnVtYmVyKSB7XHJcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vcG9rZWFwaS5jby9hcGkvdjIvcG9rZW1vbi8ke3Bva2VJZH1gKTtcclxuICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICBjb25zdCB0eXBlczogc3RyaW5nW10gPSBkYXRhLnR5cGVzPy5tYXAoKHQ6IGFueSkgPT4gdC50eXBlLm5hbWUpIHx8IFtdO1xyXG4gIGNvbnN0IHNwcml0ZVVybCA9IGRhdGE/LnNwcml0ZXM/LmZyb250X2RlZmF1bHQgfHwgZGF0YT8uc3ByaXRlcz8ub3RoZXI/LltcIm9mZmljaWFsLWFydHdvcmtcIl0/LmZyb250X2RlZmF1bHQ7XHJcbiAgcmV0dXJuIHsgZGF0YSwgdHlwZXMsIHNwcml0ZVVybCwgbmFtZTogZGF0YS5uYW1lIH07XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoU3BlY2llcyhwb2tlSWQ6IG51bWJlcikge1xyXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGBodHRwczovL3Bva2VhcGkuY28vYXBpL3YyL3Bva2Vtb24tc3BlY2llcy8ke3Bva2VJZH1gKTtcclxuICByZXR1cm4gcmVzLmpzb24oKTtcclxufVxyXG5cclxuLy8gSGV1cmlzdGljIHJhcml0eSB0aWVyaW5nIGJhc2VkIG9uIHNwZWNpZXMgZmxhZ3MgYW5kIGNhcHR1cmVfcmF0ZVxyXG5mdW5jdGlvbiBjbGFzc2lmeVJhcml0eShzcGVjaWVzOiBhbnkpOiBTcGF3blJhcml0eSB7XHJcbiAgaWYgKHNwZWNpZXM/LmlzX2xlZ2VuZGFyeSB8fCBzcGVjaWVzPy5pc19teXRoaWNhbCkgcmV0dXJuIFwibGVnZW5kYXJ5XCI7XHJcbiAgY29uc3QgcmF0ZSA9IHNwZWNpZXM/LmNhcHR1cmVfcmF0ZSA/PyA0NTsgLy8gMC0yNTUgaGlnaGVyID0gZWFzaWVyXHJcbiAgaWYgKHJhdGUgPj0gMTQwKSByZXR1cm4gXCJjb21tb25cIjsgLy8gZWFzeSB0byBjYXRjaFxyXG4gIGlmIChyYXRlID49IDcwKSByZXR1cm4gXCJyYXJlXCI7XHJcbiAgcmV0dXJuIFwibGVnZW5kYXJ5XCI7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTcGF3bk1hbmFnZXIgZXh0ZW5kcyBQaGFzZXIuRXZlbnRzLkV2ZW50RW1pdHRlciB7XHJcbiAgcHJpdmF0ZSBzY2VuZTogUGhhc2VyLlNjZW5lO1xyXG4gIHByaXZhdGUgdGlsZVNpemU6IG51bWJlcjtcclxuICBwcml2YXRlIG1hcFdpZHRoVGlsZXM6IG51bWJlcjtcclxuICBwcml2YXRlIG1hcEhlaWdodFRpbGVzOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSB6b25lczogUmV0dXJuVHlwZTx0eXBlb2YgZ2VuZXJhdGVab25lcz4gPSBbXTtcclxuICBwcml2YXRlIHpvbmVDb2xzID0gMDtcclxuICBwcml2YXRlIHpvbmVSb3dzID0gMDtcclxuICBwcml2YXRlIGFjdGl2ZTogTWFwPHN0cmluZywgU3Bhd25SZWNvcmQ+ID0gbmV3IE1hcCgpO1xyXG4gIHByaXZhdGUgY3VycmVudFpvbmUgPSB7IGNvbDogMCwgcm93OiAwLCBpZDogXCIwLDBcIiB9O1xyXG4gIHByaXZhdGUgc3Bhd25UaW1lcj86IFBoYXNlci5UaW1lLlRpbWVyRXZlbnQ7XHJcbiAgcHJpdmF0ZSBvdmVycmlkZVR5cGVzOiBzdHJpbmdbXSB8IG51bGwgPSBudWxsO1xyXG5cclxuICBjb25zdHJ1Y3RvcihzY2VuZTogUGhhc2VyLlNjZW5lLCB0aWxlU2l6ZTogbnVtYmVyLCBtYXBXaWR0aFRpbGVzOiBudW1iZXIsIG1hcEhlaWdodFRpbGVzOiBudW1iZXIpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLnNjZW5lID0gc2NlbmU7XHJcbiAgICB0aGlzLnRpbGVTaXplID0gdGlsZVNpemU7XHJcbiAgICB0aGlzLm1hcFdpZHRoVGlsZXMgPSBtYXBXaWR0aFRpbGVzO1xyXG4gICAgdGhpcy5tYXBIZWlnaHRUaWxlcyA9IG1hcEhlaWdodFRpbGVzO1xyXG5cclxuICAgIHRoaXMuem9uZUNvbHMgPSBNYXRoLm1heCgxLCBNYXRoLmZsb29yKG1hcFdpZHRoVGlsZXMgLyBaT05FX1RJTEVTKSk7XHJcbiAgICB0aGlzLnpvbmVSb3dzID0gTWF0aC5tYXgoMSwgTWF0aC5mbG9vcihtYXBIZWlnaHRUaWxlcyAvIFpPTkVfVElMRVMpKTtcclxuICAgIHRoaXMuem9uZXMgPSBnZW5lcmF0ZVpvbmVzKHRoaXMuem9uZUNvbHMsIHRoaXMuem9uZVJvd3MpO1xyXG4gIH1cclxuXHJcbiAgZ2V0QWN0aXZlU3Bhd25zKCkgeyByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmFjdGl2ZS52YWx1ZXMoKSk7IH1cclxuICBnZXRab25lR3JpZCgpIHsgcmV0dXJuIHsgY29sczogdGhpcy56b25lQ29scywgcm93czogdGhpcy56b25lUm93cywgem9uZXM6IHRoaXMuem9uZXMgfTsgfVxyXG4gIGdldEN1cnJlbnRab25lKCkgeyByZXR1cm4gdGhpcy5jdXJyZW50Wm9uZTsgfVxyXG4gIHNldE92ZXJyaWRlVHlwZXModHlwZXM6IHN0cmluZ1tdIHwgbnVsbCkgeyB0aGlzLm92ZXJyaWRlVHlwZXMgPSB0eXBlczsgdGhpcy50b3BVcFNwYXducyh0cnVlKTsgfVxyXG5cclxuICB1cGRhdGVQbGF5ZXJQb3MoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIGNvbnN0IHR4ID0gTWF0aC5mbG9vcih4IC8gdGhpcy50aWxlU2l6ZSk7XHJcbiAgICBjb25zdCB0eSA9IE1hdGguZmxvb3IoeSAvIHRoaXMudGlsZVNpemUpO1xyXG4gICAgY29uc3QgeiA9IGdldFpvbmVGb3JUaWxlKHR4LCB0eSwgdGhpcy56b25lQ29scywgdGhpcy56b25lUm93cyk7XHJcbiAgICBpZiAoei5pZCAhPT0gdGhpcy5jdXJyZW50Wm9uZS5pZCkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRab25lID0gejtcclxuICAgICAgdGhpcy5lbWl0KFwiem9uZUNoYW5nZWRcIiwgeik7XHJcbiAgICAgIC8vIG9uIHpvbmUgY2hhbmdlLCB0cnkgdG8gdG9wIHVwIHNwYXducyBpbW1lZGlhdGVseVxyXG4gICAgICB0aGlzLnRvcFVwU3Bhd25zKHRydWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhcnQoKSB7XHJcbiAgICB0aGlzLnRvcFVwU3Bhd25zKHRydWUpO1xyXG4gICAgdGhpcy5zcGF3blRpbWVyPy5yZW1vdmUoZmFsc2UpO1xyXG4gICAgY29uc3Qgc2NoZWR1bGVOZXh0ID0gKCkgPT4ge1xyXG4gICAgICBjb25zdCBkZWxheSA9IFBoYXNlci5NYXRoLkJldHdlZW4oMjAwMDAsIDQwMDAwKTtcclxuICAgICAgdGhpcy5zcGF3blRpbWVyID0gdGhpcy5zY2VuZS50aW1lLmFkZEV2ZW50KHsgZGVsYXksIGxvb3A6IGZhbHNlLCBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgIHRoaXMudG9wVXBTcGF3bnMoZmFsc2UpO1xyXG4gICAgICAgIHNjaGVkdWxlTmV4dCgpO1xyXG4gICAgICB9fSk7XHJcbiAgICB9O1xyXG4gICAgc2NoZWR1bGVOZXh0KCk7XHJcbiAgfVxyXG5cclxuICBzdG9wKCkge1xyXG4gICAgdGhpcy5zcGF3blRpbWVyPy5yZW1vdmUoZmFsc2UpO1xyXG4gICAgdGhpcy5hY3RpdmUuZm9yRWFjaChyID0+IHRoaXMuZGVzcGF3bihyLmtleSkpO1xyXG4gICAgdGhpcy5hY3RpdmUuY2xlYXIoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgdG9wVXBTcGF3bnMoaW1tZWRpYXRlOiBib29sZWFuKSB7XHJcbiAgICBpZiAodGhpcy5hY3RpdmUuc2l6ZSA+PSBNQVhfQUNUSVZFKSByZXR1cm47XHJcbiAgICBjb25zdCBuZWVkID0gTWF0aC5taW4oTUFYX0FDVElWRSAtIHRoaXMuYWN0aXZlLnNpemUsIDIpOyAvLyBzcGF3biB1cCB0byAyIGF0IGEgdGltZVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZWVkOyBpKyspIHtcclxuICAgICAgdHJ5IHsgYXdhaXQgdGhpcy5zcGF3bk9uZSgpOyB9IGNhdGNoIHsgLyogaWdub3JlIHRyYW5zaWVudCAqLyB9XHJcbiAgICAgIGlmICghaW1tZWRpYXRlKSBicmVhaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0Q2FuZGlkYXRlWm9uZXMoKSB7XHJcbiAgICBjb25zdCBhcm91bmQgPSBnZXRBZGphY2VudFpvbmVDb29yZHModGhpcy5jdXJyZW50Wm9uZS5jb2wsIHRoaXMuY3VycmVudFpvbmUucm93LCB0aGlzLnpvbmVDb2xzLCB0aGlzLnpvbmVSb3dzLCAxKTtcclxuICAgIHJldHVybiBhcm91bmQ7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHBpY2tab25lQXJlYSh6b25lOiB7IGNvbDogbnVtYmVyOyByb3c6IG51bWJlciB9KSB7XHJcbiAgICBjb25zdCBzdGFydFggPSB6b25lLmNvbCAqIFpPTkVfVElMRVMgKiB0aGlzLnRpbGVTaXplO1xyXG4gICAgY29uc3Qgc3RhcnRZID0gem9uZS5yb3cgKiBaT05FX1RJTEVTICogdGhpcy50aWxlU2l6ZTtcclxuICAgIGNvbnN0IGVuZFggPSBzdGFydFggKyBaT05FX1RJTEVTICogdGhpcy50aWxlU2l6ZTtcclxuICAgIGNvbnN0IGVuZFkgPSBzdGFydFkgKyBaT05FX1RJTEVTICogdGhpcy50aWxlU2l6ZTtcclxuICAgIHJldHVybiB7IHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZIH07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHNwYXduT25lKCkge1xyXG4gICAgY29uc3Qgem9uZXMgPSB0aGlzLmdldENhbmRpZGF0ZVpvbmVzKCk7XHJcbiAgICBjb25zdCBwaWNrZWQgPSBQaGFzZXIuVXRpbHMuQXJyYXkuR2V0UmFuZG9tKHpvbmVzKTtcclxuICAgIGNvbnN0IHpvbmVNZXRhID0gdGhpcy56b25lcy5maW5kKHogPT4gei5pZCA9PT0gcGlja2VkLmlkKSE7XHJcbiAgICBjb25zdCBiaW9tZTogQmlvbWUgPSB6b25lTWV0YS5iaW9tZSBhcyBhbnk7XHJcbiAgICBjb25zdCB0eXBlcyA9IHRoaXMub3ZlcnJpZGVUeXBlcyB8fCBCSU9NRV9UWVBFX1BPT0xTW2Jpb21lXTtcclxuXHJcbiAgICAvLyByYXJpdHkgdGFyZ2V0XHJcbiAgICBjb25zdCB0YXJnZXQgPSBwaWNrUmFyaXR5KCk7XHJcblxyXG4gICAgLy8gVHJ5IHNldmVyYWwgcmFuZG9tIGlkcyB1bnRpbCB3ZSBmaW5kIG9uZSB0aGF0IG1hdGNoZXMgYmlvbWUgKyByYXJpdHlcclxuICAgIGxldCBjaG9zZW46IHsgaWQ6IG51bWJlcjsgbmFtZTogc3RyaW5nOyBzcHJpdGVVcmw6IHN0cmluZzsgdHlwZXM6IHN0cmluZ1tdIH0gfCBudWxsID0gbnVsbDtcclxuICAgIGZvciAobGV0IHRyaWVzID0gMDsgdHJpZXMgPCAxMjsgdHJpZXMrKykge1xyXG4gICAgICBjb25zdCBpZCA9IFBoYXNlci5NYXRoLkJldHdlZW4oMSwgODk4KTtcclxuICAgICAgY29uc3QgcCA9IGF3YWl0IGZldGNoUG9rZW1vbihpZCk7XHJcbiAgICAgIGlmICghcC5zcHJpdGVVcmwpIGNvbnRpbnVlO1xyXG4gICAgICBpZiAoIXAudHlwZXMuc29tZSh0ID0+IHR5cGVzLmluY2x1ZGVzKHQpKSkgY29udGludWU7IC8vIG5vdCBtYXRjaGluZyBiaW9tZVxyXG4gICAgICBjb25zdCBzcGVjaWVzID0gYXdhaXQgZmV0Y2hTcGVjaWVzKGlkKTtcclxuICAgICAgY29uc3QgciA9IGNsYXNzaWZ5UmFyaXR5KHNwZWNpZXMpO1xyXG4gICAgICBpZiAociAhPT0gdGFyZ2V0ICYmIE1hdGgucmFuZG9tKCkgPiAwLjM1KSBjb250aW51ZTsgLy8gYWxsb3cgc29tZSBibGVlZC1vdmVyIHNvIHdlIGRvbid0IGxvb3AgZm9yZXZlclxyXG4gICAgICBjaG9zZW4gPSB7IGlkLCBuYW1lOiBwLm5hbWUsIHNwcml0ZVVybDogcC5zcHJpdGVVcmwsIHR5cGVzOiBwLnR5cGVzIH07XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgaWYgKCFjaG9zZW4pIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBhcmVhID0gdGhpcy5waWNrWm9uZUFyZWEocGlja2VkKTtcclxuICAgIGNvbnN0IHggPSBQaGFzZXIuTWF0aC5CZXR3ZWVuKGFyZWEuc3RhcnRYICsgMTIsIGFyZWEuZW5kWCAtIDEyKTtcclxuICAgIGNvbnN0IHkgPSBQaGFzZXIuTWF0aC5CZXR3ZWVuKGFyZWEuc3RhcnRZICsgMTIsIGFyZWEuZW5kWSAtIDEyKTtcclxuXHJcbiAgICBjb25zdCBrZXkgPSBgc3Bhd24tJHtjaG9zZW4uaWR9LSR7RGF0ZS5ub3coKX1gO1xyXG4gICAgY29uc3Qgc3ByaXRlID0gdGhpcy5zY2VuZS5hZGQuaW1hZ2UoeCwgeSwgYHBrbW4tJHtjaG9zZW4uaWR9YCkuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICBpZiAoIXRoaXMuc2NlbmUudGV4dHVyZXMuZXhpc3RzKGBwa21uLSR7Y2hvc2VuLmlkfWApKSB7XHJcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5sb2FkLm9uY2UoUGhhc2VyLkxvYWRlci5FdmVudHMuQ09NUExFVEUsICgpID0+IHJlc29sdmUoKSk7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5sb2FkLmltYWdlKGBwa21uLSR7Y2hvc2VuLmlkfWAsIGNob3NlbiEuc3ByaXRlVXJsKTtcclxuICAgICAgICB0aGlzLnNjZW5lLmxvYWQuc3RhcnQoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHNwcml0ZS5zZXRUZXh0dXJlKGBwa21uLSR7Y2hvc2VuLmlkfWApO1xyXG4gICAgfVxyXG5cclxuICAgIHNwcml0ZS5zZXREZXB0aCgyMCkuc2V0SW50ZXJhY3RpdmUoeyB1c2VIYW5kQ3Vyc29yOiB0cnVlIH0pO1xyXG4gICAgc3ByaXRlLnNldFNjYWxlKDAuMSkuc2V0QWxwaGEoMCk7XHJcbiAgICBzcHJpdGUub24oXCJwb2ludGVyZG93blwiLCAoKSA9PiB0aGlzLmVtaXQoXCJzcGF3bkNsaWNrZWRcIiwga2V5KSk7XHJcblxyXG4gICAgLy8gZW1lcmdlIGFuaW1hdGlvblxyXG4gICAgc3ByaXRlLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICB0aGlzLnNjZW5lLnR3ZWVucy5hZGQoeyB0YXJnZXRzOiBzcHJpdGUsIGFscGhhOiAxLCBzY2FsZTogMS4yLCBkdXJhdGlvbjogMzAwLCB5b3lvOiB0cnVlLCBlYXNlOiBcInNpbmUub3V0XCIsIG9uQ29tcGxldGU6ICgpID0+IHNwcml0ZS5zZXRTY2FsZSgxKSB9KTtcclxuXHJcbiAgICBjb25zdCByZWM6IFNwYXduUmVjb3JkID0ge1xyXG4gICAgICBrZXksXHJcbiAgICAgIG5hbWU6IGNob3Nlbi5uYW1lLFxyXG4gICAgICBwb2tlSWQ6IGNob3Nlbi5pZCxcclxuICAgICAgdHlwZXM6IGNob3Nlbi50eXBlcyxcclxuICAgICAgc3ByaXRlVXJsOiBjaG9zZW4uc3ByaXRlVXJsLFxyXG4gICAgICBwb3NpdGlvbjogeyB4LCB5IH0sXHJcbiAgICAgIHpvbmU6IHBpY2tlZCxcclxuICAgICAgc3ByaXRlLFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBkZXNwYXduIGFmdGVyIDYwcyB3aXRoIGZhZGUgb3V0XHJcbiAgICByZWMudGltZW91dCA9IHRoaXMuc2NlbmUudGltZS5kZWxheWVkQ2FsbCg2MDAwMCwgKCkgPT4gdGhpcy5kZXNwYXduKGtleSkpO1xyXG5cclxuICAgIHRoaXMuYWN0aXZlLnNldChrZXksIHJlYyk7XHJcbiAgICB0aGlzLmVtaXQoXCJzcGF3bmVkXCIsIHJlYyk7XHJcbiAgfVxyXG5cclxuICBkZXNwYXduKGtleTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCByZWMgPSB0aGlzLmFjdGl2ZS5nZXQoa2V5KTtcclxuICAgIGlmICghcmVjKSByZXR1cm47XHJcbiAgICBpZiAocmVjLnRpbWVvdXQpIHJlYy50aW1lb3V0LnJlbW92ZShmYWxzZSk7XHJcbiAgICBpZiAocmVjLnNwcml0ZSkge1xyXG4gICAgICB0aGlzLnNjZW5lLnR3ZWVucy5hZGQoeyB0YXJnZXRzOiByZWMuc3ByaXRlLCBhbHBoYTogMCwgZHVyYXRpb246IDQwMCwgb25Db21wbGV0ZTogKCkgPT4gcmVjLnNwcml0ZT8uZGVzdHJveSgpIH0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5lbWl0KFwiZGVzcGF3bmVkXCIsIGtleSk7XHJcbiAgICB0aGlzLmFjdGl2ZS5kZWxldGUoa2V5KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIlBoYXNlciIsIkJJT01FX1RZUEVfUE9PTFMiLCJaT05FX1RJTEVTIiwiZ2VuZXJhdGVab25lcyIsImdldEFkamFjZW50Wm9uZUNvb3JkcyIsImdldFpvbmVGb3JUaWxlIiwiTUFYX0FDVElWRSIsIlJBUklUWV9XRUlHSFRTIiwiY29tbW9uIiwicmFyZSIsImxlZ2VuZGFyeSIsInBpY2tSYXJpdHkiLCJyIiwiTWF0aCIsInJhbmRvbSIsImZldGNoUG9rZW1vbiIsInBva2VJZCIsInJlcyIsImZldGNoIiwiZGF0YSIsImpzb24iLCJ0eXBlcyIsIm1hcCIsInQiLCJ0eXBlIiwibmFtZSIsInNwcml0ZVVybCIsInNwcml0ZXMiLCJmcm9udF9kZWZhdWx0Iiwib3RoZXIiLCJmZXRjaFNwZWNpZXMiLCJjbGFzc2lmeVJhcml0eSIsInNwZWNpZXMiLCJpc19sZWdlbmRhcnkiLCJpc19teXRoaWNhbCIsInJhdGUiLCJjYXB0dXJlX3JhdGUiLCJTcGF3bk1hbmFnZXIiLCJFdmVudHMiLCJFdmVudEVtaXR0ZXIiLCJzY2VuZSIsInRpbGVTaXplIiwibWFwV2lkdGhUaWxlcyIsIm1hcEhlaWdodFRpbGVzIiwiem9uZXMiLCJ6b25lQ29scyIsInpvbmVSb3dzIiwiYWN0aXZlIiwiTWFwIiwiY3VycmVudFpvbmUiLCJjb2wiLCJyb3ciLCJpZCIsIm92ZXJyaWRlVHlwZXMiLCJtYXgiLCJmbG9vciIsImdldEFjdGl2ZVNwYXducyIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsImdldFpvbmVHcmlkIiwiY29scyIsInJvd3MiLCJnZXRDdXJyZW50Wm9uZSIsInNldE92ZXJyaWRlVHlwZXMiLCJ0b3BVcFNwYXducyIsInVwZGF0ZVBsYXllclBvcyIsIngiLCJ5IiwidHgiLCJ0eSIsInoiLCJlbWl0Iiwic3RhcnQiLCJzcGF3blRpbWVyIiwicmVtb3ZlIiwic2NoZWR1bGVOZXh0IiwiZGVsYXkiLCJCZXR3ZWVuIiwidGltZSIsImFkZEV2ZW50IiwibG9vcCIsImNhbGxiYWNrIiwic3RvcCIsImZvckVhY2giLCJkZXNwYXduIiwia2V5IiwiY2xlYXIiLCJpbW1lZGlhdGUiLCJzaXplIiwibmVlZCIsIm1pbiIsImkiLCJzcGF3bk9uZSIsImdldENhbmRpZGF0ZVpvbmVzIiwiYXJvdW5kIiwicGlja1pvbmVBcmVhIiwiem9uZSIsInN0YXJ0WCIsInN0YXJ0WSIsImVuZFgiLCJlbmRZIiwicGlja2VkIiwiVXRpbHMiLCJHZXRSYW5kb20iLCJ6b25lTWV0YSIsImZpbmQiLCJiaW9tZSIsInRhcmdldCIsImNob3NlbiIsInRyaWVzIiwicCIsInNvbWUiLCJpbmNsdWRlcyIsImFyZWEiLCJEYXRlIiwibm93Iiwic3ByaXRlIiwiYWRkIiwiaW1hZ2UiLCJzZXRWaXNpYmxlIiwidGV4dHVyZXMiLCJleGlzdHMiLCJQcm9taXNlIiwicmVzb2x2ZSIsImxvYWQiLCJvbmNlIiwiTG9hZGVyIiwiQ09NUExFVEUiLCJzZXRUZXh0dXJlIiwic2V0RGVwdGgiLCJzZXRJbnRlcmFjdGl2ZSIsInVzZUhhbmRDdXJzb3IiLCJzZXRTY2FsZSIsInNldEFscGhhIiwib24iLCJ0d2VlbnMiLCJ0YXJnZXRzIiwiYWxwaGEiLCJzY2FsZSIsImR1cmF0aW9uIiwieW95byIsImVhc2UiLCJvbkNvbXBsZXRlIiwicmVjIiwicG9zaXRpb24iLCJ0aW1lb3V0IiwiZGVsYXllZENhbGwiLCJzZXQiLCJnZXQiLCJkZXN0cm95IiwiZGVsZXRlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./lib/spawnUtils.ts\n");

/***/ })

};
;